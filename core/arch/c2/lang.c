/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lauxlib.h>
#include <lua.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>

#include <string.h>

/* pushes new closure table onto the stack, using closure table at
 * given index as its parent */
static void lc_newclosuretable(lua_State *L, int idx) {

  lua_newtable(L);
  lua_pushvalue(L, idx);
  lua_rawseti(L, -2, 0);
}

#include <assert.h>

/* __add metamethod handler.
 * warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static void lc_add(lua_State *L, int idxa, int idxb) {
  if (lua_isnumber(L, idxa) && lua_isnumber(L, idxb)) {
    lua_pushnumber(L, lua_tonumber(L, idxa) + lua_tonumber(L, idxb));
  } else {
    if (luaL_getmetafield(L, idxa, "__add") ||
        luaL_getmetafield(L, idxb, "__add")) {
      lua_pushvalue(L, idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa - 1 : idxa);
      lua_pushvalue(L, idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb - 2 : idxb);
      lua_call(L, 2, 1);
    } else {
      luaL_error(L, "attempt to perform arithmetic");
    }
  }
}

/* name: __TS__ArrayPush
 * function(arr, item) */
static int lcf1___TS__ArrayPush(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* arr[#arr+1] = item */
  lua_pushvalue(L, 2);
  const double lc2 = lua_objlen(L, 1);
  lua_pushnumber(L, lc2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_insert(L, -2);
  lua_settable(L, 1);
  assert(lua_gettop(L) == 2);

  /* return #arr */
  const double lc3 = lua_objlen(L, 1);
  lua_pushnumber(L, lc3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: ERROR
 * function() */
static int lcf1_ERROR(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* error("TheLanguage PANIC") */
  lua_getfield(L, LUA_ENVIRONINDEX, "error");
  lua_pushliteral(L, "TheLanguage PANIC");
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);
  return 0;
}

static void lc_setupvalue(lua_State *L, int tidx, int level, int varid) {
  if (level == 0) {
    lua_rawseti(L, tidx, varid);
  } else {
    lua_pushvalue(L, tidx);
    while (--level >= 0) {
      lua_rawgeti(L, tidx, 0); /* 0 links to parent table */
      lua_remove(L, -2);
      tidx = -1;
    }
    lua_insert(L, -2);
    lua_rawseti(L, -2, varid);
    lua_pop(L, 1);
  }
}

/* gets upvalue with ID varid by consulting upvalue table at index
 * tidx for the upvalue table at given nesting level. */
static void lc_getupvalue(lua_State *L, int tidx, int level, int varid) {
  if (level == 0) {
    lua_rawgeti(L, tidx, varid);
  } else {
    lua_pushvalue(L, tidx);
    while (--level >= 0) {
      lua_rawgeti(L, tidx, 0); /* 0 links to parent table */
      lua_remove(L, -2);
      tidx = -1;
    }
    lua_rawgeti(L, -1, varid);
    lua_remove(L, -2);
  }
}

/* name: ASSERT
 * function(x) */
static int lcf1_ASSERT(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if not x then */
  enum { lc5 = 1 };
  lua_pushboolean(L, !(lua_toboolean(L, 1)));
  const int lc6 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc6) {

    /* return ERROR() */
    const int lc7 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc7);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc5);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: symbol_p
 * function(x) */
static int lcf1_symbol_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == 0 */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lua_pushnumber(L, 0);
  const int lc8 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc8);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: un_symbol
 * function(x) */
static int lcf1_un_symbol(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: new_construction
 * function(x, y) */
static int lcf1_new_construction(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {construction_t, x, y} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 94);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: construction_p
 * function(x) */
static int lcf1_construction_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == construction_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 94);
  const int lc9 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc9);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: construction_head
 * function(x) */
static int lcf1_construction_head(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: construction_tail
 * function(x) */
static int lcf1_construction_tail(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: null_p
 * function(x) */
static int lcf1_null_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == null_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 93);
  const int lc10 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc10);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: new_data
 * function(x, y) */
static int lcf1_new_data(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {data_t, x, y} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 92);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: data_p
 * function(x) */
static int lcf1_data_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == data_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 92);
  const int lc11 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc11);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: data_name
 * function(x) */
static int lcf1_data_name(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: data_list
 * function(x) */
static int lcf1_data_list(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: new_error
 * function(x, y) */
static int lcf1_new_error(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {error_t, x, y} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 91);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: error_p
 * function(x) */
static int lcf1_error_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == error_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 91);
  const int lc12 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc12);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: error_name
 * function(x) */
static int lcf1_error_name(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: error_list
 * function(x) */
static int lcf1_error_list(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: lang_set_do
 * function(x, y) */
static int lcf1_lang_set_do(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* if x == y then */
  enum { lc13 = 2 };
  const int lc14 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc14);
  const int lc15 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc15) {

    /* return; */
    return 0;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc13);
  assert(lua_gettop(L) == 2);

  /* x[0 + 1] = just_t */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 90);
  lua_pushnumber(L, 1);
  lua_insert(L, -2);
  lua_settable(L, 1);
  assert(lua_gettop(L) == 2);

  /* x[1 + 1] = y */
  lua_pushvalue(L, 2);
  lua_pushnumber(L, 2);
  lua_insert(L, -2);
  lua_settable(L, 1);
  assert(lua_gettop(L) == 2);

  /* x[2 + 1] = false */
  lua_pushboolean(L, 0);
  lua_pushnumber(L, 3);
  lua_insert(L, -2);
  lua_settable(L, 1);
  assert(lua_gettop(L) == 2);

  /* x[3 + 1] = false */
  lua_pushboolean(L, 0);
  lua_pushnumber(L, 4);
  lua_insert(L, -2);
  lua_settable(L, 1);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* name: just_p
 * function(x) */
static int lcf1_just_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == just_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 90);
  const int lc16 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc16);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: un_just
 * function(x) */
static int lcf1_un_just(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: evaluate
 * function(x, y) */
static int lcf1_evaluate(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {delay_evaluate_t, x, y} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 89);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: delay_evaluate_p
 * function(x) */
static int lcf1_delay_evaluate_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == delay_evaluate_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 89);
  const int lc17 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc17);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_evaluate_env
 * function(x) */
static int lcf1_delay_evaluate_env(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_evaluate_x
 * function(x) */
static int lcf1_delay_evaluate_x(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: builtin_form_apply
 * function(x, y, z) */
static int lcf1_builtin_form_apply(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* return {delay_builtin_form_t, x, y, z} */
  lua_createtable(L, 4, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 87);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  lua_pushvalue(L, 3);
  lua_rawseti(L, -2, 4);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* name: delay_builtin_form_p
 * function(x) */
static int lcf1_delay_builtin_form_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == delay_builtin_form_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 87);
  const int lc18 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc18);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_builtin_form_env
 * function(x) */
static int lcf1_delay_builtin_form_env(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_builtin_form_f
 * function(x) */
static int lcf1_delay_builtin_form_f(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_builtin_form_xs
 * function(x) */
static int lcf1_delay_builtin_form_xs(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[3 + 1] */
  lua_pushnumber(L, 4);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: builtin_func_apply
 * function(x, y) */
static int lcf1_builtin_func_apply(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {delay_builtin_func_t, x, y} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 88);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: delay_builtin_func_p
 * function(x) */
static int lcf1_delay_builtin_func_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == delay_builtin_func_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 88);
  const int lc19 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc19);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_builtin_func_f
 * function(x) */
static int lcf1_delay_builtin_func_f(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_builtin_func_xs
 * function(x) */
static int lcf1_delay_builtin_func_xs(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: apply
 * function(f, xs) */
static int lcf1_apply(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return {delay_apply_t, f, xs} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 86);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: delay_apply_p
 * function(x) */
static int lcf1_delay_apply_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[0 + 1] == delay_apply_t */
  lua_pushnumber(L, 1);
  lua_gettable(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 86);
  const int lc20 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc20);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_apply_f
 * function(x) */
static int lcf1_delay_apply_f(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[1 + 1] */
  lua_pushnumber(L, 2);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: delay_apply_xs
 * function(x) */
static int lcf1_delay_apply_xs(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return x[2 + 1] */
  lua_pushnumber(L, 3);
  lua_gettable(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: force_all_rec
 * function(raw) */
static int lcf1_force_all_rec(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local x = force_all(raw) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 18);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 2);

  /* if data_p(x) then */
  enum { lc21 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  const int lc22 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc22) {

    /* local a = x[1 + 1] */
    lua_pushnumber(L, 2);
    lua_gettable(L, 2);
    assert(lua_gettop(L) == 3);

    /* local d = x[2 + 1] */
    lua_pushnumber(L, 3);
    lua_gettable(L, 2);
    assert(lua_gettop(L) == 4);

    /* x[1 + 1] = force_all_rec(a) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
    lua_pushvalue(L, 3);
    lua_call(L, 1, 1);
    lua_pushnumber(L, 2);
    lua_insert(L, -2);
    lua_settable(L, 2);
    assert(lua_gettop(L) == 4);

    /* x[2 + 1] = force_all_rec(d) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
    lua_pushvalue(L, 4);
    lua_call(L, 1, 1);
    lua_pushnumber(L, 3);
    lua_insert(L, -2);
    lua_settable(L, 2);
    assert(lua_gettop(L) == 4);

    /* return x */
    lua_pushvalue(L, 2);
    return 1;
    assert(lua_gettop(L) == 4);
  } else {

    /* elseif error_p(x) then */
    enum { lc23 = 2 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 72);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    const int lc24 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc24) {

      /* local a = x[1 + 1] */
      lua_pushnumber(L, 2);
      lua_gettable(L, 2);
      assert(lua_gettop(L) == 3);

      /* local d = x[2 + 1] */
      lua_pushnumber(L, 3);
      lua_gettable(L, 2);
      assert(lua_gettop(L) == 4);

      /* x[1 + 1] = force_all_rec(a) */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
      lua_pushvalue(L, 3);
      lua_call(L, 1, 1);
      lua_pushnumber(L, 2);
      lua_insert(L, -2);
      lua_settable(L, 2);
      assert(lua_gettop(L) == 4);

      /* x[2 + 1] = force_all_rec(d) */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
      lua_pushvalue(L, 4);
      lua_call(L, 1, 1);
      lua_pushnumber(L, 3);
      lua_insert(L, -2);
      lua_settable(L, 2);
      assert(lua_gettop(L) == 4);

      /* return x */
      lua_pushvalue(L, 2);
      return 1;
      assert(lua_gettop(L) == 4);
    } else {

      /* elseif construction_p(x) then */
      enum { lc25 = 2 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      const int lc26 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc26) {

        /* local a = x[1 + 1] */
        lua_pushnumber(L, 2);
        lua_gettable(L, 2);
        assert(lua_gettop(L) == 3);

        /* local d = x[2 + 1] */
        lua_pushnumber(L, 3);
        lua_gettable(L, 2);
        assert(lua_gettop(L) == 4);

        /* x[1 + 1] = force_all_rec(a) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        lua_pushnumber(L, 2);
        lua_insert(L, -2);
        lua_settable(L, 2);
        assert(lua_gettop(L) == 4);

        /* x[2 + 1] = force_all_rec(d) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 49);
        lua_pushvalue(L, 4);
        lua_call(L, 1, 1);
        lua_pushnumber(L, 3);
        lua_insert(L, -2);
        lua_settable(L, 2);
        assert(lua_gettop(L) == 4);

        /* return x */
        lua_pushvalue(L, 2);
        return 1;
        assert(lua_gettop(L) == 4);
      }
      lua_settop(L, lc25);
    }
    lua_settop(L, lc23);
  }
  lua_settop(L, lc21);
  assert(lua_gettop(L) == 2);

  /* return x */
  lua_pushvalue(L, 2);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: symbol_equal_p
 * function(x, y) */
static int lcf1_symbol_equal_p(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* if x == y then */
  enum { lc27 = 2 };
  const int lc28 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc28);
  const int lc29 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc29) {

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc27);
  assert(lua_gettop(L) == 2);

  /* if un_symbol(x) == un_symbol(y) then */
  enum { lc30 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 84);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 84);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  const int lc31 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc31);
  const int lc32 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc32) {

    /* lang_set_do(x, y) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
    lua_pushvalue(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 2);

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  } else {

    /* else
     * return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc30);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* __sub metamethod handler.
 * warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static void lc_sub(lua_State *L, int idxa, int idxb) {
  if (lua_isnumber(L, idxa) && lua_isnumber(L, idxb)) {
    lua_pushnumber(L, lua_tonumber(L, idxa) - lua_tonumber(L, idxb));
  } else {
    if (luaL_getmetafield(L, idxa, "__sub") ||
        luaL_getmetafield(L, idxb, "__sub")) {
      lua_pushvalue(L, idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa - 1 : idxa);
      lua_pushvalue(L, idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb - 2 : idxb);
      lua_call(L, 2, 1);
    } else {
      luaL_error(L, "attempt to perform arithmetic");
    }
  }
}

/* warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static int lc_le(lua_State *L, int idxa, int idxb) {
  if (lua_type(L, idxa) == LUA_TNUMBER && lua_type(L, idxb) == LUA_TNUMBER) {
    return lua_tonumber(L, idxa) <= lua_tonumber(L, idxb);
  } else if (lua_type(L, idxa) == LUA_TSTRING &&
             lua_type(L, idxb) == LUA_TSTRING) {
    /* result similar to lvm.c l_strcmp */
    return lua_lessthan(L, idxa, idxb) || lua_rawequal(L, idxa, idxb);
  } else if (luaL_getmetafield(L, idxa, "__le") ||
             luaL_getmetafield(L, idxb, "__le")) {
    lua_pushvalue(L, idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa - 1 : idxa);
    lua_pushvalue(L, idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb - 2 : idxb);
    lua_call(L, 2, 1);
    const int result = lua_toboolean(L, -1);
    lua_pop(L, 1);
    return result;
  } else if (luaL_getmetafield(L, idxa, "__lt") ||
             luaL_getmetafield(L, idxb, "__lt")) {
    lua_pushvalue(L, idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb - 1 : idxb);
    lua_pushvalue(L, idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa - 2 : idxa);
    lua_call(L, 2, 1);
    const int result = !lua_toboolean(L, -1);
    lua_pop(L, 1);
    return result;
  } else {
    return luaL_error(L, "attempt to compare");
  }
}

/* name: jsArray_to_list
 * function(xs) */
static int lcf1_jsArray_to_list(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local ret = null_v */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 79);
  assert(lua_gettop(L) == 2);

  /* do
   * local i = (#xs) - 1 */
  const double lc33 = lua_objlen(L, 1);
  lua_pushnumber(L, lc33);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  assert(lua_gettop(L) == 3);

  /* while i >= 0 do */
  enum { lc34 = 3 };
  while (1) {
    lua_pushnumber(L, 0);
    const int lc35 = lc_le(L, -1, 3);
    lua_pop(L, 1);
    lua_pushboolean(L, lc35);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* ret = new_construction(xs[i + 1], ret) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 83);
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 1);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* i = i - 1 */
    lua_pushnumber(L, 1);
    lc_sub(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc34);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* return ret */
  lua_pushvalue(L, 2);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: new_list
 * function(...) */
static int lcf1_new_list(lua_State *L) {
  enum { lc_nformalargs = 0 };
  const int lc_nactualargs = lua_gettop(L);
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);

  /* local xs = ({...}) */
  lua_createtable(L, 1, 0);
  const int lc36 = lua_gettop(L);
  {
    int i;
    for (i = lc_nformalargs + 1; i <= lc_nactualargs; i++) {
      lua_pushvalue(L, i);
    }
  }
  while ((lua_gettop(L) > lc36)) {
    lua_rawseti(L, lc36, (0 + (lua_gettop(L) - lc36)));
  }
  assert(lua_gettop(L) - lc_nextra == 1);

  /* return jsArray_to_list(xs) */
  const int lc37 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
  lua_pushvalue(L, (1 + lc_nextra));
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc37);
  assert(lua_gettop(L) - lc_nextra == 1);
}

/* name: un_just_all
 * function(raw) */
static int lcf1_un_just_all(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local x = raw */
  lua_pushvalue(L, 1);
  assert(lua_gettop(L) == 2);

  /* local xs = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 3);

  /* while just_p(x) do */
  enum { lc38 = 3 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 68);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* __TS__ArrayPush(xs, x) */
    lc_getupvalue(L, lua_upvalueindex(1), 1, 1);
    lua_pushvalue(L, 3);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* x = un_just(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 67);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc38);
  assert(lua_gettop(L) == 3);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 4);

  /* while i < (#xs) do */
  enum { lc39 = 4 };
  while (1) {
    const double lc40 = lua_objlen(L, 3);
    lua_pushnumber(L, lc40);
    const int lc41 = lua_lessthan(L, 4, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc41);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* lang_set_do(xs[i + 1], x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_gettable(L, 3);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 4);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_replace(L, 4);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc39);
  assert(lua_gettop(L) == 4);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 3);

  /* return x */
  lua_pushvalue(L, 2);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* name: any_delay_just_p
 * function(x) */
static int lcf1_any_delay_just_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return (((just_p(x) or delay_evaluate_p(x)) or delay_builtin_form_p(x)) or
   * delay_builtin_func_p(x)) or delay_apply_p(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 68);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 65);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 61);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 56);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 52);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
  }
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: do_rewrite
 * function(newval) */
static int lcf1_do_rewrite(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* lang_set_do(x, newval) */
  lc_getupvalue(L, lua_upvalueindex(1), 2, 69);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 102);
  lua_pushvalue(L, 1);
  lua_call(L, 2, 0);
  assert(lua_gettop(L) == 1);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 2);

  /* while i < (#xs) do */
  enum { lc53 = 2 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 1, 99);
    const double lc54 = lua_objlen(L, -1);
    lua_pop(L, 1);
    lua_pushnumber(L, lc54);
    const int lc55 = lua_lessthan(L, 2, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc55);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* lang_set_do(xs[i + 1], newval) */
    lc_getupvalue(L, lua_upvalueindex(1), 2, 69);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 99);
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushvalue(L, 1);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 2);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc53);
  assert(lua_gettop(L) == 2);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 1);

  /* return newval */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: do_rewrite_force_all
 * function(newval) */
static int lcf1_do_rewrite_force_all(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* do_rewrite(newval) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 101);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 1);

  /* if any_delay_just_p(newval) then */
  enum { lc56 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 2, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc57 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc57) {

    /* __TS__ArrayPush(xs, x) */
    lc_getupvalue(L, lua_upvalueindex(1), 3, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 99);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 102);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 1);

    /* return force_all(newval, {}, {false, false}, xs) */
    const int lc58 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 2, 18);
    lua_pushvalue(L, 1);
    lua_newtable(L);
    lua_createtable(L, 2, 0);
    lua_pushboolean(L, 0);
    lua_rawseti(L, -2, 1);
    lua_pushboolean(L, 0);
    lua_rawseti(L, -2, 2);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 99);
    lua_call(L, 4, LUA_MULTRET);
    return (lua_gettop(L) - lc58);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc56);
  assert(lua_gettop(L) == 1);

  /* return newval */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: replace_this_with_stopped
 * function() */
static int lcf1_replace_this_with_stopped(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* ref_novalue_replace[1 + 1] = true */
  lua_pushboolean(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 98);
  lua_insert(L, -2);
  lua_pushnumber(L, 2);
  lua_insert(L, -2);
  lua_settable(L, -3);
  lua_pop(L, 1);
  assert(lua_gettop(L) == 0);

  /* return do_rewrite_force_all(the_world_stopped_v) */
  const int lc60 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 100);
  lc_getupvalue(L, lua_upvalueindex(1), 3, 44);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc60);
  assert(lua_gettop(L) == 0);
}

/* name: make_history
 * function() */
static int lcf1_make_history(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* local ret = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 1);

  /* for x_id in pairs(history) do
   * internal: local f, s, var = explist */
  enum { lc61 = 1 };
  lua_getfield(L, LUA_ENVIRONINDEX, "pairs");
  lc_getupvalue(L, lua_upvalueindex(1), 0, 103);
  lua_call(L, 1, 3);
  while (1) {

    /* internal: local var_1, ..., var_n = f(s, var)
     *           if var_1 == nil then break end
     *           var = var_1 */
    lua_pushvalue(L, -3);
    lua_pushvalue(L, -3);
    lua_pushvalue(L, -3);
    lua_call(L, 2, 1);
    if (lua_isnil(L, -1)) {
      break;
    }
    lua_pushvalue(L, -1);
    lua_replace(L, -3);

    /* internal: local x_id with idx 5 */

    /* ret[x_id] = true */
    lua_pushboolean(L, 1);
    lua_pushvalue(L, 5);
    lua_insert(L, -2);
    lua_settable(L, 1);
    assert(lua_gettop(L) == 5);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc61);
  assert(lua_gettop(L) == 1);

  /* for x_id in pairs(parents_history) do
   * internal: local f, s, var = explist */
  enum { lc62 = 1 };
  lua_getfield(L, LUA_ENVIRONINDEX, "pairs");
  lc_getupvalue(L, lua_upvalueindex(1), 2, 97);
  lua_call(L, 1, 3);
  while (1) {

    /* internal: local var_1, ..., var_n = f(s, var)
     *           if var_1 == nil then break end
     *           var = var_1 */
    lua_pushvalue(L, -3);
    lua_pushvalue(L, -3);
    lua_pushvalue(L, -3);
    lua_call(L, 2, 1);
    if (lua_isnil(L, -1)) {
      break;
    }
    lua_pushvalue(L, -1);
    lua_replace(L, -3);

    /* internal: local x_id with idx 5 */

    /* ret[x_id] = true */
    lua_pushboolean(L, 1);
    lua_pushvalue(L, 5);
    lua_insert(L, -2);
    lua_settable(L, 1);
    assert(lua_gettop(L) == 5);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc62);
  assert(lua_gettop(L) == 1);

  /* return ret */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: force_all
 * function(raw, parents_history, ref_novalue_replace, xs) */
static int lcf1_force_all(lua_State *L) {
  lua_checkstack(L, 25);
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc42 = 5 };
  assert((lua_gettop(L) == lc42));
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 97);
  lua_pushvalue(L, 3);
  lua_rawseti(L, -2, 98);
  lua_pushvalue(L, 4);
  lua_rawseti(L, -2, 99);

  /* if parents_history == nil then */
  enum { lc43 = 5 };
  lc_getupvalue(L, lc42, 0, 97);
  lua_pushnil(L);
  const int lc44 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc44);
  const int lc45 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc45) {

    /* parents_history = {} */
    lua_newtable(L);
    lc_setupvalue(L, lc42, 0, 97);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc43);
  assert(lua_gettop(L) == 5);

  /* if ref_novalue_replace == nil then */
  enum { lc46 = 5 };
  lc_getupvalue(L, lc42, 0, 98);
  lua_pushnil(L);
  const int lc47 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc47);
  const int lc48 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc48) {

    /* ref_novalue_replace = {false, false} */
    lua_createtable(L, 2, 0);
    lua_pushboolean(L, 0);
    lua_rawseti(L, -2, 1);
    lua_pushboolean(L, 0);
    lua_rawseti(L, -2, 2);
    lc_setupvalue(L, lc42, 0, 98);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc46);
  assert(lua_gettop(L) == 5);

  /* if xs == nil then */
  enum { lc49 = 5 };
  lc_getupvalue(L, lc42, 0, 99);
  lua_pushnil(L);
  const int lc50 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc50);
  const int lc51 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc51) {

    /* xs = {} */
    lua_newtable(L);
    lc_setupvalue(L, lc42, 0, 99);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc49);
  assert(lua_gettop(L) == 5);

  /* local x, do_rewrite, do_rewrite_force_all */
  lc_newclosuretable(L, lc42);
  enum { lc52 = 6 };
  assert((lua_gettop(L) == lc52));
  lua_settop(L, (lua_gettop(L) + 3));
  lua_rawseti(L, lc52, 100);
  lua_rawseti(L, lc52, 101);
  lua_rawseti(L, lc52, 102);
  assert(lua_gettop(L) == 6);

  /* do_rewrite = function(newval)
   *         lang_set_do(x, newval);
   *         do
   *             local i = 0;
   *             while i < (#xs) do
   *                 lang_set_do(xs[i + 1], newval);
   *                 i = i + 1;
   *             end
   *         end
   *         return newval;
   *     end */
  lua_pushvalue(L, lc52);
  lua_pushcclosure(L, lcf1_do_rewrite, 1);
  lc_setupvalue(L, lc52, 0, 101);
  assert(lua_gettop(L) == 6);

  /* do_rewrite_force_all = function(newval)
   *         do_rewrite(newval);
   *         if any_delay_just_p(newval) then
   *             __TS__ArrayPush(xs, x);
   *             return force_all(newval, {}, {false, false}, xs);
   *         end
   *         return newval;
   *     end */
  lua_pushvalue(L, lc52);
  lua_pushcclosure(L, lcf1_do_rewrite_force_all, 1);
  lc_setupvalue(L, lc52, 0, 100);
  assert(lua_gettop(L) == 6);

  /* local history = {} */
  lc_newclosuretable(L, lc52);
  enum { lc59 = 7 };
  assert((lua_gettop(L) == lc59));
  lua_newtable(L);
  lua_rawseti(L, lc59, 103);
  assert(lua_gettop(L) == 7);

  /* x = raw */
  lua_pushvalue(L, 1);
  lc_setupvalue(L, lc59, 1, 102);
  assert(lua_gettop(L) == 7);

  /* local replace_this_with_stopped */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 8);

  /* replace_this_with_stopped = function()
   *         ref_novalue_replace[1 + 1] = true;
   *         return do_rewrite_force_all(the_world_stopped_v);
   *     end */
  lua_pushvalue(L, lc59);
  lua_pushcclosure(L, lcf1_replace_this_with_stopped, 1);
  lua_replace(L, 8);
  assert(lua_gettop(L) == 8);

  /* local make_history */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 9);

  /* make_history = function()
   *         local ret = {};
   *         for x_id in pairs(history) do
   *             ret[x_id] = true;
   *         end
   *         for x_id in pairs(parents_history) do
   *             ret[x_id] = true;
   *         end
   *         return ret;
   *     end */
  lua_pushvalue(L, lc59);
  lua_pushcclosure(L, lcf1_make_history, 1);
  lua_replace(L, 9);
  assert(lua_gettop(L) == 9);

  /* while any_delay_just_p(x) do */
  enum { lc63 = 9 };
  while (1) {
    lc_getupvalue(L, lc59, 3, 19);
    lc_getupvalue(L, lc59, 1, 102);
    lua_call(L, 1, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* local x_id = simple_print(x) */
    lc_getupvalue(L, lc59, 3, 2);
    lc_getupvalue(L, lc59, 1, 102);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 10);

    /* if parents_history[x_id] == true then */
    enum { lc64 = 10 };
    lc_getupvalue(L, lc59, 2, 97);
    lua_pushvalue(L, 10);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushboolean(L, 1);
    const int lc65 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc65);
    const int lc66 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc66) {

      /* return replace_this_with_stopped() */
      const int lc67 = lua_gettop(L);
      lua_pushvalue(L, 8);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc67);
      assert(lua_gettop(L) == 10);
    }
    lua_settop(L, lc64);
    assert(lua_gettop(L) == 10);

    /* if history[x_id] == true then */
    enum { lc68 = 10 };
    lc_getupvalue(L, lc59, 0, 103);
    lua_pushvalue(L, 10);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushboolean(L, 1);
    const int lc69 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc69);
    const int lc70 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc70) {

      /* ref_novalue_replace[0 + 1] = true */
      lua_pushboolean(L, 1);
      lc_getupvalue(L, lc59, 2, 98);
      lua_insert(L, -2);
      lua_pushnumber(L, 1);
      lua_insert(L, -2);
      lua_settable(L, -3);
      lua_pop(L, 1);
      assert(lua_gettop(L) == 10);

      /* if delay_evaluate_p(x) then */
      enum { lc71 = 10 };
      lc_getupvalue(L, lc59, 3, 65);
      lc_getupvalue(L, lc59, 1, 102);
      lua_call(L, 1, 1);
      const int lc72 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc72) {

        /* return replace_this_with_stopped() */
        const int lc73 = lua_gettop(L);
        lua_pushvalue(L, 8);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc73);
        assert(lua_gettop(L) == 10);
      } else {

        /* elseif delay_builtin_func_p(x) then */
        enum { lc74 = 10 };
        lc_getupvalue(L, lc59, 3, 56);
        lc_getupvalue(L, lc59, 1, 102);
        lua_call(L, 1, 1);
        const int lc75 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc75) {

          /* local f = delay_builtin_func_f(x) */
          lc_getupvalue(L, lc59, 3, 55);
          lc_getupvalue(L, lc59, 1, 102);
          lua_call(L, 1, 1);
          assert(lua_gettop(L) == 11);

          /* local xs = delay_builtin_func_xs(x) */
          lc_getupvalue(L, lc59, 3, 54);
          lc_getupvalue(L, lc59, 1, 102);
          lua_call(L, 1, 1);
          assert(lua_gettop(L) == 12);

          /* local elim_s = {data_name_function_builtin_systemName,
           * data_list_function_builtin_systemName,
           * data_p_function_builtin_systemName,
           * error_name_function_builtin_systemName,
           * error_list_function_builtin_systemName,
           * error_p_function_builtin_systemName,
           * construction_p_function_builtin_systemName,
           * construction_head_function_builtin_systemName,
           * construction_tail_function_builtin_systemName,
           * symbol_p_function_builtin_systemName,
           * null_p_function_builtin_systemName} */
          lua_createtable(L, 11, 0);
          lc_getupvalue(L, lc59, 3, 43);
          lua_rawseti(L, -2, 1);
          lc_getupvalue(L, lc59, 3, 42);
          lua_rawseti(L, -2, 2);
          lc_getupvalue(L, lc59, 3, 41);
          lua_rawseti(L, -2, 3);
          lc_getupvalue(L, lc59, 3, 40);
          lua_rawseti(L, -2, 4);
          lc_getupvalue(L, lc59, 3, 39);
          lua_rawseti(L, -2, 5);
          lc_getupvalue(L, lc59, 3, 38);
          lua_rawseti(L, -2, 6);
          lc_getupvalue(L, lc59, 3, 37);
          lua_rawseti(L, -2, 7);
          lc_getupvalue(L, lc59, 3, 36);
          lua_rawseti(L, -2, 8);
          lc_getupvalue(L, lc59, 3, 35);
          lua_rawseti(L, -2, 9);
          lc_getupvalue(L, lc59, 3, 34);
          lua_rawseti(L, -2, 10);
          lc_getupvalue(L, lc59, 3, 33);
          lua_rawseti(L, -2, 11);
          assert(lua_gettop(L) == 13);

          /* local is_elim = false */
          lua_pushboolean(L, 0);
          assert(lua_gettop(L) == 14);

          /* do
           * local i = 0 */
          lua_pushnumber(L, 0);
          assert(lua_gettop(L) == 15);

          /* while i < (#elim_s) do */
          enum { lc76 = 15 };
          while (1) {
            const double lc77 = lua_objlen(L, 13);
            lua_pushnumber(L, lc77);
            const int lc78 = lua_lessthan(L, 15, -1);
            lua_pop(L, 1);
            lua_pushboolean(L, lc78);
            if (!(lua_toboolean(L, -1))) {
              break;
            }
            lua_pop(L, 1);

            /* if jsbool_equal_p(elim_s[i + 1], f) then */
            enum { lc79 = 15 };
            lc_getupvalue(L, lc59, 3, 3);
            lua_pushnumber(L, 1);
            lc_add(L, 15, -1);
            lua_remove(L, -2);
            lua_gettable(L, 13);
            lua_pushvalue(L, 11);
            lua_call(L, 2, 1);
            const int lc80 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc80) {

              /* is_elim = true */
              lua_pushboolean(L, 1);
              lua_replace(L, 14);
              assert(lua_gettop(L) == 15);
            }
            lua_settop(L, lc79);
            assert(lua_gettop(L) == 15);

            /* i = i + 1 */
            lua_pushnumber(L, 1);
            lc_add(L, 15, -1);
            lua_remove(L, -2);
            lua_replace(L, 15);
            assert(lua_gettop(L) == 15);
          }
          lua_settop(L, lc76);
          assert(lua_gettop(L) == 15);

          /* internal: stack cleanup on scope exit */
          lua_pop(L, 1);
          assert(lua_gettop(L) == 14);

          /* if is_elim then */
          enum { lc81 = 14 };
          if (lua_toboolean(L, 14)) {

            /* ASSERT((#xs) == 1) */
            lc_getupvalue(L, lc59, 3, 95);
            const double lc82 = lua_objlen(L, 12);
            lua_pushnumber(L, lc82);
            lua_pushnumber(L, 1);
            const int lc83 = lua_equal(L, -2, -1);
            lua_pop(L, 2);
            lua_pushboolean(L, lc83);
            lua_call(L, 1, 0);
            assert(lua_gettop(L) == 14);

            /* ASSERT(ref_novalue_replace[1 + 1] == false) */
            lc_getupvalue(L, lc59, 3, 95);
            lc_getupvalue(L, lc59, 2, 98);
            lua_pushnumber(L, 2);
            lua_gettable(L, -2);
            lua_remove(L, -2);
            lua_pushboolean(L, 0);
            const int lc84 = lua_equal(L, -2, -1);
            lua_pop(L, 2);
            lua_pushboolean(L, lc84);
            lua_call(L, 1, 0);
            assert(lua_gettop(L) == 14);

            /* local inner = force_all(xs[0 + 1], make_history(),
             * ref_novalue_replace) */
            lc_getupvalue(L, lc59, 3, 18);
            lua_pushnumber(L, 1);
            lua_gettable(L, 12);
            lua_pushvalue(L, 9);
            lua_call(L, 0, 1);
            lc_getupvalue(L, lc59, 2, 98);
            lua_call(L, 3, 1);
            assert(lua_gettop(L) == 15);

            /* if ref_novalue_replace[1 + 1] then */
            enum { lc85 = 15 };
            lc_getupvalue(L, lc59, 2, 98);
            lua_pushnumber(L, 2);
            lua_gettable(L, -2);
            lua_remove(L, -2);
            const int lc86 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc86) {

              /* return do_rewrite_force_all(builtin_func_apply(f, {inner})) */
              const int lc87 = lua_gettop(L);
              lc_getupvalue(L, lc59, 1, 100);
              const int lc88 = lua_gettop(L);
              lc_getupvalue(L, lc59, 3, 57);
              lua_pushvalue(L, 11);
              lua_createtable(L, 1, 0);
              lua_pushvalue(L, 15);
              lua_rawseti(L, -2, 1);
              lua_call(L, 2, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc88), LUA_MULTRET);
              return (lua_gettop(L) - lc87);
              assert(lua_gettop(L) == 15);
            } else {

              /* else
               * return ERROR() */
              const int lc89 = lua_gettop(L);
              lc_getupvalue(L, lc59, 3, 96);
              lua_call(L, 0, LUA_MULTRET);
              return (lua_gettop(L) - lc89);
              assert(lua_gettop(L) == 15);
            }
            lua_settop(L, lc85);
            assert(lua_gettop(L) == 15);
          }
          lua_settop(L, lc81);
          assert(lua_gettop(L) == 14);

          /* if jsbool_equal_p(f, equal_p_function_builtin_systemName) then */
          enum { lc90 = 14 };
          lc_getupvalue(L, lc59, 3, 3);
          lua_pushvalue(L, 11);
          lc_getupvalue(L, lc59, 3, 32);
          lua_call(L, 2, 1);
          const int lc91 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc91) {

            /* return replace_this_with_stopped() */
            const int lc92 = lua_gettop(L);
            lua_pushvalue(L, 8);
            lua_call(L, 0, LUA_MULTRET);
            return (lua_gettop(L) - lc92);
            assert(lua_gettop(L) == 14);
          } else {

            /* elseif jsbool_equal_p(f, apply_function_builtin_systemName) then
             */
            enum { lc93 = 14 };
            lc_getupvalue(L, lc59, 3, 3);
            lua_pushvalue(L, 11);
            lc_getupvalue(L, lc59, 3, 31);
            lua_call(L, 2, 1);
            const int lc94 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc94) {

              /* return replace_this_with_stopped() */
              const int lc95 = lua_gettop(L);
              lua_pushvalue(L, 8);
              lua_call(L, 0, LUA_MULTRET);
              return (lua_gettop(L) - lc95);
              assert(lua_gettop(L) == 14);
            } else {

              /* elseif jsbool_equal_p(f, evaluate_function_builtin_systemName)
               * then */
              enum { lc96 = 14 };
              lc_getupvalue(L, lc59, 3, 3);
              lua_pushvalue(L, 11);
              lc_getupvalue(L, lc59, 3, 30);
              lua_call(L, 2, 1);
              const int lc97 = lua_toboolean(L, -1);
              lua_pop(L, 1);
              if (lc97) {

                /* return replace_this_with_stopped() */
                const int lc98 = lua_gettop(L);
                lua_pushvalue(L, 8);
                lua_call(L, 0, LUA_MULTRET);
                return (lua_gettop(L) - lc98);
                assert(lua_gettop(L) == 14);
              } else {

                /* elseif jsbool_equal_p(f, if_function_builtin_systemName) then
                 */
                enum { lc99 = 14 };
                lc_getupvalue(L, lc59, 3, 3);
                lua_pushvalue(L, 11);
                lc_getupvalue(L, lc59, 3, 29);
                lua_call(L, 2, 1);
                const int lc100 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc100) {

                  /* ASSERT((#xs) == 3) */
                  lc_getupvalue(L, lc59, 3, 95);
                  const double lc101 = lua_objlen(L, 12);
                  lua_pushnumber(L, lc101);
                  lua_pushnumber(L, 3);
                  const int lc102 = lua_equal(L, -2, -1);
                  lua_pop(L, 2);
                  lua_pushboolean(L, lc102);
                  lua_call(L, 1, 0);
                  assert(lua_gettop(L) == 14);

                  /* ASSERT(ref_novalue_replace[1 + 1] == false) */
                  lc_getupvalue(L, lc59, 3, 95);
                  lc_getupvalue(L, lc59, 2, 98);
                  lua_pushnumber(L, 2);
                  lua_gettable(L, -2);
                  lua_remove(L, -2);
                  lua_pushboolean(L, 0);
                  const int lc103 = lua_equal(L, -2, -1);
                  lua_pop(L, 2);
                  lua_pushboolean(L, lc103);
                  lua_call(L, 1, 0);
                  assert(lua_gettop(L) == 14);

                  /* local tf = force_all(xs[0 + 1], make_history(),
                   * ref_novalue_replace) */
                  lc_getupvalue(L, lc59, 3, 18);
                  lua_pushnumber(L, 1);
                  lua_gettable(L, 12);
                  lua_pushvalue(L, 9);
                  lua_call(L, 0, 1);
                  lc_getupvalue(L, lc59, 2, 98);
                  lua_call(L, 3, 1);
                  assert(lua_gettop(L) == 15);

                  /* if ref_novalue_replace[1 + 1] then */
                  enum { lc104 = 15 };
                  lc_getupvalue(L, lc59, 2, 98);
                  lua_pushnumber(L, 2);
                  lua_gettable(L, -2);
                  lua_remove(L, -2);
                  const int lc105 = lua_toboolean(L, -1);
                  lua_pop(L, 1);
                  if (lc105) {

                    /* return
                     * do_rewrite_force_all(builtin_func_apply(if_function_builtin_systemName,
                     * {tf, xs[1 + 1], xs[2 + 1]})) */
                    const int lc106 = lua_gettop(L);
                    lc_getupvalue(L, lc59, 1, 100);
                    const int lc107 = lua_gettop(L);
                    lc_getupvalue(L, lc59, 3, 57);
                    lc_getupvalue(L, lc59, 3, 29);
                    lua_createtable(L, 3, 0);
                    lua_pushvalue(L, 15);
                    lua_rawseti(L, -2, 1);
                    lua_pushnumber(L, 2);
                    lua_gettable(L, 12);
                    lua_rawseti(L, -2, 2);
                    lua_pushnumber(L, 3);
                    lua_gettable(L, 12);
                    lua_rawseti(L, -2, 3);
                    lua_call(L, 2, LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc107), LUA_MULTRET);
                    return (lua_gettop(L) - lc106);
                    assert(lua_gettop(L) == 15);
                  } else {

                    /* else
                     * return ERROR() */
                    const int lc108 = lua_gettop(L);
                    lc_getupvalue(L, lc59, 3, 96);
                    lua_call(L, 0, LUA_MULTRET);
                    return (lua_gettop(L) - lc108);
                    assert(lua_gettop(L) == 15);
                  }
                  lua_settop(L, lc104);
                  assert(lua_gettop(L) == 15);
                }
                lua_settop(L, lc99);
              }
              lua_settop(L, lc96);
            }
            lua_settop(L, lc93);
          }
          lua_settop(L, lc90);
          assert(lua_gettop(L) == 14);

          /* return ERROR() */
          const int lc109 = lua_gettop(L);
          lc_getupvalue(L, lc59, 3, 96);
          lua_call(L, 0, LUA_MULTRET);
          return (lua_gettop(L) - lc109);
          assert(lua_gettop(L) == 14);
        } else {

          /* elseif delay_builtin_form_p(x) then */
          enum { lc110 = 10 };
          lc_getupvalue(L, lc59, 3, 61);
          lc_getupvalue(L, lc59, 1, 102);
          lua_call(L, 1, 1);
          const int lc111 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc111) {

            /* return replace_this_with_stopped() */
            const int lc112 = lua_gettop(L);
            lua_pushvalue(L, 8);
            lua_call(L, 0, LUA_MULTRET);
            return (lua_gettop(L) - lc112);
            assert(lua_gettop(L) == 10);
          } else {

            /* elseif delay_apply_p(x) then */
            enum { lc113 = 10 };
            lc_getupvalue(L, lc59, 3, 52);
            lc_getupvalue(L, lc59, 1, 102);
            lua_call(L, 1, 1);
            const int lc114 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc114) {

              /* return replace_this_with_stopped() */
              const int lc115 = lua_gettop(L);
              lua_pushvalue(L, 8);
              lua_call(L, 0, LUA_MULTRET);
              return (lua_gettop(L) - lc115);
              assert(lua_gettop(L) == 10);
            }
            lua_settop(L, lc113);
          }
          lua_settop(L, lc110);
        }
        lua_settop(L, lc74);
      }
      lua_settop(L, lc71);
      assert(lua_gettop(L) == 10);

      /* return ERROR() */
      const int lc116 = lua_gettop(L);
      lc_getupvalue(L, lc59, 3, 96);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc116);
      assert(lua_gettop(L) == 10);
    }
    lua_settop(L, lc68);
    assert(lua_gettop(L) == 10);

    /* history[x_id] = true */
    lua_pushboolean(L, 1);
    lc_getupvalue(L, lc59, 0, 103);
    lua_insert(L, -2);
    lua_pushvalue(L, 10);
    lua_insert(L, -2);
    lua_settable(L, -3);
    lua_pop(L, 1);
    assert(lua_gettop(L) == 10);

    /* __TS__ArrayPush(xs, x) */
    lc_getupvalue(L, lc59, 4, 1);
    lc_getupvalue(L, lc59, 2, 99);
    lc_getupvalue(L, lc59, 1, 102);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 10);

    /* x = force1(x) */
    lc_getupvalue(L, lc59, 3, 17);
    lc_getupvalue(L, lc59, 1, 102);
    lua_call(L, 1, 1);
    lc_setupvalue(L, lc59, 1, 102);
    assert(lua_gettop(L) == 10);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc63);
  assert(lua_gettop(L) == 9);

  /* return do_rewrite(x) */
  const int lc117 = lua_gettop(L);
  lc_getupvalue(L, lc59, 1, 101);
  lc_getupvalue(L, lc59, 1, 102);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc117);
  assert(lua_gettop(L) == 9);
}

/* name: force1
 * function(raw) */
static int lcf1_force1(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local x = un_just_all(raw) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 20);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 2);

  /* local ret */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);

  /* ASSERT(not just_p(x)) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 95);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 68);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 3);

  /* if delay_evaluate_p(x) then */
  enum { lc118 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 65);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  const int lc119 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc119) {

    /* ret = real_evaluate(delay_evaluate_env(x), delay_evaluate_x(x)) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 10);
    const int lc120 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 64);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 63);
    lua_pushvalue(L, 2);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc120), 1);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  } else {

    /* elseif delay_builtin_form_p(x) then */
    enum { lc121 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 61);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    const int lc122 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc122) {

      /* ret = real_builtin_form_apply(delay_builtin_form_env(x),
       * delay_builtin_form_f(x), delay_builtin_form_xs(x)) */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 5);
      const int lc123 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 60);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 59);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 58);
      lua_pushvalue(L, 2);
      lua_call(L, 1, LUA_MULTRET);
      lua_call(L, (lua_gettop(L) - lc123), 1);
      lua_replace(L, 3);
      assert(lua_gettop(L) == 3);
    } else {

      /* elseif delay_builtin_func_p(x) then */
      enum { lc124 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 56);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      const int lc125 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc125) {

        /* ret = real_builtin_func_apply(delay_builtin_func_f(x),
         * delay_builtin_func_xs(x)) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 6);
        const int lc126 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 55);
        lua_pushvalue(L, 2);
        lua_call(L, 1, 1);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 54);
        lua_pushvalue(L, 2);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc126), 1);
        lua_replace(L, 3);
        assert(lua_gettop(L) == 3);
      } else {

        /* elseif delay_apply_p(x) then */
        enum { lc127 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 52);
        lua_pushvalue(L, 2);
        lua_call(L, 1, 1);
        const int lc128 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc128) {

          /* ret = real_apply(delay_apply_f(x), delay_apply_xs(x)) */
          lc_getupvalue(L, lua_upvalueindex(1), 0, 7);
          const int lc129 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 51);
          lua_pushvalue(L, 2);
          lua_call(L, 1, 1);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 50);
          lua_pushvalue(L, 2);
          lua_call(L, 1, LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc129), 1);
          lua_replace(L, 3);
          assert(lua_gettop(L) == 3);
        } else {

          /* else
           * ret = x */
          lua_pushvalue(L, 2);
          lua_replace(L, 3);
          assert(lua_gettop(L) == 3);
        }
        lua_settop(L, lc127);
      }
      lua_settop(L, lc124);
    }
    lua_settop(L, lc121);
  }
  lua_settop(L, lc118);
  assert(lua_gettop(L) == 3);

  /* ret = un_just_all(ret) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 20);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  lua_replace(L, 3);
  assert(lua_gettop(L) == 3);

  /* lang_set_do(x, ret) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
  lua_pushvalue(L, 2);
  lua_pushvalue(L, 3);
  lua_call(L, 2, 0);
  assert(lua_gettop(L) == 3);

  /* return ret */
  lua_pushvalue(L, 3);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* name: env_set
 * function(env, key, val) */
static int lcf1_env_set(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local ret = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 4);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 5);

  /* while i < (#env) do */
  enum { lc130 = 5 };
  while (1) {
    const double lc131 = lua_objlen(L, 1);
    lua_pushnumber(L, lc131);
    const int lc132 = lua_lessthan(L, 5, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc132);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if jsbool_equal_p(env[(i + 0) + 1], key) then */
    enum { lc133 = 5 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushnumber(L, 0);
    lc_add(L, 5, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 1);
    const int lc134 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc134) {

      /* ret[(i + 0) + 1] = key */
      lua_pushvalue(L, 2);
      lua_pushnumber(L, 0);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_insert(L, -2);
      lua_settable(L, 4);
      assert(lua_gettop(L) == 5);

      /* ret[(i + 1) + 1] = val */
      lua_pushvalue(L, 3);
      lua_pushnumber(L, 1);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_insert(L, -2);
      lua_settable(L, 4);
      assert(lua_gettop(L) == 5);

      /* do
       * i = i + 2 */
      lua_pushnumber(L, 2);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_replace(L, 5);
      assert(lua_gettop(L) == 5);

      /* while i < (#env) do */
      enum { lc135 = 5 };
      while (1) {
        const double lc136 = lua_objlen(L, 1);
        lua_pushnumber(L, lc136);
        const int lc137 = lua_lessthan(L, 5, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc137);
        if (!(lua_toboolean(L, -1))) {
          break;
        }
        lua_pop(L, 1);

        /* ret[(i + 0) + 1] = env[(i + 0) + 1] */
        lua_pushnumber(L, 0);
        lc_add(L, 5, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_gettable(L, 1);
        lua_pushnumber(L, 0);
        lc_add(L, 5, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_insert(L, -2);
        lua_settable(L, 4);
        assert(lua_gettop(L) == 5);

        /* ret[(i + 1) + 1] = env[(i + 1) + 1] */
        lua_pushnumber(L, 1);
        lc_add(L, 5, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_gettable(L, 1);
        lua_pushnumber(L, 1);
        lc_add(L, 5, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_insert(L, -2);
        lua_settable(L, 4);
        assert(lua_gettop(L) == 5);

        /* i = i + 2 */
        lua_pushnumber(L, 2);
        lc_add(L, 5, -1);
        lua_remove(L, -2);
        lua_replace(L, 5);
        assert(lua_gettop(L) == 5);
      }
      lua_settop(L, lc135);
      assert(lua_gettop(L) == 5);
      assert(lua_gettop(L) == 5);

      /* return ret */
      lua_pushvalue(L, 4);
      return 1;
      assert(lua_gettop(L) == 5);
    } else {

      /* else
       * ret[(i + 0) + 1] = env[(i + 0) + 1] */
      lua_pushnumber(L, 0);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_gettable(L, 1);
      lua_pushnumber(L, 0);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_insert(L, -2);
      lua_settable(L, 4);
      assert(lua_gettop(L) == 5);

      /* ret[(i + 1) + 1] = env[(i + 1) + 1] */
      lua_pushnumber(L, 1);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_gettable(L, 1);
      lua_pushnumber(L, 1);
      lc_add(L, 5, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_insert(L, -2);
      lua_settable(L, 4);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc133);
    assert(lua_gettop(L) == 5);

    /* i = i + 2 */
    lua_pushnumber(L, 2);
    lc_add(L, 5, -1);
    lua_remove(L, -2);
    lua_replace(L, 5);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc130);
  assert(lua_gettop(L) == 5);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 4);

  /* ret[((#env) + 0) + 1] = key */
  lua_pushvalue(L, 2);
  const double lc138 = lua_objlen(L, 1);
  lua_pushnumber(L, lc138);
  lua_pushnumber(L, 0);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_insert(L, -2);
  lua_settable(L, 4);
  assert(lua_gettop(L) == 4);

  /* ret[((#env) + 1) + 1] = val */
  lua_pushvalue(L, 3);
  const double lc139 = lua_objlen(L, 1);
  lua_pushnumber(L, lc139);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_insert(L, -2);
  lua_settable(L, 4);
  assert(lua_gettop(L) == 4);

  /* return ret */
  lua_pushvalue(L, 4);
  return 1;
  assert(lua_gettop(L) == 4);
}

/* name: env_get
 * function(env, key, default_v) */
static int lcf1_env_get(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 4);

  /* while i < (#env) do */
  enum { lc140 = 4 };
  while (1) {
    const double lc141 = lua_objlen(L, 1);
    lua_pushnumber(L, lc141);
    const int lc142 = lua_lessthan(L, 4, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc142);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if jsbool_equal_p(env[(i + 0) + 1], key) then */
    enum { lc143 = 4 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushnumber(L, 0);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 1);
    const int lc144 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc144) {

      /* return env[(i + 1) + 1] */
      lua_pushnumber(L, 1);
      lc_add(L, 4, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_gettable(L, 1);
      return 1;
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L, lc143);
    assert(lua_gettop(L) == 4);

    /* i = i + 2 */
    lua_pushnumber(L, 2);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_replace(L, 4);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc140);
  assert(lua_gettop(L) == 4);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 3);

  /* return default_v */
  lua_pushvalue(L, 3);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* name: must_env_get
 * function(env, key) */
static int lcf1_must_env_get(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#env) do */
  enum { lc145 = 3 };
  while (1) {
    const double lc146 = lua_objlen(L, 1);
    lua_pushnumber(L, lc146);
    const int lc147 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc147);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if jsbool_equal_p(env[(i + 0) + 1], key) then */
    enum { lc148 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushnumber(L, 0);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 1);
    const int lc149 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc149) {

      /* return env[(i + 1) + 1] */
      lua_pushnumber(L, 1);
      lc_add(L, 3, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_gettable(L, 1);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc148);
    assert(lua_gettop(L) == 3);

    /* i = i + 2 */
    lua_pushnumber(L, 2);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc145);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* return ERROR() */
  const int lc150 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc150);
  assert(lua_gettop(L) == 2);
}

/* name: env2val
 * function(env) */
static int lcf1_env2val(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local ret = null_v */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 79);
  assert(lua_gettop(L) == 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#env) do */
  enum { lc151 = 3 };
  while (1) {
    const double lc152 = lua_objlen(L, 1);
    lua_pushnumber(L, lc152);
    const int lc153 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc153);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* ret = new_construction(new_list(env[(i + 0) + 1], env[(i + 1) + 1]), ret)
     */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 83);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
    lua_pushnumber(L, 0);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_call(L, 2, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 1);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* i = i + 2 */
    lua_pushnumber(L, 2);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc151);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* return new_data(mapping_symbol, new_list(ret)) */
  const int lc154 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 77);
  const int lc155 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 45);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc155), LUA_MULTRET);
  return (lua_gettop(L) - lc154);
  assert(lua_gettop(L) == 2);
}

/* name: env_foreach
 * function(env, f) */
static int lcf1_env_foreach(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#env) do */
  enum { lc156 = 3 };
  while (1) {
    const double lc157 = lua_objlen(L, 1);
    lua_pushnumber(L, lc157);
    const int lc158 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc158);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* f(env[(i + 0) + 1], env[(i + 1) + 1]) */
    lua_pushvalue(L, 2);
    lua_pushnumber(L, 0);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lc_add(L, -2, -1);
    lua_remove(L, -2);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* i = i + 2 */
    lua_pushnumber(L, 2);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc156);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* name: real_evaluate
 * function(env, raw) */
static int lcf1_real_evaluate(lua_State *L) {
  lua_checkstack(L, 23);
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local x = force1(raw) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 17);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if any_delay_just_p(x) then */
  enum { lc159 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 19);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  const int lc160 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc160) {

    /* return evaluate(env, x) */
    const int lc161 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
    lua_pushvalue(L, 1);
    lua_pushvalue(L, 3);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc161);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc159);
  assert(lua_gettop(L) == 3);

  /* local error_v = new_error(system_symbol,
   * new_list(function_builtin_use_systemName,
   * new_list(evaluate_function_builtin_systemName, new_list(env2val(env), x))))
   */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 73);
  const int lc162 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 48);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc163 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 26);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc164 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 30);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 12);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushvalue(L, 3);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc164), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc163), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc162), 1);
  assert(lua_gettop(L) == 4);

  /* if construction_p(x) then */
  enum { lc165 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  const int lc166 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc166) {

    /* local xs = {} */
    lua_newtable(L);
    assert(lua_gettop(L) == 5);

    /* local rest = x */
    lua_pushvalue(L, 3);
    assert(lua_gettop(L) == 6);

    /* while not null_p(rest) do */
    enum { lc167 = 6 };
    while (1) {
      lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
      lua_pushvalue(L, 6);
      lua_call(L, 1, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      if (!(lua_toboolean(L, -1))) {
        break;
      }
      lua_pop(L, 1);

      /* if any_delay_just_p(rest) then */
      enum { lc168 = 6 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 19);
      lua_pushvalue(L, 6);
      lua_call(L, 1, 1);
      const int lc169 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc169) {

        /* return evaluate(env, x) */
        const int lc170 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
        lua_pushvalue(L, 1);
        lua_pushvalue(L, 3);
        lua_call(L, 2, LUA_MULTRET);
        return (lua_gettop(L) - lc170);
        assert(lua_gettop(L) == 6);
      } else {

        /* elseif construction_p(rest) then */
        enum { lc171 = 6 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
        lua_pushvalue(L, 6);
        lua_call(L, 1, 1);
        const int lc172 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc172) {

          /* __TS__ArrayPush(xs, construction_head(rest)) */
          lc_getupvalue(L, lua_upvalueindex(1), 1, 1);
          const int lc173 = lua_gettop(L);
          lua_pushvalue(L, 5);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 81);
          lua_pushvalue(L, 6);
          lua_call(L, 1, LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc173), 0);
          assert(lua_gettop(L) == 6);

          /* rest = force1(construction_tail(rest)) */
          lc_getupvalue(L, lua_upvalueindex(1), 0, 17);
          const int lc174 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 80);
          lua_pushvalue(L, 6);
          lua_call(L, 1, LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc174), 1);
          lua_replace(L, 6);
          assert(lua_gettop(L) == 6);
        } else {

          /* else
           * return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 6);
        }
        lua_settop(L, lc171);
      }
      lua_settop(L, lc168);
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc167);
    assert(lua_gettop(L) == 6);

    /* if jsbool_equal_p(xs[0 + 1], form_builtin_use_systemName) then */
    enum { lc175 = 6 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushnumber(L, 1);
    lua_gettable(L, 5);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 25);
    lua_call(L, 2, 1);
    const int lc176 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc176) {

      /* if (#xs) == 1 then */
      enum { lc177 = 6 };
      const double lc178 = lua_objlen(L, 5);
      lua_pushnumber(L, lc178);
      lua_pushnumber(L, 1);
      const int lc179 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc179);
      const int lc180 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc180) {

        /* return error_v */
        lua_pushvalue(L, 4);
        return 1;
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc177);
      assert(lua_gettop(L) == 6);

      /* local f = xs[1 + 1] */
      lua_pushnumber(L, 2);
      lua_gettable(L, 5);
      assert(lua_gettop(L) == 7);

      /* local args = {} */
      lua_newtable(L);
      assert(lua_gettop(L) == 8);

      /* do
       * local i = 2 */
      lua_pushnumber(L, 2);
      assert(lua_gettop(L) == 9);

      /* while i < (#xs) do */
      enum { lc181 = 9 };
      while (1) {
        const double lc182 = lua_objlen(L, 5);
        lua_pushnumber(L, lc182);
        const int lc183 = lua_lessthan(L, 9, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc183);
        if (!(lua_toboolean(L, -1))) {
          break;
        }
        lua_pop(L, 1);

        /* args[(i - 2) + 1] = xs[i + 1] */
        lua_pushnumber(L, 1);
        lc_add(L, 9, -1);
        lua_remove(L, -2);
        lua_gettable(L, 5);
        lua_pushnumber(L, 2);
        lc_sub(L, 9, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_insert(L, -2);
        lua_settable(L, 8);
        assert(lua_gettop(L) == 9);

        /* i = i + 1 */
        lua_pushnumber(L, 1);
        lc_add(L, 9, -1);
        lua_remove(L, -2);
        lua_replace(L, 9);
        assert(lua_gettop(L) == 9);
      }
      lua_settop(L, lc181);
      assert(lua_gettop(L) == 9);

      /* internal: stack cleanup on scope exit */
      lua_pop(L, 1);
      assert(lua_gettop(L) == 8);

      /* return builtin_form_apply(env, f, args) */
      const int lc184 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 62);
      lua_pushvalue(L, 1);
      lua_pushvalue(L, 7);
      lua_pushvalue(L, 8);
      lua_call(L, 3, LUA_MULTRET);
      return (lua_gettop(L) - lc184);
      assert(lua_gettop(L) == 8);
    } else {

      /* elseif jsbool_equal_p(xs[0 + 1], form_use_systemName) then */
      enum { lc185 = 6 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
      lua_pushnumber(L, 1);
      lua_gettable(L, 5);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 24);
      lua_call(L, 2, 1);
      const int lc186 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc186) {

        /* if (#xs) == 1 then */
        enum { lc187 = 6 };
        const double lc188 = lua_objlen(L, 5);
        lua_pushnumber(L, lc188);
        lua_pushnumber(L, 1);
        const int lc189 = lua_equal(L, -2, -1);
        lua_pop(L, 2);
        lua_pushboolean(L, lc189);
        const int lc190 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc190) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 6);
        }
        lua_settop(L, lc187);
        assert(lua_gettop(L) == 6);

        /* local f = force_all(evaluate(env, xs[1 + 1])) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 18);
        const int lc191 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
        lua_pushvalue(L, 1);
        lua_pushnumber(L, 2);
        lua_gettable(L, 5);
        lua_call(L, 2, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc191), 1);
        assert(lua_gettop(L) == 7);

        /* if not data_p(f) then */
        enum { lc192 = 7 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
        lua_pushvalue(L, 7);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc193 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc193) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 7);
        }
        lua_settop(L, lc192);
        assert(lua_gettop(L) == 7);

        /* local f_type = force1(data_name(f)) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 17);
        const int lc194 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 75);
        lua_pushvalue(L, 7);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc194), 1);
        assert(lua_gettop(L) == 8);

        /* if any_delay_just_p(f_type) then */
        enum { lc195 = 8 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 19);
        lua_pushvalue(L, 8);
        lua_call(L, 1, 1);
        const int lc196 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc196) {

          /* return evaluate(env, x) */
          const int lc197 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 3);
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc197);
          assert(lua_gettop(L) == 8);
        }
        lua_settop(L, lc195);
        assert(lua_gettop(L) == 8);

        /* if not symbol_p(f_type) then */
        enum { lc198 = 8 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 85);
        lua_pushvalue(L, 8);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc199 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc199) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 8);
        }
        lua_settop(L, lc198);
        assert(lua_gettop(L) == 8);

        /* if not symbol_equal_p(f_type, form_symbol) then */
        enum { lc200 = 8 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 23);
        lua_pushvalue(L, 8);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 46);
        lua_call(L, 2, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc201 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc201) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 8);
        }
        lua_settop(L, lc200);
        assert(lua_gettop(L) == 8);

        /* local f_list = force1(data_list(f)) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 17);
        const int lc202 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 74);
        lua_pushvalue(L, 7);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc202), 1);
        assert(lua_gettop(L) == 9);

        /* if any_delay_just_p(f_list) then */
        enum { lc203 = 9 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 19);
        lua_pushvalue(L, 9);
        lua_call(L, 1, 1);
        const int lc204 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc204) {

          /* return evaluate(env, x) */
          const int lc205 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 3);
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc205);
          assert(lua_gettop(L) == 9);
        }
        lua_settop(L, lc203);
        assert(lua_gettop(L) == 9);

        /* if not construction_p(f_list) then */
        enum { lc206 = 9 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
        lua_pushvalue(L, 9);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc207 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc207) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 9);
        }
        lua_settop(L, lc206);
        assert(lua_gettop(L) == 9);

        /* local f_x = construction_head(f_list) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 81);
        lua_pushvalue(L, 9);
        lua_call(L, 1, 1);
        assert(lua_gettop(L) == 10);

        /* local f_list_cdr = force1(construction_tail(f_list)) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 17);
        const int lc208 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 80);
        lua_pushvalue(L, 9);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc208), 1);
        assert(lua_gettop(L) == 11);

        /* if any_delay_just_p(f_list_cdr) then */
        enum { lc209 = 11 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 19);
        lua_pushvalue(L, 11);
        lua_call(L, 1, 1);
        const int lc210 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc210) {

          /* return evaluate(env, x) */
          const int lc211 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 3);
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc211);
          assert(lua_gettop(L) == 11);
        }
        lua_settop(L, lc209);
        assert(lua_gettop(L) == 11);

        /* if not null_p(f_list_cdr) then */
        enum { lc212 = 11 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
        lua_pushvalue(L, 11);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc213 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc213) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 11);
        }
        lua_settop(L, lc212);
        assert(lua_gettop(L) == 11);

        /* local args = {env2val(env)} */
        lua_createtable(L, 1, 0);
        const int lc214 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 12);
        lua_pushvalue(L, 1);
        lua_call(L, 1, LUA_MULTRET);
        while ((lua_gettop(L) > lc214)) {
          lua_rawseti(L, lc214, (0 + (lua_gettop(L) - lc214)));
        }
        assert(lua_gettop(L) == 12);

        /* do
         * local i = 2 */
        lua_pushnumber(L, 2);
        assert(lua_gettop(L) == 13);

        /* while i < (#xs) do */
        enum { lc215 = 13 };
        while (1) {
          const double lc216 = lua_objlen(L, 5);
          lua_pushnumber(L, lc216);
          const int lc217 = lua_lessthan(L, 13, -1);
          lua_pop(L, 1);
          lua_pushboolean(L, lc217);
          if (!(lua_toboolean(L, -1))) {
            break;
          }
          lua_pop(L, 1);

          /* args[(i - 1) + 1] = xs[i + 1] */
          lua_pushnumber(L, 1);
          lc_add(L, 13, -1);
          lua_remove(L, -2);
          lua_gettable(L, 5);
          lua_pushnumber(L, 1);
          lc_sub(L, 13, -1);
          lua_remove(L, -2);
          lua_pushnumber(L, 1);
          lc_add(L, -2, -1);
          lua_remove(L, -2);
          lua_remove(L, -2);
          lua_insert(L, -2);
          lua_settable(L, 12);
          assert(lua_gettop(L) == 13);

          /* i = i + 1 */
          lua_pushnumber(L, 1);
          lc_add(L, 13, -1);
          lua_remove(L, -2);
          lua_replace(L, 13);
          assert(lua_gettop(L) == 13);
        }
        lua_settop(L, lc215);
        assert(lua_gettop(L) == 13);

        /* internal: stack cleanup on scope exit */
        lua_pop(L, 1);
        assert(lua_gettop(L) == 12);

        /* return apply(f_x, args) */
        const int lc218 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 53);
        lua_pushvalue(L, 10);
        lua_pushvalue(L, 12);
        lua_call(L, 2, LUA_MULTRET);
        return (lua_gettop(L) - lc218);
        assert(lua_gettop(L) == 12);
      } else {

        /* elseif jsbool_equal_p(xs[0 + 1], function_builtin_use_systemName)
         * then */
        enum { lc219 = 6 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
        lua_pushnumber(L, 1);
        lua_gettable(L, 5);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 26);
        lua_call(L, 2, 1);
        const int lc220 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc220) {

          /* if (#xs) == 1 then */
          enum { lc221 = 6 };
          const double lc222 = lua_objlen(L, 5);
          lua_pushnumber(L, lc222);
          lua_pushnumber(L, 1);
          const int lc223 = lua_equal(L, -2, -1);
          lua_pop(L, 2);
          lua_pushboolean(L, lc223);
          const int lc224 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc224) {

            /* return error_v */
            lua_pushvalue(L, 4);
            return 1;
            assert(lua_gettop(L) == 6);
          }
          lua_settop(L, lc221);
          assert(lua_gettop(L) == 6);

          /* local f = xs[1 + 1] */
          lua_pushnumber(L, 2);
          lua_gettable(L, 5);
          assert(lua_gettop(L) == 7);

          /* local args = {} */
          lua_newtable(L);
          assert(lua_gettop(L) == 8);

          /* do
           * local i = 2 */
          lua_pushnumber(L, 2);
          assert(lua_gettop(L) == 9);

          /* while i < (#xs) do */
          enum { lc225 = 9 };
          while (1) {
            const double lc226 = lua_objlen(L, 5);
            lua_pushnumber(L, lc226);
            const int lc227 = lua_lessthan(L, 9, -1);
            lua_pop(L, 1);
            lua_pushboolean(L, lc227);
            if (!(lua_toboolean(L, -1))) {
              break;
            }
            lua_pop(L, 1);

            /* args[(i - 2) + 1] = evaluate(env, xs[i + 1]) */
            lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
            lua_pushvalue(L, 1);
            lua_pushnumber(L, 1);
            lc_add(L, 9, -1);
            lua_remove(L, -2);
            lua_gettable(L, 5);
            lua_call(L, 2, 1);
            lua_pushnumber(L, 2);
            lc_sub(L, 9, -1);
            lua_remove(L, -2);
            lua_pushnumber(L, 1);
            lc_add(L, -2, -1);
            lua_remove(L, -2);
            lua_remove(L, -2);
            lua_insert(L, -2);
            lua_settable(L, 8);
            assert(lua_gettop(L) == 9);

            /* i = i + 1 */
            lua_pushnumber(L, 1);
            lc_add(L, 9, -1);
            lua_remove(L, -2);
            lua_replace(L, 9);
            assert(lua_gettop(L) == 9);
          }
          lua_settop(L, lc225);
          assert(lua_gettop(L) == 9);

          /* internal: stack cleanup on scope exit */
          lua_pop(L, 1);
          assert(lua_gettop(L) == 8);

          /* return builtin_func_apply(f, args) */
          const int lc228 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 57);
          lua_pushvalue(L, 7);
          lua_pushvalue(L, 8);
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc228);
          assert(lua_gettop(L) == 8);
        } else {

          /* else
           * local f = evaluate(env, xs[0 + 1]) */
          lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
          lua_pushvalue(L, 1);
          lua_pushnumber(L, 1);
          lua_gettable(L, 5);
          lua_call(L, 2, 1);
          assert(lua_gettop(L) == 7);

          /* local args = {} */
          lua_newtable(L);
          assert(lua_gettop(L) == 8);

          /* do
           * local i = 1 */
          lua_pushnumber(L, 1);
          assert(lua_gettop(L) == 9);

          /* while i < (#xs) do */
          enum { lc229 = 9 };
          while (1) {
            const double lc230 = lua_objlen(L, 5);
            lua_pushnumber(L, lc230);
            const int lc231 = lua_lessthan(L, 9, -1);
            lua_pop(L, 1);
            lua_pushboolean(L, lc231);
            if (!(lua_toboolean(L, -1))) {
              break;
            }
            lua_pop(L, 1);

            /* args[(i - 1) + 1] = evaluate(env, xs[i + 1]) */
            lc_getupvalue(L, lua_upvalueindex(1), 0, 66);
            lua_pushvalue(L, 1);
            lua_pushnumber(L, 1);
            lc_add(L, 9, -1);
            lua_remove(L, -2);
            lua_gettable(L, 5);
            lua_call(L, 2, 1);
            lua_pushnumber(L, 1);
            lc_sub(L, 9, -1);
            lua_remove(L, -2);
            lua_pushnumber(L, 1);
            lc_add(L, -2, -1);
            lua_remove(L, -2);
            lua_remove(L, -2);
            lua_insert(L, -2);
            lua_settable(L, 8);
            assert(lua_gettop(L) == 9);

            /* i = i + 1 */
            lua_pushnumber(L, 1);
            lc_add(L, 9, -1);
            lua_remove(L, -2);
            lua_replace(L, 9);
            assert(lua_gettop(L) == 9);
          }
          lua_settop(L, lc229);
          assert(lua_gettop(L) == 9);

          /* internal: stack cleanup on scope exit */
          lua_pop(L, 1);
          assert(lua_gettop(L) == 8);

          /* return apply(f, args) */
          const int lc232 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 53);
          lua_pushvalue(L, 7);
          lua_pushvalue(L, 8);
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc232);
          assert(lua_gettop(L) == 8);
        }
        lua_settop(L, lc219);
      }
      lua_settop(L, lc185);
    }
    lua_settop(L, lc175);
    assert(lua_gettop(L) == 6);
  } else {

    /* elseif null_p(x) then */
    enum { lc233 = 4 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
    lua_pushvalue(L, 3);
    lua_call(L, 1, 1);
    const int lc234 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc234) {

      /* return x */
      lua_pushvalue(L, 3);
      return 1;
      assert(lua_gettop(L) == 4);
    } else {

      /* elseif name_p(x) then */
      enum { lc235 = 4 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 9);
      lua_pushvalue(L, 3);
      lua_call(L, 1, 1);
      const int lc236 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc236) {

        /* return env_get(env, x, error_v) */
        const int lc237 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 14);
        lua_pushvalue(L, 1);
        lua_pushvalue(L, 3);
        lua_pushvalue(L, 4);
        lua_call(L, 3, LUA_MULTRET);
        return (lua_gettop(L) - lc237);
        assert(lua_gettop(L) == 4);
      } else {

        /* elseif error_p(x) then */
        enum { lc238 = 4 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 72);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        const int lc239 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc239) {

          /* return error_v */
          lua_pushvalue(L, 4);
          return 1;
          assert(lua_gettop(L) == 4);
        }
        lua_settop(L, lc238);
      }
      lua_settop(L, lc235);
    }
    lua_settop(L, lc233);
  }
  lua_settop(L, lc165);
  assert(lua_gettop(L) == 4);

  /* return ERROR() */
  const int lc240 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc240);
  assert(lua_gettop(L) == 4);
}

/* name: name_p
 * function(x) */
static int lcf1_name_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return symbol_p(x) or data_p(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 85);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
  }
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: make_error_v
 * function() */
static int lcf1_make_error_v(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* return new_error(system_symbol, new_list(function_builtin_use_systemName,
   * new_list(apply_function_builtin_systemName, new_list(f,
   * jsArray_to_list(xs))))) */
  const int lc242 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 73);
  const int lc243 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 48);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
  const int lc244 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 26);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
  const int lc245 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 31);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
  const int lc246 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 104);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 22);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 105);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc246), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc245), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc244), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc243), LUA_MULTRET);
  return (lua_gettop(L) - lc242);
  assert(lua_gettop(L) == 0);
}

/* name: real_apply
 * function(f, xs) */
static int lcf1_real_apply(lua_State *L) {
  lua_checkstack(L, 23);
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc241 = 3 };
  assert((lua_gettop(L) == lc241));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 104);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 105);

  /* local make_error_v */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 4);

  /* make_error_v = function()
   *         return new_error(system_symbol,
   * new_list(function_builtin_use_systemName,
   * new_list(apply_function_builtin_systemName, new_list(f,
   * jsArray_to_list(xs)))));
   *     end */
  lua_pushvalue(L, lc241);
  lua_pushcclosure(L, lcf1_make_error_v, 1);
  lua_replace(L, 4);
  assert(lua_gettop(L) == 4);

  /* f = force1(f) */
  lc_getupvalue(L, lc241, 1, 17);
  lc_getupvalue(L, lc241, 0, 104);
  lua_call(L, 1, 1);
  lc_setupvalue(L, lc241, 0, 104);
  assert(lua_gettop(L) == 4);

  /* if any_delay_just_p(f) then */
  enum { lc247 = 4 };
  lc_getupvalue(L, lc241, 1, 19);
  lc_getupvalue(L, lc241, 0, 104);
  lua_call(L, 1, 1);
  const int lc248 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc248) {

    /* return apply(f, xs) */
    const int lc249 = lua_gettop(L);
    lc_getupvalue(L, lc241, 1, 53);
    lc_getupvalue(L, lc241, 0, 104);
    lc_getupvalue(L, lc241, 0, 105);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc249);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc247);
  assert(lua_gettop(L) == 4);

  /* if not data_p(f) then */
  enum { lc250 = 4 };
  lc_getupvalue(L, lc241, 1, 76);
  lc_getupvalue(L, lc241, 0, 104);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc251 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc251) {

    /* return make_error_v() */
    const int lc252 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc252);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc250);
  assert(lua_gettop(L) == 4);

  /* local f_type = force_all(data_name(f)) */
  lc_getupvalue(L, lc241, 1, 18);
  const int lc253 = lua_gettop(L);
  lc_getupvalue(L, lc241, 1, 75);
  lc_getupvalue(L, lc241, 0, 104);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc253), 1);
  assert(lua_gettop(L) == 5);

  /* if not (symbol_p(f_type) and symbol_equal_p(f_type, function_symbol)) then
   */
  enum { lc254 = 5 };
  lc_getupvalue(L, lc241, 1, 85);
  lua_pushvalue(L, 5);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lc241, 1, 23);
    lua_pushvalue(L, 5);
    lc_getupvalue(L, lc241, 1, 47);
    lua_call(L, 2, 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc255 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc255) {

    /* return make_error_v() */
    const int lc256 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc256);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc254);
  assert(lua_gettop(L) == 5);

  /* local f_list = force_all(data_list(f)) */
  lc_getupvalue(L, lc241, 1, 18);
  const int lc257 = lua_gettop(L);
  lc_getupvalue(L, lc241, 1, 74);
  lc_getupvalue(L, lc241, 0, 104);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc257), 1);
  assert(lua_gettop(L) == 6);

  /* if not construction_p(f_list) then */
  enum { lc258 = 6 };
  lc_getupvalue(L, lc241, 1, 82);
  lua_pushvalue(L, 6);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc259 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc259) {

    /* return make_error_v() */
    const int lc260 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc260);
    assert(lua_gettop(L) == 6);
  }
  lua_settop(L, lc258);
  assert(lua_gettop(L) == 6);

  /* local args_pat = force_all_rec(construction_head(f_list)) */
  lc_getupvalue(L, lc241, 1, 49);
  const int lc261 = lua_gettop(L);
  lc_getupvalue(L, lc241, 1, 81);
  lua_pushvalue(L, 6);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc261), 1);
  assert(lua_gettop(L) == 7);

  /* local f_list_cdr = force_all(construction_tail(f_list)) */
  lc_getupvalue(L, lc241, 1, 18);
  const int lc262 = lua_gettop(L);
  lc_getupvalue(L, lc241, 1, 80);
  lua_pushvalue(L, 6);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc262), 1);
  assert(lua_gettop(L) == 8);

  /* if not (construction_p(f_list_cdr) and
   * null_p(force_all(construction_tail(f_list_cdr)))) then */
  enum { lc263 = 8 };
  lc_getupvalue(L, lc241, 1, 82);
  lua_pushvalue(L, 8);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lc241, 1, 78);
    const int lc264 = lua_gettop(L);
    lc_getupvalue(L, lc241, 1, 18);
    const int lc265 = lua_gettop(L);
    lc_getupvalue(L, lc241, 1, 80);
    lua_pushvalue(L, 8);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc265), LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc264), 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc266 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc266) {

    /* return make_error_v() */
    const int lc267 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc267);
    assert(lua_gettop(L) == 8);
  }
  lua_settop(L, lc263);
  assert(lua_gettop(L) == 8);

  /* local f_code = construction_head(f_list_cdr) */
  lc_getupvalue(L, lc241, 1, 81);
  lua_pushvalue(L, 8);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 9);

  /* local env = env_null_v */
  lc_getupvalue(L, lc241, 1, 16);
  assert(lua_gettop(L) == 10);

  /* local xs_i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 11);

  /* while not null_p(args_pat) do */
  enum { lc268 = 11 };
  while (1) {
    lc_getupvalue(L, lc241, 1, 78);
    lua_pushvalue(L, 7);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if name_p(args_pat) then */
    enum { lc269 = 11 };
    lc_getupvalue(L, lc241, 1, 9);
    lua_pushvalue(L, 7);
    lua_call(L, 1, 1);
    const int lc270 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc270) {

      /* local x = null_v */
      lc_getupvalue(L, lc241, 1, 79);
      assert(lua_gettop(L) == 12);

      /* do
       * local i = (#xs) - 1 */
      lc_getupvalue(L, lc241, 0, 105);
      const double lc271 = lua_objlen(L, -1);
      lua_pop(L, 1);
      lua_pushnumber(L, lc271);
      lua_pushnumber(L, 1);
      lc_sub(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      assert(lua_gettop(L) == 13);

      /* while i >= xs_i do */
      enum { lc272 = 13 };
      while (1) {
        lua_pushboolean(L, lc_le(L, 11, 13));
        if (!(lua_toboolean(L, -1))) {
          break;
        }
        lua_pop(L, 1);

        /* x = new_construction(xs[i + 1], x) */
        lc_getupvalue(L, lc241, 1, 83);
        lc_getupvalue(L, lc241, 0, 105);
        lua_pushnumber(L, 1);
        lc_add(L, 13, -1);
        lua_remove(L, -2);
        lua_gettable(L, -2);
        lua_remove(L, -2);
        lua_pushvalue(L, 12);
        lua_call(L, 2, 1);
        lua_replace(L, 12);
        assert(lua_gettop(L) == 13);

        /* i = i - 1 */
        lua_pushnumber(L, 1);
        lc_sub(L, 13, -1);
        lua_remove(L, -2);
        lua_replace(L, 13);
        assert(lua_gettop(L) == 13);
      }
      lua_settop(L, lc272);
      assert(lua_gettop(L) == 13);

      /* internal: stack cleanup on scope exit */
      lua_pop(L, 1);
      assert(lua_gettop(L) == 12);

      /* env = env_set(env, args_pat, x) */
      lc_getupvalue(L, lc241, 1, 15);
      lua_pushvalue(L, 10);
      lua_pushvalue(L, 7);
      lua_pushvalue(L, 12);
      lua_call(L, 3, 1);
      lua_replace(L, 10);
      assert(lua_gettop(L) == 12);

      /* xs_i = #xs */
      lc_getupvalue(L, lc241, 0, 105);
      const double lc273 = lua_objlen(L, -1);
      lua_pop(L, 1);
      lua_pushnumber(L, lc273);
      lua_replace(L, 11);
      assert(lua_gettop(L) == 12);

      /* args_pat = null_v */
      lc_getupvalue(L, lc241, 1, 79);
      lua_replace(L, 7);
      assert(lua_gettop(L) == 12);
    } else {

      /* elseif construction_p(args_pat) then */
      enum { lc274 = 11 };
      lc_getupvalue(L, lc241, 1, 82);
      lua_pushvalue(L, 7);
      lua_call(L, 1, 1);
      const int lc275 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc275) {

        /* if xs_i < (#xs) then */
        enum { lc276 = 11 };
        lc_getupvalue(L, lc241, 0, 105);
        const double lc277 = lua_objlen(L, -1);
        lua_pop(L, 1);
        lua_pushnumber(L, lc277);
        const int lc278 = lua_lessthan(L, 11, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc278);
        const int lc279 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc279) {

          /* local x = xs[xs_i + 1] */
          lc_getupvalue(L, lc241, 0, 105);
          lua_pushnumber(L, 1);
          lc_add(L, 11, -1);
          lua_remove(L, -2);
          lua_gettable(L, -2);
          lua_remove(L, -2);
          assert(lua_gettop(L) == 12);

          /* xs_i = xs_i + 1 */
          lua_pushnumber(L, 1);
          lc_add(L, 11, -1);
          lua_remove(L, -2);
          lua_replace(L, 11);
          assert(lua_gettop(L) == 12);

          /* env = env_set(env, construction_head(args_pat), x) */
          lc_getupvalue(L, lc241, 1, 15);
          lua_pushvalue(L, 10);
          lc_getupvalue(L, lc241, 1, 81);
          lua_pushvalue(L, 7);
          lua_call(L, 1, 1);
          lua_pushvalue(L, 12);
          lua_call(L, 3, 1);
          lua_replace(L, 10);
          assert(lua_gettop(L) == 12);

          /* args_pat = construction_tail(args_pat) */
          lc_getupvalue(L, lc241, 1, 80);
          lua_pushvalue(L, 7);
          lua_call(L, 1, 1);
          lua_replace(L, 7);
          assert(lua_gettop(L) == 12);
        } else {

          /* else
           * return make_error_v() */
          const int lc280 = lua_gettop(L);
          lua_pushvalue(L, 4);
          lua_call(L, 0, LUA_MULTRET);
          return (lua_gettop(L) - lc280);
          assert(lua_gettop(L) == 11);
        }
        lua_settop(L, lc276);
        assert(lua_gettop(L) == 11);
      } else {

        /* else
         * return make_error_v() */
        const int lc281 = lua_gettop(L);
        lua_pushvalue(L, 4);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc281);
        assert(lua_gettop(L) == 11);
      }
      lua_settop(L, lc274);
    }
    lua_settop(L, lc269);
    assert(lua_gettop(L) == 11);
  }
  lua_settop(L, lc268);
  assert(lua_gettop(L) == 11);

  /* if (#xs) ~= xs_i then */
  enum { lc282 = 11 };
  lc_getupvalue(L, lc241, 0, 105);
  const double lc283 = lua_objlen(L, -1);
  lua_pop(L, 1);
  lua_pushnumber(L, lc283);
  const int lc284 = lua_equal(L, -1, 11);
  lua_pop(L, 1);
  lua_pushboolean(L, lc284);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc285 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc285) {

    /* return make_error_v() */
    const int lc286 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc286);
    assert(lua_gettop(L) == 11);
  }
  lua_settop(L, lc282);
  assert(lua_gettop(L) == 11);

  /* return evaluate(env, f_code) */
  const int lc287 = lua_gettop(L);
  lc_getupvalue(L, lc241, 1, 66);
  lua_pushvalue(L, 10);
  lua_pushvalue(L, 9);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc287);
  assert(lua_gettop(L) == 11);
}

/* name: real_builtin_func_apply
 * function(f, xs) */
static int lcf1_real_builtin_func_apply(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local error_v = new_error(system_symbol,
   * new_list(function_builtin_use_systemName, new_list(f,
   * jsArray_to_list(xs)))) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 73);
  const int lc288 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 48);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc289 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 26);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc290 = lua_gettop(L);
  lua_pushvalue(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc290), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc289), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc288), 1);
  assert(lua_gettop(L) == 3);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 4);

  /* while i < (#real_builtin_func_apply_s) do */
  enum { lc291 = 4 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 8);
    const double lc292 = lua_objlen(L, -1);
    lua_pop(L, 1);
    lua_pushnumber(L, lc292);
    const int lc293 = lua_lessthan(L, 4, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc293);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if jsbool_equal_p(f, real_builtin_func_apply_s[i + 1][0 + 1]) then */
    enum { lc294 = 4 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushvalue(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 8);
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushnumber(L, 1);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_call(L, 2, 1);
    const int lc295 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc295) {

      /* local actually_length = real_builtin_func_apply_s[i + 1][1 + 1] */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 8);
      lua_pushnumber(L, 1);
      lc_add(L, 4, -1);
      lua_remove(L, -2);
      lua_gettable(L, -2);
      lua_remove(L, -2);
      lua_pushnumber(L, 2);
      lua_gettable(L, -2);
      lua_remove(L, -2);
      assert(lua_gettop(L) == 5);

      /* if (#xs) ~= actually_length then */
      enum { lc296 = 5 };
      const double lc297 = lua_objlen(L, 2);
      lua_pushnumber(L, lc297);
      const int lc298 = lua_equal(L, -1, 5);
      lua_pop(L, 1);
      lua_pushboolean(L, lc298);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc299 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc299) {

        /* return error_v */
        lua_pushvalue(L, 3);
        return 1;
        assert(lua_gettop(L) == 5);
      }
      lua_settop(L, lc296);
      assert(lua_gettop(L) == 5);

      /* local f = real_builtin_func_apply_s[i + 1][2 + 1] */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 8);
      lua_pushnumber(L, 1);
      lc_add(L, 4, -1);
      lua_remove(L, -2);
      lua_gettable(L, -2);
      lua_remove(L, -2);
      lua_pushnumber(L, 3);
      lua_gettable(L, -2);
      lua_remove(L, -2);
      assert(lua_gettop(L) == 6);

      /* if actually_length == 1 then */
      enum { lc300 = 6 };
      lua_pushnumber(L, 1);
      const int lc301 = lua_equal(L, 5, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc301);
      const int lc302 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc302) {

        /* return (f)(xs[0 + 1], error_v) */
        const int lc303 = lua_gettop(L);
        lua_pushvalue(L, 6);
        lua_pushnumber(L, 1);
        lua_gettable(L, 2);
        lua_pushvalue(L, 3);
        lua_call(L, 2, LUA_MULTRET);
        return (lua_gettop(L) - lc303);
        assert(lua_gettop(L) == 6);
      } else {

        /* elseif actually_length == 2 then */
        enum { lc304 = 6 };
        lua_pushnumber(L, 2);
        const int lc305 = lua_equal(L, 5, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc305);
        const int lc306 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc306) {

          /* return (f)(xs[0 + 1], xs[1 + 1], error_v) */
          const int lc307 = lua_gettop(L);
          lua_pushvalue(L, 6);
          lua_pushnumber(L, 1);
          lua_gettable(L, 2);
          lua_pushnumber(L, 2);
          lua_gettable(L, 2);
          lua_pushvalue(L, 3);
          lua_call(L, 3, LUA_MULTRET);
          return (lua_gettop(L) - lc307);
          assert(lua_gettop(L) == 6);
        } else {

          /* elseif actually_length == 3 then */
          enum { lc308 = 6 };
          lua_pushnumber(L, 3);
          const int lc309 = lua_equal(L, 5, -1);
          lua_pop(L, 1);
          lua_pushboolean(L, lc309);
          const int lc310 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc310) {

            /* return (f)(xs[0 + 1], xs[1 + 1], xs[2 + 1], error_v) */
            const int lc311 = lua_gettop(L);
            lua_pushvalue(L, 6);
            lua_pushnumber(L, 1);
            lua_gettable(L, 2);
            lua_pushnumber(L, 2);
            lua_gettable(L, 2);
            lua_pushnumber(L, 3);
            lua_gettable(L, 2);
            lua_pushvalue(L, 3);
            lua_call(L, 4, LUA_MULTRET);
            return (lua_gettop(L) - lc311);
            assert(lua_gettop(L) == 6);
          }
          lua_settop(L, lc308);
        }
        lua_settop(L, lc304);
      }
      lua_settop(L, lc300);
      assert(lua_gettop(L) == 6);

      /* return ERROR() */
      const int lc312 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc312);
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc294);
    assert(lua_gettop(L) == 4);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_replace(L, 4);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc291);
  assert(lua_gettop(L) == 4);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 3);

  /* return error_v */
  lua_pushvalue(L, 3);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* name: real_builtin_form_apply
 * function(env, f, xs) */
static int lcf1_real_builtin_form_apply(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local error_v = new_error(system_symbol,
   * new_list(form_builtin_use_systemName, new_list(env2val(env), f,
   * jsArray_to_list(xs)))) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 73);
  const int lc313 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 48);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc314 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 25);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 21);
  const int lc315 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 12);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushvalue(L, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
  lua_pushvalue(L, 3);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc315), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc314), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc313), 1);
  assert(lua_gettop(L) == 4);

  /* if jsbool_equal_p(f, quote_form_builtin_systemName) then */
  enum { lc316 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
  lua_pushvalue(L, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 28);
  lua_call(L, 2, 1);
  const int lc317 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc317) {

    /* if (#xs) ~= 1 then */
    enum { lc318 = 4 };
    const double lc319 = lua_objlen(L, 3);
    lua_pushnumber(L, lc319);
    lua_pushnumber(L, 1);
    const int lc320 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc320);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc321 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc321) {

      /* return error_v */
      lua_pushvalue(L, 4);
      return 1;
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L, lc318);
    assert(lua_gettop(L) == 4);

    /* return xs[0 + 1] */
    lua_pushnumber(L, 1);
    lua_gettable(L, 3);
    return 1;
    assert(lua_gettop(L) == 4);
  } else {

    /* elseif jsbool_equal_p(f, lambda_form_builtin_systemName) then */
    enum { lc322 = 4 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    lua_pushvalue(L, 2);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 27);
    lua_call(L, 2, 1);
    const int lc323 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc323) {

      /* if (#xs) ~= 2 then */
      enum { lc324 = 4 };
      const double lc325 = lua_objlen(L, 3);
      lua_pushnumber(L, lc325);
      lua_pushnumber(L, 2);
      const int lc326 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc326);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc327 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc327) {

        /* return error_v */
        lua_pushvalue(L, 4);
        return 1;
        assert(lua_gettop(L) == 4);
      }
      lua_settop(L, lc324);
      assert(lua_gettop(L) == 4);

      /* return new_lambda(env, xs[0 + 1], xs[1 + 1], error_v) */
      const int lc328 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 4);
      lua_pushvalue(L, 1);
      lua_pushnumber(L, 1);
      lua_gettable(L, 3);
      lua_pushnumber(L, 2);
      lua_gettable(L, 3);
      lua_pushvalue(L, 4);
      lua_call(L, 4, LUA_MULTRET);
      return (lua_gettop(L) - lc328);
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L, lc322);
  }
  lua_settop(L, lc316);
  assert(lua_gettop(L) == 4);

  /* return error_v */
  lua_pushvalue(L, 4);
  return 1;
  assert(lua_gettop(L) == 4);
}

/* name: make_error_v
 * function() */
static int lcf2_make_error_v(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if error_v == false then */
  enum { lc333 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 109);
  lua_pushboolean(L, 0);
  const int lc334 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc334);
  const int lc335 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc335) {

    /* return new_error(system_symbol, new_list(form_builtin_use_systemName,
     * new_list(env2val(env), lambda_form_builtin_systemName,
     * jsArray_to_list({args_pat, body})))) */
    const int lc336 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 73);
    const int lc337 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 48);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
    const int lc338 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 25);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
    const int lc339 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 12);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 106);
    lua_call(L, 1, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 27);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 22);
    lua_createtable(L, 2, 0);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 107);
    lua_rawseti(L, -2, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 108);
    lua_rawseti(L, -2, 2);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc339), LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc338), LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc337), LUA_MULTRET);
    return (lua_gettop(L) - lc336);
    assert(lua_gettop(L) == 0);
  } else {

    /* else
     * return error_v */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 109);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc333);
  assert(lua_gettop(L) == 0);
  return 0;
}

/* name: make_quote
 * function(x) */
static int lcf1_make_quote(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return new_list(form_builtin_use_systemName, quote_form_builtin_systemName,
   * x) */
  const int lc340 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 25);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 28);
  lua_pushvalue(L, 1);
  lua_call(L, 3, LUA_MULTRET);
  return (lua_gettop(L) - lc340);
  assert(lua_gettop(L) == 1);
}

/* function(k, v) */
static int lcf356(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#args_pat_vars) do */
  enum { lc351 = 3 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 1, 110);
    const double lc352 = lua_objlen(L, -1);
    lua_pop(L, 1);
    lua_pushnumber(L, lc352);
    const int lc353 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc353);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if jsbool_equal_p(args_pat_vars[i + 1], k) then */
    enum { lc354 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 3, 3);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 110);
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushvalue(L, 1);
    lua_call(L, 2, 1);
    const int lc355 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc355) {

      /* return; */
      return 0;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc354);
    assert(lua_gettop(L) == 3);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc351);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* __TS__ArrayPush(env_vars, k) */
  lc_getupvalue(L, lua_upvalueindex(1), 4, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 111);
  lua_pushvalue(L, 1);
  lua_call(L, 2, 0);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* name: new_lambda
 * function(env, args_pat, body, error_v) */
static int lcf1_new_lambda(lua_State *L) {
  lua_checkstack(L, 25);
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc329 = 5 };
  assert((lua_gettop(L) == lc329));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 106);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 107);
  lua_pushvalue(L, 3);
  lua_rawseti(L, -2, 108);
  lua_pushvalue(L, 4);
  lua_rawseti(L, -2, 109);

  /* if error_v == nil then */
  enum { lc330 = 5 };
  lc_getupvalue(L, lc329, 0, 109);
  lua_pushnil(L);
  const int lc331 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc331);
  const int lc332 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc332) {

    /* error_v = false */
    lua_pushboolean(L, 0);
    lc_setupvalue(L, lc329, 0, 109);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc330);
  assert(lua_gettop(L) == 5);

  /* local make_error_v */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 6);

  /* make_error_v = function()
   *         if error_v == false then
   *             return new_error(system_symbol,
   * new_list(form_builtin_use_systemName, new_list(env2val(env),
   * lambda_form_builtin_systemName, jsArray_to_list({args_pat, body}))));
   *         else
   *             return error_v;
   *         end
   *     end */
  lua_pushvalue(L, lc329);
  lua_pushcclosure(L, lcf2_make_error_v, 1);
  lua_replace(L, 6);
  assert(lua_gettop(L) == 6);

  /* local make_quote */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 7);

  /* make_quote = function(x)
   *         return new_list(form_builtin_use_systemName,
   * quote_form_builtin_systemName, x);
   *     end */
  lua_pushvalue(L, lc329);
  lua_pushcclosure(L, lcf1_make_quote, 1);
  lua_replace(L, 7);
  assert(lua_gettop(L) == 7);

  /* args_pat = force_all_rec(args_pat) */
  lc_getupvalue(L, lc329, 1, 49);
  lc_getupvalue(L, lc329, 0, 107);
  lua_call(L, 1, 1);
  lc_setupvalue(L, lc329, 0, 107);
  assert(lua_gettop(L) == 7);

  /* local args_pat_vars = {} */
  lc_newclosuretable(L, lc329);
  enum { lc341 = 8 };
  assert((lua_gettop(L) == lc341));
  lua_newtable(L);
  lua_rawseti(L, lc341, 110);
  assert(lua_gettop(L) == 8);

  /* local args_pat_is_dot = false */
  lua_pushboolean(L, 0);
  assert(lua_gettop(L) == 9);

  /* local args_pat_iter = args_pat */
  lc_getupvalue(L, lc341, 1, 107);
  assert(lua_gettop(L) == 10);

  /* while not null_p(args_pat_iter) do */
  enum { lc342 = 10 };
  while (1) {
    lc_getupvalue(L, lc341, 2, 78);
    lua_pushvalue(L, 10);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if name_p(args_pat_iter) then */
    enum { lc343 = 10 };
    lc_getupvalue(L, lc341, 2, 9);
    lua_pushvalue(L, 10);
    lua_call(L, 1, 1);
    const int lc344 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc344) {

      /* __TS__ArrayPush(args_pat_vars, args_pat_iter) */
      lc_getupvalue(L, lc341, 3, 1);
      lc_getupvalue(L, lc341, 0, 110);
      lua_pushvalue(L, 10);
      lua_call(L, 2, 0);
      assert(lua_gettop(L) == 10);

      /* args_pat_is_dot = true */
      lua_pushboolean(L, 1);
      lua_replace(L, 9);
      assert(lua_gettop(L) == 10);

      /* args_pat_iter = null_v */
      lc_getupvalue(L, lc341, 2, 79);
      lua_replace(L, 10);
      assert(lua_gettop(L) == 10);
    } else {

      /* elseif construction_p(args_pat_iter) then */
      enum { lc345 = 10 };
      lc_getupvalue(L, lc341, 2, 82);
      lua_pushvalue(L, 10);
      lua_call(L, 1, 1);
      const int lc346 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc346) {

        /* __TS__ArrayPush(args_pat_vars, construction_head(args_pat_iter)) */
        lc_getupvalue(L, lc341, 3, 1);
        const int lc347 = lua_gettop(L);
        lc_getupvalue(L, lc341, 0, 110);
        lc_getupvalue(L, lc341, 2, 81);
        lua_pushvalue(L, 10);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc347), 0);
        assert(lua_gettop(L) == 10);

        /* args_pat_iter = construction_tail(args_pat_iter) */
        lc_getupvalue(L, lc341, 2, 80);
        lua_pushvalue(L, 10);
        lua_call(L, 1, 1);
        lua_replace(L, 10);
        assert(lua_gettop(L) == 10);
      } else {

        /* else
         * return make_error_v() */
        const int lc348 = lua_gettop(L);
        lua_pushvalue(L, 6);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc348);
        assert(lua_gettop(L) == 10);
      }
      lua_settop(L, lc345);
    }
    lua_settop(L, lc343);
    assert(lua_gettop(L) == 10);
  }
  lua_settop(L, lc342);
  assert(lua_gettop(L) == 10);

  /* local args_pat_vars_val = args_pat */
  lc_getupvalue(L, lc341, 1, 107);
  assert(lua_gettop(L) == 11);

  /* if args_pat_is_dot then */
  enum { lc349 = 11 };
  if (lua_toboolean(L, 9)) {

    /* args_pat_vars_val = jsArray_to_list(args_pat_vars) */
    lc_getupvalue(L, lc341, 2, 22);
    lc_getupvalue(L, lc341, 0, 110);
    lua_call(L, 1, 1);
    lua_replace(L, 11);
    assert(lua_gettop(L) == 11);
  }
  lua_settop(L, lc349);
  assert(lua_gettop(L) == 11);

  /* local env_vars = {} */
  lc_newclosuretable(L, lc341);
  enum { lc350 = 12 };
  assert((lua_gettop(L) == lc350));
  lua_newtable(L);
  lua_rawseti(L, lc350, 111);
  assert(lua_gettop(L) == 12);

  /* env_foreach(env, function(k, v)
   *         do
   *             local i = 0;
   *             while i < (#args_pat_vars) do
   *                 if jsbool_equal_p(args_pat_vars[i + 1], k) then
   *                     return;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         __TS__ArrayPush(env_vars, k);
   *     end) */
  lc_getupvalue(L, lc350, 3, 11);
  lc_getupvalue(L, lc350, 2, 106);
  lua_pushvalue(L, lc350);
  lua_pushcclosure(L, lcf356, 1);
  lua_call(L, 2, 0);
  assert(lua_gettop(L) == 12);

  /* local new_args_pat = args_pat_vars_val */
  lua_pushvalue(L, 11);
  assert(lua_gettop(L) == 13);

  /* do
   * local i = (#env_vars) - 1 */
  lc_getupvalue(L, lc350, 0, 111);
  const double lc357 = lua_objlen(L, -1);
  lua_pop(L, 1);
  lua_pushnumber(L, lc357);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  assert(lua_gettop(L) == 14);

  /* while i >= 0 do */
  enum { lc358 = 14 };
  while (1) {
    lua_pushnumber(L, 0);
    const int lc359 = lc_le(L, -1, 14);
    lua_pop(L, 1);
    lua_pushboolean(L, lc359);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* new_args_pat = new_construction(env_vars[i + 1], new_args_pat) */
    lc_getupvalue(L, lc350, 3, 83);
    lc_getupvalue(L, lc350, 0, 111);
    lua_pushnumber(L, 1);
    lc_add(L, 14, -1);
    lua_remove(L, -2);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_pushvalue(L, 13);
    lua_call(L, 2, 1);
    lua_replace(L, 13);
    assert(lua_gettop(L) == 14);

    /* i = i - 1 */
    lua_pushnumber(L, 1);
    lc_sub(L, 14, -1);
    lua_remove(L, -2);
    lua_replace(L, 14);
    assert(lua_gettop(L) == 14);
  }
  lua_settop(L, lc358);
  assert(lua_gettop(L) == 14);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 13);

  /* local new_args = args_pat_vars_val */
  lua_pushvalue(L, 11);
  assert(lua_gettop(L) == 14);

  /* do
   * local i = (#env_vars) - 1 */
  lc_getupvalue(L, lc350, 0, 111);
  const double lc360 = lua_objlen(L, -1);
  lua_pop(L, 1);
  lua_pushnumber(L, lc360);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  assert(lua_gettop(L) == 15);

  /* while i >= 0 do */
  enum { lc361 = 15 };
  while (1) {
    lua_pushnumber(L, 0);
    const int lc362 = lc_le(L, -1, 15);
    lua_pop(L, 1);
    lua_pushboolean(L, lc362);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* new_args = new_construction(make_quote(must_env_get(env, env_vars[i +
     * 1])), new_args) */
    lc_getupvalue(L, lc350, 3, 83);
    lua_pushvalue(L, 7);
    const int lc363 = lua_gettop(L);
    lc_getupvalue(L, lc350, 3, 13);
    lc_getupvalue(L, lc350, 2, 106);
    lc_getupvalue(L, lc350, 0, 111);
    lua_pushnumber(L, 1);
    lc_add(L, 15, -1);
    lua_remove(L, -2);
    lua_gettable(L, -2);
    lua_remove(L, -2);
    lua_call(L, 2, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc363), 1);
    lua_pushvalue(L, 14);
    lua_call(L, 2, 1);
    lua_replace(L, 14);
    assert(lua_gettop(L) == 15);

    /* i = i - 1 */
    lua_pushnumber(L, 1);
    lc_sub(L, 15, -1);
    lua_remove(L, -2);
    lua_replace(L, 15);
    assert(lua_gettop(L) == 15);
  }
  lua_settop(L, lc361);
  assert(lua_gettop(L) == 15);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 14);

  /* return new_data(function_symbol, new_list(args_pat,
   * new_construction(make_quote(new_data(function_symbol,
   * new_list(new_args_pat, body))), new_args))) */
  const int lc364 = lua_gettop(L);
  lc_getupvalue(L, lc350, 3, 77);
  const int lc365 = lua_gettop(L);
  lc_getupvalue(L, lc350, 3, 47);
  lc_getupvalue(L, lc350, 3, 21);
  const int lc366 = lua_gettop(L);
  lc_getupvalue(L, lc350, 2, 107);
  lc_getupvalue(L, lc350, 3, 83);
  lua_pushvalue(L, 7);
  const int lc367 = lua_gettop(L);
  lc_getupvalue(L, lc350, 3, 77);
  const int lc368 = lua_gettop(L);
  lc_getupvalue(L, lc350, 3, 47);
  lc_getupvalue(L, lc350, 3, 21);
  lua_pushvalue(L, 13);
  lc_getupvalue(L, lc350, 2, 108);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc368), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc367), 1);
  lua_pushvalue(L, 14);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc366), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc365), LUA_MULTRET);
  return (lua_gettop(L) - lc364);
  assert(lua_gettop(L) == 14);
}

/* name: end_2
 * function(x, y, f1, f2) */
static int lcf1_end_2(lua_State *L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);

  /* if jsbool_equal_p(f1(x), f1(y)) and jsbool_equal_p(f2(x), f2(y)) then */
  enum { lc375 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
  const int lc376 = lua_gettop(L);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc376), 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 3);
    const int lc377 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    lua_pushvalue(L, 4);
    lua_pushvalue(L, 2);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc377), 1);
  }
  const int lc378 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc378) {

    /* lang_set_do(x, y) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
    lua_pushvalue(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 4);

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 4);
  } else {

    /* else
     * return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc375);
  assert(lua_gettop(L) == 4);
  return 0;
}

/* name: jsbool_equal_p
 * function(x, y) */
static int lcf1_jsbool_equal_p(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* if x == y then */
  enum { lc369 = 2 };
  const int lc370 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc370);
  const int lc371 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc371) {

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc369);
  assert(lua_gettop(L) == 2);

  /* x = force_all(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 18);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 2);

  /* y = force_all(y) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 18);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 2);

  /* if x == y then */
  enum { lc372 = 2 };
  const int lc373 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc373);
  const int lc374 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc374) {

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc372);
  assert(lua_gettop(L) == 2);

  /* local end_2 */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);

  /* end_2 = function(x, y, f1, f2)
   *         if jsbool_equal_p(f1(x), f1(y)) and jsbool_equal_p(f2(x), f2(y))
   * then
   *             lang_set_do(x, y);
   *             return true;
   *         else
   *             return false;
   *         end
   *     end */
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf1_end_2, 1);
  lua_replace(L, 3);
  assert(lua_gettop(L) == 3);

  /* if null_p(x) then */
  enum { lc379 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc380 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc380) {

    /* if not null_p(y) then */
    enum { lc381 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc382 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc382) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc381);
    assert(lua_gettop(L) == 3);

    /* lang_set_do(x, null_v) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
    lua_pushvalue(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 79);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* lang_set_do(y, null_v) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 69);
    lua_pushvalue(L, 2);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 79);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 3);
  } else {

    /* elseif symbol_p(x) then */
    enum { lc383 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 85);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    const int lc384 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc384) {

      /* if not symbol_p(y) then */
      enum { lc385 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 85);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc386 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc386) {

        /* return false */
        lua_pushboolean(L, 0);
        return 1;
        assert(lua_gettop(L) == 3);
      }
      lua_settop(L, lc385);
      assert(lua_gettop(L) == 3);

      /* return symbol_equal_p(x, y) */
      const int lc387 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 23);
      lua_pushvalue(L, 1);
      lua_pushvalue(L, 2);
      lua_call(L, 2, LUA_MULTRET);
      return (lua_gettop(L) - lc387);
      assert(lua_gettop(L) == 3);
    } else {

      /* elseif construction_p(x) then */
      enum { lc388 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
      lua_pushvalue(L, 1);
      lua_call(L, 1, 1);
      const int lc389 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc389) {

        /* if not construction_p(y) then */
        enum { lc390 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
        lua_pushvalue(L, 2);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc391 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc391) {

          /* return false */
          lua_pushboolean(L, 0);
          return 1;
          assert(lua_gettop(L) == 3);
        }
        lua_settop(L, lc390);
        assert(lua_gettop(L) == 3);

        /* return end_2(x, y, construction_head, construction_tail) */
        const int lc392 = lua_gettop(L);
        lua_pushvalue(L, 3);
        lua_pushvalue(L, 1);
        lua_pushvalue(L, 2);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 81);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 80);
        lua_call(L, 4, LUA_MULTRET);
        return (lua_gettop(L) - lc392);
        assert(lua_gettop(L) == 3);
      } else {

        /* elseif error_p(x) then */
        enum { lc393 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 72);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        const int lc394 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc394) {

          /* if not error_p(y) then */
          enum { lc395 = 3 };
          lc_getupvalue(L, lua_upvalueindex(1), 0, 72);
          lua_pushvalue(L, 2);
          lua_call(L, 1, 1);
          lua_pushboolean(L, !(lua_toboolean(L, -1)));
          lua_remove(L, -2);
          const int lc396 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc396) {

            /* return false */
            lua_pushboolean(L, 0);
            return 1;
            assert(lua_gettop(L) == 3);
          }
          lua_settop(L, lc395);
          assert(lua_gettop(L) == 3);

          /* return end_2(x, y, error_name, error_list) */
          const int lc397 = lua_gettop(L);
          lua_pushvalue(L, 3);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 2);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 71);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 70);
          lua_call(L, 4, LUA_MULTRET);
          return (lua_gettop(L) - lc397);
          assert(lua_gettop(L) == 3);
        } else {

          /* elseif data_p(x) then */
          enum { lc398 = 3 };
          lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
          lua_pushvalue(L, 1);
          lua_call(L, 1, 1);
          const int lc399 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc399) {

            /* if not data_p(y) then */
            enum { lc400 = 3 };
            lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
            lua_pushvalue(L, 2);
            lua_call(L, 1, 1);
            lua_pushboolean(L, !(lua_toboolean(L, -1)));
            lua_remove(L, -2);
            const int lc401 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc401) {

              /* return false */
              lua_pushboolean(L, 0);
              return 1;
              assert(lua_gettop(L) == 3);
            }
            lua_settop(L, lc400);
            assert(lua_gettop(L) == 3);

            /* return end_2(x, y, data_name, data_list) */
            const int lc402 = lua_gettop(L);
            lua_pushvalue(L, 3);
            lua_pushvalue(L, 1);
            lua_pushvalue(L, 2);
            lc_getupvalue(L, lua_upvalueindex(1), 0, 75);
            lc_getupvalue(L, lua_upvalueindex(1), 0, 74);
            lua_call(L, 4, LUA_MULTRET);
            return (lua_gettop(L) - lc402);
            assert(lua_gettop(L) == 3);
          }
          lua_settop(L, lc398);
        }
        lua_settop(L, lc393);
      }
      lua_settop(L, lc388);
    }
    lua_settop(L, lc383);
  }
  lua_settop(L, lc379);
  assert(lua_gettop(L) == 3);

  /* return ERROR() */
  const int lc403 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc403);
  assert(lua_gettop(L) == 3);
}

/* name: simple_print
 * function(x) */
static int lcf1_simple_print(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* x = un_just_all(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 20);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 1);

  /* local temp = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 2);

  /* local prefix = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 3);

  /* if null_p(x) then */
  enum { lc404 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc405 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc405) {

    /* return "()" */
    lua_pushliteral(L, "()");
    return 1;
    assert(lua_gettop(L) == 3);
  } else {

    /* elseif construction_p(x) then */
    enum { lc406 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    const int lc407 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc407) {

      /* temp = "(" */
      lua_pushliteral(L, "(");
      lua_replace(L, 2);
      assert(lua_gettop(L) == 3);

      /* prefix = "" */
      lua_pushliteral(L, "");
      lua_replace(L, 3);
      assert(lua_gettop(L) == 3);

      /* while construction_p(x) do */
      enum { lc408 = 3 };
      while (1) {
        lc_getupvalue(L, lua_upvalueindex(1), 0, 82);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        if (!(lua_toboolean(L, -1))) {
          break;
        }
        lua_pop(L, 1);

        /* temp = temp .. (prefix .. simple_print(construction_head(x))) */
        lua_pushvalue(L, 2);
        lua_pushvalue(L, 3);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
        const int lc409 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 81);
        lua_pushvalue(L, 1);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc409), 1);
        lua_concat(L, 2);
        lua_concat(L, 2);
        lua_replace(L, 2);
        assert(lua_gettop(L) == 3);

        /* prefix = " " */
        lua_pushliteral(L, " ");
        lua_replace(L, 3);
        assert(lua_gettop(L) == 3);

        /* x = un_just_all(construction_tail(x)) */
        lc_getupvalue(L, lua_upvalueindex(1), 0, 20);
        const int lc410 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 80);
        lua_pushvalue(L, 1);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc410), 1);
        lua_replace(L, 1);
        assert(lua_gettop(L) == 3);
      }
      lua_settop(L, lc408);
      assert(lua_gettop(L) == 3);

      /* if null_p(x) then */
      enum { lc411 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 78);
      lua_pushvalue(L, 1);
      lua_call(L, 1, 1);
      const int lc412 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc412) {

        /* temp = temp .. ")" */
        lua_pushvalue(L, 2);
        lua_pushliteral(L, ")");
        lua_concat(L, 2);
        lua_replace(L, 2);
        assert(lua_gettop(L) == 3);
      } else {

        /* else
         * temp = temp .. ((" . " .. simple_print(x)) .. ")") */
        lua_pushvalue(L, 2);
        lua_pushliteral(L, " . ");
        lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        lua_concat(L, 2);
        lua_pushliteral(L, ")");
        lua_concat(L, 2);
        lua_concat(L, 2);
        lua_replace(L, 2);
        assert(lua_gettop(L) == 3);
      }
      lua_settop(L, lc411);
      assert(lua_gettop(L) == 3);

      /* return temp */
      lua_pushvalue(L, 2);
      return 1;
      assert(lua_gettop(L) == 3);
    } else {

      /* elseif data_p(x) then */
      enum { lc413 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 0, 76);
      lua_pushvalue(L, 1);
      lua_call(L, 1, 1);
      const int lc414 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc414) {

        /* return "#" .. simple_print(new_construction(data_name(x),
         * data_list(x))) */
        lua_pushliteral(L, "#");
        lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
        const int lc415 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 83);
        const int lc416 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 75);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        lc_getupvalue(L, lua_upvalueindex(1), 0, 74);
        lua_pushvalue(L, 1);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc416), LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc415), 1);
        lua_concat(L, 2);
        return 1;
        assert(lua_gettop(L) == 3);
      } else {

        /* elseif error_p(x) then */
        enum { lc417 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 0, 72);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        const int lc418 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc418) {

          /* return "!" .. simple_print(new_construction(error_name(x),
           * error_list(x))) */
          lua_pushliteral(L, "!");
          lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
          const int lc419 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 83);
          const int lc420 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 71);
          lua_pushvalue(L, 1);
          lua_call(L, 1, 1);
          lc_getupvalue(L, lua_upvalueindex(1), 0, 70);
          lua_pushvalue(L, 1);
          lua_call(L, 1, LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc420), LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc419), 1);
          lua_concat(L, 2);
          return 1;
          assert(lua_gettop(L) == 3);
        } else {

          /* elseif symbol_p(x) then */
          enum { lc421 = 3 };
          lc_getupvalue(L, lua_upvalueindex(1), 0, 85);
          lua_pushvalue(L, 1);
          lua_call(L, 1, 1);
          const int lc422 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc422) {

            /* return un_symbol(x) */
            const int lc423 = lua_gettop(L);
            lc_getupvalue(L, lua_upvalueindex(1), 0, 84);
            lua_pushvalue(L, 1);
            lua_call(L, 1, LUA_MULTRET);
            return (lua_gettop(L) - lc423);
            assert(lua_gettop(L) == 3);
          } else {

            /* elseif delay_evaluate_p(x) then */
            enum { lc424 = 3 };
            lc_getupvalue(L, lua_upvalueindex(1), 0, 65);
            lua_pushvalue(L, 1);
            lua_call(L, 1, 1);
            const int lc425 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc425) {

              /* return ((("$(" .. simple_print(env2val(delay_evaluate_env(x))))
               * .. " ") .. simple_print(delay_evaluate_x(x))) .. ")" */
              lua_pushliteral(L, "$(");
              lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
              const int lc426 = lua_gettop(L);
              lc_getupvalue(L, lua_upvalueindex(1), 0, 12);
              const int lc427 = lua_gettop(L);
              lc_getupvalue(L, lua_upvalueindex(1), 0, 64);
              lua_pushvalue(L, 1);
              lua_call(L, 1, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc427), LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc426), 1);
              lua_concat(L, 2);
              lua_pushliteral(L, " ");
              lua_concat(L, 2);
              lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
              const int lc428 = lua_gettop(L);
              lc_getupvalue(L, lua_upvalueindex(1), 0, 63);
              lua_pushvalue(L, 1);
              lua_call(L, 1, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc428), 1);
              lua_concat(L, 2);
              lua_pushliteral(L, ")");
              lua_concat(L, 2);
              return 1;
              assert(lua_gettop(L) == 3);
            } else {

              /* elseif delay_builtin_func_p(x) then */
              enum { lc429 = 3 };
              lc_getupvalue(L, lua_upvalueindex(1), 0, 56);
              lua_pushvalue(L, 1);
              lua_call(L, 1, 1);
              const int lc430 = lua_toboolean(L, -1);
              lua_pop(L, 1);
              if (lc430) {

                /* return ((("%(" .. simple_print(delay_builtin_func_f(x))) .. "
                 * ") ..
                 * simple_print(jsArray_to_list(delay_builtin_func_xs(x)))) ..
                 * ")" */
                lua_pushliteral(L, "%(");
                lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                const int lc431 = lua_gettop(L);
                lc_getupvalue(L, lua_upvalueindex(1), 0, 55);
                lua_pushvalue(L, 1);
                lua_call(L, 1, LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc431), 1);
                lua_concat(L, 2);
                lua_pushliteral(L, " ");
                lua_concat(L, 2);
                lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                const int lc432 = lua_gettop(L);
                lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
                const int lc433 = lua_gettop(L);
                lc_getupvalue(L, lua_upvalueindex(1), 0, 54);
                lua_pushvalue(L, 1);
                lua_call(L, 1, LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc433), LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc432), 1);
                lua_concat(L, 2);
                lua_pushliteral(L, ")");
                lua_concat(L, 2);
                return 1;
                assert(lua_gettop(L) == 3);
              } else {

                /* elseif delay_builtin_form_p(x) then */
                enum { lc434 = 3 };
                lc_getupvalue(L, lua_upvalueindex(1), 0, 61);
                lua_pushvalue(L, 1);
                lua_call(L, 1, 1);
                const int lc435 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc435) {

                  /* return ((((("@(" ..
                   * simple_print(env2val(delay_builtin_form_env(x)))) .. " ")
                   * .. simple_print(delay_builtin_form_f(x))) .. " ") ..
                   * simple_print(jsArray_to_list(delay_builtin_form_xs(x)))) ..
                   * ")" */
                  lua_pushliteral(L, "@(");
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                  const int lc436 = lua_gettop(L);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 12);
                  const int lc437 = lua_gettop(L);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 60);
                  lua_pushvalue(L, 1);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc437), LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc436), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, " ");
                  lua_concat(L, 2);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                  const int lc438 = lua_gettop(L);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 59);
                  lua_pushvalue(L, 1);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc438), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, " ");
                  lua_concat(L, 2);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                  const int lc439 = lua_gettop(L);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
                  const int lc440 = lua_gettop(L);
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 58);
                  lua_pushvalue(L, 1);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc440), LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc439), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, ")");
                  lua_concat(L, 2);
                  return 1;
                  assert(lua_gettop(L) == 3);
                } else {

                  /* elseif delay_apply_p(x) then */
                  enum { lc441 = 3 };
                  lc_getupvalue(L, lua_upvalueindex(1), 0, 52);
                  lua_pushvalue(L, 1);
                  lua_call(L, 1, 1);
                  const int lc442 = lua_toboolean(L, -1);
                  lua_pop(L, 1);
                  if (lc442) {

                    /* return ((("^(" .. simple_print(delay_apply_f(x))) .. " ")
                     * .. simple_print(jsArray_to_list(delay_apply_xs(x)))) ..
                     * ")" */
                    lua_pushliteral(L, "^(");
                    lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                    const int lc443 = lua_gettop(L);
                    lc_getupvalue(L, lua_upvalueindex(1), 0, 51);
                    lua_pushvalue(L, 1);
                    lua_call(L, 1, LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc443), 1);
                    lua_concat(L, 2);
                    lua_pushliteral(L, " ");
                    lua_concat(L, 2);
                    lc_getupvalue(L, lua_upvalueindex(1), 0, 2);
                    const int lc444 = lua_gettop(L);
                    lc_getupvalue(L, lua_upvalueindex(1), 0, 22);
                    const int lc445 = lua_gettop(L);
                    lc_getupvalue(L, lua_upvalueindex(1), 0, 50);
                    lua_pushvalue(L, 1);
                    lua_call(L, 1, LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc445), LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc444), 1);
                    lua_concat(L, 2);
                    lua_pushliteral(L, ")");
                    lua_concat(L, 2);
                    return 1;
                    assert(lua_gettop(L) == 3);
                  }
                  lua_settop(L, lc441);
                }
                lua_settop(L, lc434);
              }
              lua_settop(L, lc429);
            }
            lua_settop(L, lc424);
          }
          lua_settop(L, lc421);
        }
        lua_settop(L, lc417);
      }
      lua_settop(L, lc413);
    }
    lua_settop(L, lc406);
  }
  lua_settop(L, lc404);
  assert(lua_gettop(L) == 3);

  /* return ERROR() */
  const int lc446 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc446);
  assert(lua_gettop(L) == 3);
}

/* name: new_symbol
 * function(x) */
static int lcf1_new_symbol(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return {symbol_t, x} */
  lua_createtable(L, 2, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 112);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 2);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: systemName_make
 * function(x) */
static int lcf1_systemName_make(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return new_data(name_symbol, new_list(system_symbol, x)) */
  const int lc459 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 77);
  const int lc460 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 8, 114);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 48);
  lua_pushvalue(L, 1);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc460), LUA_MULTRET);
  return (lua_gettop(L) - lc459);
  assert(lua_gettop(L) == 1);
}

/* name: make_builtin_f_new_sym_f
 * function(x_sym) */
static int lcf1_make_builtin_f_new_sym_f(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return systemName_make(new_list(typeAnnotation_symbol,
   * new_list(function_symbol, something_symbol, x_sym), theThing_symbol)) */
  const int lc461 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 122);
  const int lc462 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 5, 117);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 47);
  lc_getupvalue(L, lua_upvalueindex(1), 6, 116);
  lua_pushvalue(L, 1);
  lua_call(L, 3, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 7, 115);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc462), LUA_MULTRET);
  return (lua_gettop(L) - lc461);
  assert(lua_gettop(L) == 1);
}

/* name: make_builtin_f_get_sym_f
 * function(t_sym, x_sym) */
static int lcf1_make_builtin_f_get_sym_f(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return systemName_make(new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_list(t_sym), something_symbol), x_sym)) */
  const int lc463 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 122);
  const int lc464 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 5, 117);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 47);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 6, 116);
  lua_call(L, 3, 1);
  lua_pushvalue(L, 2);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc464), LUA_MULTRET);
  return (lua_gettop(L) - lc463);
  assert(lua_gettop(L) == 2);
}

/* name: make_builtin_f_p_sym_f
 * function(t_sym) */
static int lcf1_make_builtin_f_p_sym_f(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return systemName_make(new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, new_list(typeAnnotation_symbol, t_sym,
   * something_symbol)))) */
  const int lc465 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 122);
  const int lc466 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  const int lc467 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 5, 117);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 47);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  const int lc468 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 4, 118);
  lc_getupvalue(L, lua_upvalueindex(1), 11, 21);
  lc_getupvalue(L, lua_upvalueindex(1), 5, 117);
  lua_pushvalue(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 6, 116);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc468), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc467), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc466), LUA_MULTRET);
  return (lua_gettop(L) - lc465);
  assert(lua_gettop(L) == 1);
}

/* name: list_to_jsArray
 * function(xs, k_done, k_tail) */
static int lcf1_list_to_jsArray(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local ret = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 4);

  /* while construction_p(xs) do */
  enum { lc489 = 4 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 15, 82);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* __TS__ArrayPush(ret, construction_head(xs)) */
    lc_getupvalue(L, lua_upvalueindex(1), 16, 1);
    const int lc490 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lc_getupvalue(L, lua_upvalueindex(1), 15, 81);
    lua_pushvalue(L, 1);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc490), 0);
    assert(lua_gettop(L) == 4);

    /* xs = construction_tail(xs) */
    lc_getupvalue(L, lua_upvalueindex(1), 15, 80);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc489);
  assert(lua_gettop(L) == 4);

  /* if null_p(xs) then */
  enum { lc491 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 15, 78);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc492 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc492) {

    /* return k_done(ret) */
    const int lc493 = lua_gettop(L);
    lua_pushvalue(L, 2);
    lua_pushvalue(L, 4);
    lua_call(L, 1, LUA_MULTRET);
    return (lua_gettop(L) - lc493);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc491);
  assert(lua_gettop(L) == 4);

  /* return k_tail(ret, xs) */
  const int lc494 = lua_gettop(L);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 4);
  lua_pushvalue(L, 1);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc494);
  assert(lua_gettop(L) == 4);
}

/* function(xs) */
static int lcf497(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, x) */
static int lcf498(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return false */
  lua_pushboolean(L, 0);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: maybe_list_to_jsArray
 * function(xs) */
static int lcf1_maybe_list_to_jsArray(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return list_to_jsArray(xs, function(xs)
   *         return xs;
   *     end, function(xs, x)
   *         return false;
   *     end) */
  const int lc496 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 126);
  lua_pushvalue(L, 1);
  lua_pushcfunction(L, lcf497);
  lua_pushcfunction(L, lcf498);
  lua_call(L, 3, LUA_MULTRET);
  return (lua_gettop(L) - lc496);
  assert(lua_gettop(L) == 1);
}

/* name: val2env
 * function(x) */
static int lcf1_val2env(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* x = force_all(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 1);

  /* if not data_p(x) then */
  enum { lc500 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 76);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc501 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc501) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc500);
  assert(lua_gettop(L) == 1);

  /* local s = force_all(data_name(x)) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  const int lc502 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 75);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc502), 1);
  assert(lua_gettop(L) == 2);

  /* if not symbol_p(s) then */
  enum { lc503 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 85);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc504 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc504) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc503);
  assert(lua_gettop(L) == 2);

  /* if not symbol_equal_p(s, mapping_symbol) then */
  enum { lc505 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 23);
  lua_pushvalue(L, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 45);
  lua_call(L, 2, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc506 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc506) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc505);
  assert(lua_gettop(L) == 2);

  /* s = force_all(data_list(x)) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  const int lc507 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 74);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc507), 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(s) then */
  enum { lc508 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc509 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc509) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc508);
  assert(lua_gettop(L) == 2);

  /* if not null_p(force_all(construction_tail(s))) then */
  enum { lc510 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 78);
  const int lc511 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  const int lc512 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc512), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc511), 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc513 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc513) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc510);
  assert(lua_gettop(L) == 2);

  /* local ret = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 3);

  /* local xs = force_all(construction_head(s)) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  const int lc514 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc514), 1);
  assert(lua_gettop(L) == 4);

  /* while not null_p(xs) do */
  enum { lc515 = 4 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 17, 78);
    lua_pushvalue(L, 4);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if not construction_p(xs) then */
    enum { lc516 = 4 };
    lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
    lua_pushvalue(L, 4);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc517 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc517) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L, lc516);
    assert(lua_gettop(L) == 4);

    /* local x = force_all(construction_head(xs)) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
    const int lc518 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
    lua_pushvalue(L, 4);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc518), 1);
    assert(lua_gettop(L) == 5);

    /* xs = force_all(construction_tail(xs)) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
    const int lc519 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 80);
    lua_pushvalue(L, 4);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc519), 1);
    lua_replace(L, 4);
    assert(lua_gettop(L) == 5);

    /* if not construction_p(x) then */
    enum { lc520 = 5 };
    lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
    lua_pushvalue(L, 5);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc521 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc521) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc520);
    assert(lua_gettop(L) == 5);

    /* local k = construction_head(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
    lua_pushvalue(L, 5);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 6);

    /* x = force_all(construction_tail(x)) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
    const int lc522 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 80);
    lua_pushvalue(L, 5);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc522), 1);
    lua_replace(L, 5);
    assert(lua_gettop(L) == 6);

    /* if not construction_p(x) then */
    enum { lc523 = 6 };
    lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
    lua_pushvalue(L, 5);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc524 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc524) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc523);
    assert(lua_gettop(L) == 6);

    /* local v = construction_head(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
    lua_pushvalue(L, 5);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 7);

    /* if not null_p(force_all(construction_tail(x))) then */
    enum { lc525 = 7 };
    lc_getupvalue(L, lua_upvalueindex(1), 17, 78);
    const int lc526 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
    const int lc527 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 80);
    lua_pushvalue(L, 5);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc527), LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc526), 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc528 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc528) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 7);
    }
    lua_settop(L, lc525);
    assert(lua_gettop(L) == 7);

    /* local not_breaked = true */
    lua_pushboolean(L, 1);
    assert(lua_gettop(L) == 8);

    /* do
     * local i = 0 */
    lua_pushnumber(L, 0);
    assert(lua_gettop(L) == 9);

    /* while i < (#ret) do */
    enum { lc529 = 9 };
    while (1) {
      const double lc530 = lua_objlen(L, 3);
      lua_pushnumber(L, lc530);
      const int lc531 = lua_lessthan(L, 9, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc531);
      if (!(lua_toboolean(L, -1))) {
        break;
      }
      lua_pop(L, 1);

      /* if jsbool_equal_p(ret[(i + 0) + 1], k) then */
      enum { lc532 = 9 };
      lc_getupvalue(L, lua_upvalueindex(1), 17, 3);
      lua_pushnumber(L, 0);
      lc_add(L, 9, -1);
      lua_remove(L, -2);
      lua_pushnumber(L, 1);
      lc_add(L, -2, -1);
      lua_remove(L, -2);
      lua_remove(L, -2);
      lua_gettable(L, 3);
      lua_pushvalue(L, 6);
      lua_call(L, 2, 1);
      const int lc533 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc533) {

        /* ret[(i + 1) + 1] = v */
        lua_pushvalue(L, 7);
        lua_pushnumber(L, 1);
        lc_add(L, 9, -1);
        lua_remove(L, -2);
        lua_pushnumber(L, 1);
        lc_add(L, -2, -1);
        lua_remove(L, -2);
        lua_remove(L, -2);
        lua_insert(L, -2);
        lua_settable(L, 3);
        assert(lua_gettop(L) == 9);

        /* not_breaked = false */
        lua_pushboolean(L, 0);
        lua_replace(L, 8);
        assert(lua_gettop(L) == 9);

        /* break */
        break;
        assert(lua_gettop(L) == 9);
      }
      lua_settop(L, lc532);
      assert(lua_gettop(L) == 9);

      /* i = i + 2 */
      lua_pushnumber(L, 2);
      lc_add(L, 9, -1);
      lua_remove(L, -2);
      lua_replace(L, 9);
      assert(lua_gettop(L) == 9);
    }
    lua_settop(L, lc529);
    assert(lua_gettop(L) == 9);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
    assert(lua_gettop(L) == 8);

    /* if not_breaked then */
    enum { lc534 = 8 };
    if (lua_toboolean(L, 8)) {

      /* __TS__ArrayPush(ret, k) */
      lc_getupvalue(L, lua_upvalueindex(1), 18, 1);
      lua_pushvalue(L, 3);
      lua_pushvalue(L, 6);
      lua_call(L, 2, 0);
      assert(lua_gettop(L) == 8);

      /* __TS__ArrayPush(ret, v) */
      lc_getupvalue(L, lua_upvalueindex(1), 18, 1);
      lua_pushvalue(L, 3);
      lua_pushvalue(L, 7);
      lua_call(L, 2, 0);
      assert(lua_gettop(L) == 8);
    }
    lua_settop(L, lc534);
    assert(lua_gettop(L) == 8);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 4);
  }
  lua_settop(L, lc515);
  assert(lua_gettop(L) == 4);

  /* return ret */
  lua_pushvalue(L, 3);
  return 1;
  assert(lua_gettop(L) == 4);
}

/* function(x, error_v) */
static int lcf541(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* x = force1(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 18, 17);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 2);

  /* if any_delay_just_p(x) then */
  enum { lc536 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 18, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc537 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc537) {

    /* return builtin_func_apply(p_sym, {x}) */
    const int lc538 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 18, 57);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 129);
    lua_createtable(L, 1, 0);
    lua_pushvalue(L, 1);
    lua_rawseti(L, -2, 1);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc538);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc536);
  assert(lua_gettop(L) == 2);

  /* if p_jsfunc(x) then */
  enum { lc539 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 130);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc540 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc540) {

    /* return true_v */
    lc_getupvalue(L, lua_upvalueindex(1), 4, 125);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc539);
  assert(lua_gettop(L) == 2);

  /* return false_v */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 124);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: make_builtin_p_func
 * function(p_sym, p_jsfunc) */
static int lcf1_make_builtin_p_func(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc535 = 3 };
  assert((lua_gettop(L) == lc535));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 129);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 130);

  /* return {p_sym, 1, function(x, error_v)
   *         x = force1(x);
   *         if any_delay_just_p(x) then
   *             return builtin_func_apply(p_sym, {x});
   *         end
   *         if p_jsfunc(x) then
   *             return true_v;
   *         end
   *         return false_v;
   *     end} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lc535, 0, 129);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, lc535);
  lua_pushcclosure(L, lcf541, 1);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* function(x, error_v) */
static int lcf549(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* x = force1(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 18, 17);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 2);

  /* if any_delay_just_p(x) then */
  enum { lc543 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 18, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc544 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc544) {

    /* return builtin_func_apply(f_sym, {x}) */
    const int lc545 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 18, 57);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 131);
    lua_createtable(L, 1, 0);
    lua_pushvalue(L, 1);
    lua_rawseti(L, -2, 1);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc545);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc543);
  assert(lua_gettop(L) == 2);

  /* if p_jsfunc(x) then */
  enum { lc546 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 132);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc547 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc547) {

    /* return f_jsfunc(x) */
    const int lc548 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 133);
    lua_pushvalue(L, 1);
    lua_call(L, 1, LUA_MULTRET);
    return (lua_gettop(L) - lc548);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc546);
  assert(lua_gettop(L) == 2);

  /* return error_v */
  lua_pushvalue(L, 2);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: make_builtin_get_func
 * function(f_sym, p_jsfunc, f_jsfunc) */
static int lcf1_make_builtin_get_func(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc542 = 4 };
  assert((lua_gettop(L) == lc542));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 131);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 132);
  lua_pushvalue(L, 3);
  lua_rawseti(L, -2, 133);

  /* return {f_sym, 1, function(x, error_v)
   *         x = force1(x);
   *         if any_delay_just_p(x) then
   *             return builtin_func_apply(f_sym, {x});
   *         end
   *         if p_jsfunc(x) then
   *             return f_jsfunc(x);
   *         end
   *         return error_v;
   *     end} */
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, lc542, 0, 131);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, lc542);
  lua_pushcclosure(L, lcf549, 1);
  lua_rawseti(L, -2, 3);
  return 1;
  assert(lua_gettop(L) == 4);
}

/* name: H_if
 * function(b, x, y) */
static int lcf1_H_if(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* return builtin_func_apply(if_function_builtin_systemName, {b, x, y}) */
  const int lc560 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 57);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 29);
  lua_createtable(L, 3, 0);
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 1);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, 3);
  lua_rawseti(L, -2, 3);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc560);
  assert(lua_gettop(L) == 3);
}

/* name: H_and
 * function(x, y) */
static int lcf1_H_and(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return H_if(x, y, false_v) */
  const int lc562 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 134);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 6, 124);
  lua_call(L, 3, LUA_MULTRET);
  return (lua_gettop(L) - lc562);
  assert(lua_gettop(L) == 2);
}

/* name: end_2
 * function(x, y, f1, f2) */
static int lcf2_end_2(lua_State *L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);

  /* return H_and(builtin_func_apply(equal_p_function_builtin_systemName,
   * {f1(x), f1(y)}), builtin_func_apply(equal_p_function_builtin_systemName,
   * {f2(x), f2(y)})) */
  const int lc563 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 135);
  const int lc564 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 19, 57);
  lc_getupvalue(L, lua_upvalueindex(1), 19, 32);
  lua_createtable(L, 2, 0);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_rawseti(L, -2, 1);
  const int lc565 = lua_gettop(L);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  while ((lua_gettop(L) > lc565)) {
    lua_rawseti(L, lc565, (1 + (lua_gettop(L) - lc565)));
  }
  lua_call(L, 2, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 19, 57);
  lc_getupvalue(L, lua_upvalueindex(1), 19, 32);
  lua_createtable(L, 2, 0);
  lua_pushvalue(L, 4);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_rawseti(L, -2, 1);
  const int lc566 = lua_gettop(L);
  lua_pushvalue(L, 4);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  while ((lua_gettop(L) > lc566)) {
    lua_rawseti(L, lc566, (1 + (lua_gettop(L) - lc566)));
  }
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc564), LUA_MULTRET);
  return (lua_gettop(L) - lc563);
  assert(lua_gettop(L) == 4);
}

/* function(x, y, error_v) */
static int lcf591(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* if x == y then */
  enum { lc550 = 3 };
  const int lc551 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc551);
  const int lc552 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc552) {

    /* return true_v */
    lc_getupvalue(L, lua_upvalueindex(1), 3, 125);
    return 1;
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc550);
  assert(lua_gettop(L) == 3);

  /* x = force1(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 17);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 3);

  /* y = force1(y) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 17);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 3);

  /* if any_delay_just_p(x) or any_delay_just_p(y) then */
  enum { lc553 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 19);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
  }
  const int lc554 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc554) {

    /* return builtin_func_apply(equal_p_function_builtin_systemName, {x, y}) */
    const int lc555 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 57);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 32);
    lua_createtable(L, 2, 0);
    lua_pushvalue(L, 1);
    lua_rawseti(L, -2, 1);
    lua_pushvalue(L, 2);
    lua_rawseti(L, -2, 2);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc555);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc553);
  assert(lua_gettop(L) == 3);

  /* if x == y then */
  enum { lc556 = 3 };
  const int lc557 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc557);
  const int lc558 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc558) {

    /* return true_v */
    lc_getupvalue(L, lua_upvalueindex(1), 3, 125);
    return 1;
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc556);
  assert(lua_gettop(L) == 3);

  /* local H_if */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc559 = 4 };
  assert((lua_gettop(L) == lc559));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, lc559, 134);
  assert(lua_gettop(L) == 4);

  /* H_if = function(b, x, y)
   *         return builtin_func_apply(if_function_builtin_systemName, {b, x,
   * y});
   *     end */
  lua_pushvalue(L, lc559);
  lua_pushcclosure(L, lcf1_H_if, 1);
  lc_setupvalue(L, lc559, 0, 134);
  assert(lua_gettop(L) == 4);

  /* local H_and */
  lc_newclosuretable(L, lc559);
  enum { lc561 = 5 };
  assert((lua_gettop(L) == lc561));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, lc561, 135);
  assert(lua_gettop(L) == 5);

  /* H_and = function(x, y)
   *         return H_if(x, y, false_v);
   *     end */
  lua_pushvalue(L, lc561);
  lua_pushcclosure(L, lcf1_H_and, 1);
  lc_setupvalue(L, lc561, 0, 135);
  assert(lua_gettop(L) == 5);

  /* ASSERT(not any_delay_just_p(x)) */
  lc_getupvalue(L, lc561, 19, 95);
  lc_getupvalue(L, lc561, 19, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 5);

  /* local end_2 */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 6);

  /* end_2 = function(x, y, f1, f2)
   *         return
   * H_and(builtin_func_apply(equal_p_function_builtin_systemName, {f1(x),
   * f1(y)}), builtin_func_apply(equal_p_function_builtin_systemName, {f2(x),
   * f2(y)}));
   *     end */
  lua_pushvalue(L, lc561);
  lua_pushcclosure(L, lcf2_end_2, 1);
  lua_replace(L, 6);
  assert(lua_gettop(L) == 6);

  /* if null_p(x) then */
  enum { lc567 = 6 };
  lc_getupvalue(L, lc561, 19, 78);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc568 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc568) {

    /* if not null_p(x) then */
    enum { lc569 = 6 };
    lc_getupvalue(L, lc561, 19, 78);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc570 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc570) {

      /* return false_v */
      lc_getupvalue(L, lc561, 6, 124);
      return 1;
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc569);
    assert(lua_gettop(L) == 6);

    /* return true_v */
    lc_getupvalue(L, lc561, 5, 125);
    return 1;
    assert(lua_gettop(L) == 6);
  } else {

    /* elseif symbol_p(x) then */
    enum { lc571 = 6 };
    lc_getupvalue(L, lc561, 19, 85);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    const int lc572 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc572) {

      /* if not symbol_p(y) then */
      enum { lc573 = 6 };
      lc_getupvalue(L, lc561, 19, 85);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc574 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc574) {

        /* return false_v */
        lc_getupvalue(L, lc561, 6, 124);
        return 1;
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc573);
      assert(lua_gettop(L) == 6);

      /* return (symbol_equal_p(x, y) and true_v) or false_v */
      lc_getupvalue(L, lc561, 19, 23);
      lua_pushvalue(L, 1);
      lua_pushvalue(L, 2);
      lua_call(L, 2, 1);
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc561, 5, 125);
      }
      if (!(lua_toboolean(L, -1))) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc561, 6, 124);
      }
      return 1;
      assert(lua_gettop(L) == 6);
    } else {

      /* elseif data_p(x) then */
      enum { lc575 = 6 };
      lc_getupvalue(L, lc561, 19, 76);
      lua_pushvalue(L, 1);
      lua_call(L, 1, 1);
      const int lc576 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc576) {

        /* if not data_p(y) then */
        enum { lc577 = 6 };
        lc_getupvalue(L, lc561, 19, 76);
        lua_pushvalue(L, 2);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc578 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc578) {

          /* return false_v */
          lc_getupvalue(L, lc561, 6, 124);
          return 1;
          assert(lua_gettop(L) == 6);
        }
        lua_settop(L, lc577);
        assert(lua_gettop(L) == 6);

        /* return end_2(x, y, data_name, data_list) */
        const int lc579 = lua_gettop(L);
        lua_pushvalue(L, 6);
        lua_pushvalue(L, 1);
        lua_pushvalue(L, 2);
        lc_getupvalue(L, lc561, 19, 75);
        lc_getupvalue(L, lc561, 19, 74);
        lua_call(L, 4, LUA_MULTRET);
        return (lua_gettop(L) - lc579);
        assert(lua_gettop(L) == 6);
      } else {

        /* elseif construction_p(x) then */
        enum { lc580 = 6 };
        lc_getupvalue(L, lc561, 19, 82);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        const int lc581 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc581) {

          /* if not construction_p(y) then */
          enum { lc582 = 6 };
          lc_getupvalue(L, lc561, 19, 82);
          lua_pushvalue(L, 2);
          lua_call(L, 1, 1);
          lua_pushboolean(L, !(lua_toboolean(L, -1)));
          lua_remove(L, -2);
          const int lc583 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc583) {

            /* return false_v */
            lc_getupvalue(L, lc561, 6, 124);
            return 1;
            assert(lua_gettop(L) == 6);
          }
          lua_settop(L, lc582);
          assert(lua_gettop(L) == 6);

          /* return end_2(x, y, construction_head, construction_tail) */
          const int lc584 = lua_gettop(L);
          lua_pushvalue(L, 6);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 2);
          lc_getupvalue(L, lc561, 19, 81);
          lc_getupvalue(L, lc561, 19, 80);
          lua_call(L, 4, LUA_MULTRET);
          return (lua_gettop(L) - lc584);
          assert(lua_gettop(L) == 6);
        } else {

          /* elseif error_p(x) then */
          enum { lc585 = 6 };
          lc_getupvalue(L, lc561, 19, 72);
          lua_pushvalue(L, 1);
          lua_call(L, 1, 1);
          const int lc586 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc586) {

            /* if not error_p(y) then */
            enum { lc587 = 6 };
            lc_getupvalue(L, lc561, 19, 72);
            lua_pushvalue(L, 2);
            lua_call(L, 1, 1);
            lua_pushboolean(L, !(lua_toboolean(L, -1)));
            lua_remove(L, -2);
            const int lc588 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc588) {

              /* return false_v */
              lc_getupvalue(L, lc561, 6, 124);
              return 1;
              assert(lua_gettop(L) == 6);
            }
            lua_settop(L, lc587);
            assert(lua_gettop(L) == 6);

            /* return end_2(x, y, error_name, error_list) */
            const int lc589 = lua_gettop(L);
            lua_pushvalue(L, 6);
            lua_pushvalue(L, 1);
            lua_pushvalue(L, 2);
            lc_getupvalue(L, lc561, 19, 71);
            lc_getupvalue(L, lc561, 19, 70);
            lua_call(L, 4, LUA_MULTRET);
            return (lua_gettop(L) - lc589);
            assert(lua_gettop(L) == 6);
          }
          lua_settop(L, lc585);
        }
        lua_settop(L, lc580);
      }
      lua_settop(L, lc575);
    }
    lua_settop(L, lc571);
  }
  lua_settop(L, lc567);
  assert(lua_gettop(L) == 6);

  /* return ERROR() */
  const int lc590 = lua_gettop(L);
  lc_getupvalue(L, lc561, 19, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc590);
  assert(lua_gettop(L) == 6);
}

/* function(f, xs, error_v) */
static int lcf598(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local jslist = {} */
  lua_newtable(L);
  assert(lua_gettop(L) == 4);

  /* local iter = force_all(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 5);

  /* while construction_p(iter) do */
  enum { lc592 = 5 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
    lua_pushvalue(L, 5);
    lua_call(L, 1, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* __TS__ArrayPush(jslist, construction_head(iter)) */
    lc_getupvalue(L, lua_upvalueindex(1), 18, 1);
    const int lc593 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
    lua_pushvalue(L, 5);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc593), 0);
    assert(lua_gettop(L) == 5);

    /* iter = force_all(construction_tail(iter)) */
    lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
    const int lc594 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 80);
    lua_pushvalue(L, 5);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc594), 1);
    lua_replace(L, 5);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc592);
  assert(lua_gettop(L) == 5);

  /* if not null_p(iter) then */
  enum { lc595 = 5 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 78);
  lua_pushvalue(L, 5);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc596 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc596) {

    /* return error_v */
    lua_pushvalue(L, 3);
    return 1;
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc595);
  assert(lua_gettop(L) == 5);

  /* return apply(f, jslist) */
  const int lc597 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 53);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 4);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc597);
  assert(lua_gettop(L) == 5);
}

/* function(env, x, error_v) */
static int lcf603(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local maybeenv = val2env(env) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 128);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 4);

  /* if maybeenv == false then */
  enum { lc599 = 4 };
  lua_pushboolean(L, 0);
  const int lc600 = lua_equal(L, 4, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc600);
  const int lc601 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc601) {

    /* return error_v */
    lua_pushvalue(L, 3);
    return 1;
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc599);
  assert(lua_gettop(L) == 4);

  /* return evaluate(maybeenv, x) */
  const int lc602 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 66);
  lua_pushvalue(L, 4);
  lua_pushvalue(L, 2);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc602);
  assert(lua_gettop(L) == 4);
}

/* function(xs, error_v) */
static int lcf610(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* xs = force1(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 17);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 2);

  /* if any_delay_just_p(xs) then */
  enum { lc604 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc605 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc605) {

    /* return builtin_func_apply(list_chooseOne_function_builtin_systemName,
     * {xs}) */
    const int lc606 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 57);
    lc_getupvalue(L, lua_upvalueindex(1), 5, 123);
    lua_createtable(L, 1, 0);
    lua_pushvalue(L, 1);
    lua_rawseti(L, -2, 1);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc606);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc604);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc607 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 82);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc608 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc608) {

    /* return error_v */
    lua_pushvalue(L, 2);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc607);
  assert(lua_gettop(L) == 2);

  /* return construction_head(xs) */
  const int lc609 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 81);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc609);
  assert(lua_gettop(L) == 2);
}

/* function(b, x, y, error_v) */
static int lcf623(lua_State *L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);

  /* b = force1(b) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 17);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 4);

  /* if any_delay_just_p(b) then */
  enum { lc611 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 19);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc612 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc612) {

    /* return builtin_func_apply(if_function_builtin_systemName, {b, x, y}) */
    const int lc613 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 57);
    lc_getupvalue(L, lua_upvalueindex(1), 17, 29);
    lua_createtable(L, 3, 0);
    lua_pushvalue(L, 1);
    lua_rawseti(L, -2, 1);
    lua_pushvalue(L, 2);
    lua_rawseti(L, -2, 2);
    lua_pushvalue(L, 3);
    lua_rawseti(L, -2, 3);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc613);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc611);
  assert(lua_gettop(L) == 4);

  /* if not data_p(b) then */
  enum { lc614 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 76);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc615 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc615) {

    /* return error_v */
    lua_pushvalue(L, 4);
    return 1;
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc614);
  assert(lua_gettop(L) == 4);

  /* local nam = force_all(data_name(b)) */
  lc_getupvalue(L, lua_upvalueindex(1), 17, 18);
  const int lc616 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 17, 75);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc616), 1);
  assert(lua_gettop(L) == 5);

  /* if not symbol_p(nam) then */
  enum { lc617 = 5 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 85);
  lua_pushvalue(L, 5);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc618 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc618) {

    /* return error_v */
    lua_pushvalue(L, 4);
    return 1;
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc617);
  assert(lua_gettop(L) == 5);

  /* if symbol_equal_p(nam, true_symbol) then */
  enum { lc619 = 5 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 23);
  lua_pushvalue(L, 5);
  lc_getupvalue(L, lua_upvalueindex(1), 8, 120);
  lua_call(L, 2, 1);
  const int lc620 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc620) {

    /* return x */
    lua_pushvalue(L, 2);
    return 1;
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc619);
  assert(lua_gettop(L) == 5);

  /* if symbol_equal_p(nam, false_symbol) then */
  enum { lc621 = 5 };
  lc_getupvalue(L, lua_upvalueindex(1), 17, 23);
  lua_pushvalue(L, 5);
  lc_getupvalue(L, lua_upvalueindex(1), 7, 121);
  lua_call(L, 2, 1);
  const int lc622 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc622) {

    /* return y */
    lua_pushvalue(L, 3);
    return 1;
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc621);
  assert(lua_gettop(L) == 5);

  /* return error_v */
  lua_pushvalue(L, 4);
  return 1;
  assert(lua_gettop(L) == 5);
}

/* name: end_2
 * function(x, y, f1, f2) */
static int lcf3_end_2(lua_State *L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L, 4);

  /* if jsbool_no_force_equal_p(f1(x), f1(y)) and jsbool_no_force_equal_p(f2(x),
   * f2(y)) then */
  enum { lc631 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 136);
  const int lc632 = lua_gettop(L);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc632), 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 136);
    const int lc633 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    lua_pushvalue(L, 4);
    lua_pushvalue(L, 2);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc633), 1);
  }
  const int lc634 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc634) {

    /* lang_set_do(x, y) */
    lc_getupvalue(L, lua_upvalueindex(1), 18, 69);
    lua_pushvalue(L, 1);
    lua_pushvalue(L, 2);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 4);

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 4);
  } else {

    /* else
     * return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc631);
  assert(lua_gettop(L) == 4);
  return 0;
}

/* name: jsbool_no_force_equal_p
 * function(x, y) */
static int lcf1_jsbool_no_force_equal_p(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* if x == y then */
  enum { lc625 = 2 };
  const int lc626 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc626);
  const int lc627 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc627) {

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc625);
  assert(lua_gettop(L) == 2);

  /* x = un_just_all(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 18, 20);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_replace(L, 1);
  assert(lua_gettop(L) == 2);

  /* y = un_just_all(y) */
  lc_getupvalue(L, lua_upvalueindex(1), 18, 20);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 2);

  /* if x == y then */
  enum { lc628 = 2 };
  const int lc629 = lua_equal(L, 1, 2);
  lua_pushboolean(L, lc629);
  const int lc630 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc630) {

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc628);
  assert(lua_gettop(L) == 2);

  /* local end_2 */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);

  /* end_2 = function(x, y, f1, f2)
   *         if jsbool_no_force_equal_p(f1(x), f1(y)) and
   * jsbool_no_force_equal_p(f2(x), f2(y)) then
   *             lang_set_do(x, y);
   *             return true;
   *         else
   *             return false;
   *         end
   *     end */
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf3_end_2, 1);
  lua_replace(L, 3);
  assert(lua_gettop(L) == 3);

  /* if null_p(x) then */
  enum { lc635 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 18, 78);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc636 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc636) {

    /* if not null_p(y) then */
    enum { lc637 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 18, 78);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc638 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc638) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc637);
    assert(lua_gettop(L) == 3);

    /* lang_set_do(x, null_v) */
    lc_getupvalue(L, lua_upvalueindex(1), 18, 69);
    lua_pushvalue(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 18, 79);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* lang_set_do(y, null_v) */
    lc_getupvalue(L, lua_upvalueindex(1), 18, 69);
    lua_pushvalue(L, 2);
    lc_getupvalue(L, lua_upvalueindex(1), 18, 79);
    lua_call(L, 2, 0);
    assert(lua_gettop(L) == 3);

    /* return true */
    lua_pushboolean(L, 1);
    return 1;
    assert(lua_gettop(L) == 3);
  } else {

    /* elseif symbol_p(x) then */
    enum { lc639 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 18, 85);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    const int lc640 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc640) {

      /* if not symbol_p(y) then */
      enum { lc641 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 18, 85);
      lua_pushvalue(L, 2);
      lua_call(L, 1, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc642 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc642) {

        /* return false */
        lua_pushboolean(L, 0);
        return 1;
        assert(lua_gettop(L) == 3);
      }
      lua_settop(L, lc641);
      assert(lua_gettop(L) == 3);

      /* return symbol_equal_p(x, y) */
      const int lc643 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 18, 23);
      lua_pushvalue(L, 1);
      lua_pushvalue(L, 2);
      lua_call(L, 2, LUA_MULTRET);
      return (lua_gettop(L) - lc643);
      assert(lua_gettop(L) == 3);
    } else {

      /* elseif construction_p(x) then */
      enum { lc644 = 3 };
      lc_getupvalue(L, lua_upvalueindex(1), 18, 82);
      lua_pushvalue(L, 1);
      lua_call(L, 1, 1);
      const int lc645 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc645) {

        /* if not construction_p(y) then */
        enum { lc646 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 18, 82);
        lua_pushvalue(L, 2);
        lua_call(L, 1, 1);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        const int lc647 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc647) {

          /* return false */
          lua_pushboolean(L, 0);
          return 1;
          assert(lua_gettop(L) == 3);
        }
        lua_settop(L, lc646);
        assert(lua_gettop(L) == 3);

        /* return end_2(x, y, construction_head, construction_tail) */
        const int lc648 = lua_gettop(L);
        lua_pushvalue(L, 3);
        lua_pushvalue(L, 1);
        lua_pushvalue(L, 2);
        lc_getupvalue(L, lua_upvalueindex(1), 18, 81);
        lc_getupvalue(L, lua_upvalueindex(1), 18, 80);
        lua_call(L, 4, LUA_MULTRET);
        return (lua_gettop(L) - lc648);
        assert(lua_gettop(L) == 3);
      } else {

        /* elseif error_p(x) then */
        enum { lc649 = 3 };
        lc_getupvalue(L, lua_upvalueindex(1), 18, 72);
        lua_pushvalue(L, 1);
        lua_call(L, 1, 1);
        const int lc650 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc650) {

          /* if not error_p(y) then */
          enum { lc651 = 3 };
          lc_getupvalue(L, lua_upvalueindex(1), 18, 72);
          lua_pushvalue(L, 2);
          lua_call(L, 1, 1);
          lua_pushboolean(L, !(lua_toboolean(L, -1)));
          lua_remove(L, -2);
          const int lc652 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc652) {

            /* return false */
            lua_pushboolean(L, 0);
            return 1;
            assert(lua_gettop(L) == 3);
          }
          lua_settop(L, lc651);
          assert(lua_gettop(L) == 3);

          /* return end_2(x, y, error_name, error_list) */
          const int lc653 = lua_gettop(L);
          lua_pushvalue(L, 3);
          lua_pushvalue(L, 1);
          lua_pushvalue(L, 2);
          lc_getupvalue(L, lua_upvalueindex(1), 18, 71);
          lc_getupvalue(L, lua_upvalueindex(1), 18, 70);
          lua_call(L, 4, LUA_MULTRET);
          return (lua_gettop(L) - lc653);
          assert(lua_gettop(L) == 3);
        } else {

          /* elseif data_p(x) then */
          enum { lc654 = 3 };
          lc_getupvalue(L, lua_upvalueindex(1), 18, 76);
          lua_pushvalue(L, 1);
          lua_call(L, 1, 1);
          const int lc655 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc655) {

            /* if not data_p(y) then */
            enum { lc656 = 3 };
            lc_getupvalue(L, lua_upvalueindex(1), 18, 76);
            lua_pushvalue(L, 2);
            lua_call(L, 1, 1);
            lua_pushboolean(L, !(lua_toboolean(L, -1)));
            lua_remove(L, -2);
            const int lc657 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc657) {

              /* return false */
              lua_pushboolean(L, 0);
              return 1;
              assert(lua_gettop(L) == 3);
            }
            lua_settop(L, lc656);
            assert(lua_gettop(L) == 3);

            /* return end_2(x, y, data_name, data_list) */
            const int lc658 = lua_gettop(L);
            lua_pushvalue(L, 3);
            lua_pushvalue(L, 1);
            lua_pushvalue(L, 2);
            lc_getupvalue(L, lua_upvalueindex(1), 18, 75);
            lc_getupvalue(L, lua_upvalueindex(1), 18, 74);
            lua_call(L, 4, LUA_MULTRET);
            return (lua_gettop(L) - lc658);
            assert(lua_gettop(L) == 3);
          } else {

            /* elseif delay_evaluate_p(x) then */
            enum { lc659 = 3 };
            lc_getupvalue(L, lua_upvalueindex(1), 18, 65);
            lua_pushvalue(L, 1);
            lua_call(L, 1, 1);
            const int lc660 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc660) {

              /* return false */
              lua_pushboolean(L, 0);
              return 1;
              assert(lua_gettop(L) == 3);
            } else {

              /* elseif delay_builtin_func_p(x) then */
              enum { lc661 = 3 };
              lc_getupvalue(L, lua_upvalueindex(1), 18, 56);
              lua_pushvalue(L, 1);
              lua_call(L, 1, 1);
              const int lc662 = lua_toboolean(L, -1);
              lua_pop(L, 1);
              if (lc662) {

                /* return false */
                lua_pushboolean(L, 0);
                return 1;
                assert(lua_gettop(L) == 3);
              } else {

                /* elseif delay_builtin_form_p(x) then */
                enum { lc663 = 3 };
                lc_getupvalue(L, lua_upvalueindex(1), 18, 61);
                lua_pushvalue(L, 1);
                lua_call(L, 1, 1);
                const int lc664 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc664) {

                  /* return false */
                  lua_pushboolean(L, 0);
                  return 1;
                  assert(lua_gettop(L) == 3);
                } else {

                  /* elseif delay_apply_p(x) then */
                  enum { lc665 = 3 };
                  lc_getupvalue(L, lua_upvalueindex(1), 18, 52);
                  lua_pushvalue(L, 1);
                  lua_call(L, 1, 1);
                  const int lc666 = lua_toboolean(L, -1);
                  lua_pop(L, 1);
                  if (lc666) {

                    /* return false */
                    lua_pushboolean(L, 0);
                    return 1;
                    assert(lua_gettop(L) == 3);
                  }
                  lua_settop(L, lc665);
                }
                lua_settop(L, lc663);
              }
              lua_settop(L, lc661);
            }
            lua_settop(L, lc659);
          }
          lua_settop(L, lc654);
        }
        lua_settop(L, lc649);
      }
      lua_settop(L, lc644);
    }
    lua_settop(L, lc639);
  }
  lua_settop(L, lc635);
  assert(lua_gettop(L) == 3);

  /* return ERROR() */
  const int lc667 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc667);
  assert(lua_gettop(L) == 3);
}

/* name: simple_print_force_all_rec
 * function(x) */
static int lcf1_simple_print_force_all_rec(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return simple_print(force_all_rec(x)) */
  const int lc668 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 2);
  const int lc669 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 49);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc669), LUA_MULTRET);
  return (lua_gettop(L) - lc668);
  assert(lua_gettop(L) == 1);
}

/* name: eof
 * function() */
static int lcf1_eof(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* return (#state_const) == state */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 155);
  const double lc672 = lua_objlen(L, -1);
  lua_pop(L, 1);
  lua_pushnumber(L, lc672);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  const int lc673 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc673);
  return 1;
  assert(lua_gettop(L) == 0);
}

/* name: get
 * function() */
static int lcf1_get(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* ASSERT(not eof()) */
  lc_getupvalue(L, lua_upvalueindex(1), 20, 95);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);

  /* local ret = state_const:sub(state + 1, state + 1) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 155);
  lua_pushliteral(L, "sub");
  lua_gettable(L, -2);
  lua_insert(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 1);

  /* state = state + 1 */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_setupvalue(L, lua_upvalueindex(1), 0, 154);
  assert(lua_gettop(L) == 1);

  /* return ret */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: put
 * function(x) */
static int lcf1_put(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x) */
  lc_getupvalue(L, lua_upvalueindex(1), 20, 95);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 155);
  lua_pushliteral(L, "sub");
  lua_gettable(L, -2);
  lua_insert(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_call(L, 3, 1);
  lua_pushvalue(L, 1);
  const int lc674 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc674);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 1);

  /* state = state - 1 */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 154);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_setupvalue(L, lua_upvalueindex(1), 0, 154);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: parse_error
 * function() */
static int lcf1_parse_error(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* error("TheLanguage parse ERROR!") */
  lua_getfield(L, LUA_ENVIRONINDEX, "error");
  lua_pushliteral(L, "TheLanguage parse ERROR!");
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);
  return 0;
}

/* name: a_space_p
 * function(x) */
static int lcf1_a_space_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r") */
  lua_pushvalue(L, 1);
  lua_pushliteral(L, " ");
  const int lc675 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc675);
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\n");
    const int lc676 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc676);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\9");
    const int lc677 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc677);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\13");
    const int lc678 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc678);
  }
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: space
 * function() */
static int lcf1_space(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc679 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  const int lc680 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc680) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc679);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if not a_space_p(x) then */
  enum { lc681 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 149);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc682 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc682) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc681);
  assert(lua_gettop(L) == 1);

  /* while a_space_p(x) and (not eof()) do */
  enum { lc683 = 1 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 149);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
      lua_call(L, 0, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
    }
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* x = get() */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc683);
  assert(lua_gettop(L) == 1);

  /* if not a_space_p(x) then */
  enum { lc684 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 149);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc685 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc685) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc684);
  assert(lua_gettop(L) == 1);

  /* return true */
  lua_pushboolean(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: symbol
 * function() */
static int lcf1_symbol(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc686 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  const int lc687 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc687) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc686);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* local ret = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 2);

  /* if not a_symbol_p(x) then */
  enum { lc688 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 139);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc689 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc689) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 2);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc688);
  assert(lua_gettop(L) == 2);

  /* while a_symbol_p(x) and (not eof()) do */
  enum { lc690 = 2 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 139);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
      lua_call(L, 0, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
    }
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* ret = ret .. x */
    lua_pushvalue(L, 2);
    lua_pushvalue(L, 1);
    lua_concat(L, 2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 2);

    /* x = get() */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc690);
  assert(lua_gettop(L) == 2);

  /* if a_symbol_p(x) then */
  enum { lc691 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 139);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc692 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc692) {

    /* ret = ret .. x */
    lua_pushvalue(L, 2);
    lua_pushvalue(L, 1);
    lua_concat(L, 2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 2);
  } else {

    /* else
     * put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc691);
  assert(lua_gettop(L) == 2);

  /* return new_symbol(ret) */
  const int lc693 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 113);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc693);
  assert(lua_gettop(L) == 2);
}

/* name: set_last
 * function(lst) */
static int lcf1_set_last(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if ret == HOLE then */
  enum { lc702 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 157);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 156);
  const int lc703 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc703);
  const int lc704 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc704) {

    /* ret = lst */
    lua_pushvalue(L, 1);
    lc_setupvalue(L, lua_upvalueindex(1), 1, 157);
    assert(lua_gettop(L) == 1);

    /* return; */
    return 0;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc702);
  assert(lua_gettop(L) == 1);

  /* local x = ret */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 157);
  assert(lua_gettop(L) == 2);

  /* while true do */
  enum { lc705 = 2 };
  while (1) {
    lua_pushboolean(L, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if not construction_p(x) then */
    enum { lc706 = 2 };
    lc_getupvalue(L, lua_upvalueindex(1), 23, 82);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc707 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc707) {

      /* return ERROR() */
      const int lc708 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc708);
      assert(lua_gettop(L) == 2);
    }
    lua_settop(L, lc706);
    assert(lua_gettop(L) == 2);

    /* local d = construction_tail(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 3);

    /* if d == HOLE then */
    enum { lc709 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 2, 156);
    const int lc710 = lua_equal(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc710);
    const int lc711 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc711) {

      /* break */
      break;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc709);
    assert(lua_gettop(L) == 3);

    /* x = construction_tail(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc705);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(x) then */
  enum { lc712 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 23, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc713 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc713) {

    /* return ERROR() */
    const int lc714 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc714);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc712);
  assert(lua_gettop(L) == 2);

  /* if construction_tail(x) ~= HOLE then */
  enum { lc715 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 156);
  const int lc716 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc716);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc717 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc717) {

    /* return ERROR() */
    const int lc718 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc718);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc715);
  assert(lua_gettop(L) == 2);

  /* x[2 + 1] = lst */
  lua_pushvalue(L, 1);
  lua_pushnumber(L, 3);
  lua_insert(L, -2);
  lua_settable(L, 2);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* name: last_add
 * function(x) */
static int lcf1_last_add(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* set_last(new_construction(x, HOLE)) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 158);
  const int lc719 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 23, 83);
  lua_pushvalue(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 156);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc719), 0);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: list
 * function() */
static int lcf1_list(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc694 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  const int lc695 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc695) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc694);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "(" then */
  enum { lc696 = 1 };
  lua_pushliteral(L, "(");
  const int lc697 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc697);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc698 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc698) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc696);
  assert(lua_gettop(L) == 1);

  /* local HOLE = new_symbol("!!@@READ||HOLE@@!!") */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc699 = 2 };
  assert((lua_gettop(L) == lc699));
  lc_getupvalue(L, lua_upvalueindex(1), 18, 113);
  lua_pushliteral(L, "!!@@READ||HOLE@@!!");
  lua_call(L, 1, 1);
  lua_rawseti(L, lc699, 156);
  assert(lua_gettop(L) == 2);

  /* local ret = HOLE */
  lc_newclosuretable(L, lc699);
  enum { lc700 = 3 };
  assert((lua_gettop(L) == lc700));
  lc_getupvalue(L, lc699, 0, 156);
  lua_rawseti(L, lc700, 157);
  assert(lua_gettop(L) == 3);

  /* local set_last */
  lc_newclosuretable(L, lc700);
  enum { lc701 = 4 };
  assert((lua_gettop(L) == lc701));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, lc701, 158);
  assert(lua_gettop(L) == 4);

  /* set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end */
  lua_pushvalue(L, lc701);
  lua_pushcclosure(L, lcf1_set_last, 1);
  lc_setupvalue(L, lc701, 0, 158);
  assert(lua_gettop(L) == 4);

  /* local last_add */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 5);

  /* last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end */
  lua_pushvalue(L, lc701);
  lua_pushcclosure(L, lcf1_last_add, 1);
  lua_replace(L, 5);
  assert(lua_gettop(L) == 5);

  /* while true do */
  enum { lc720 = 5 };
  while (1) {
    lua_pushboolean(L, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* space() */
    lc_getupvalue(L, lc701, 3, 148);
    lua_call(L, 0, 0);
    assert(lua_gettop(L) == 5);

    /* if eof() then */
    enum { lc721 = 5 };
    lc_getupvalue(L, lc701, 3, 153);
    lua_call(L, 0, 1);
    const int lc722 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc722) {

      /* return parse_error() */
      const int lc723 = lua_gettop(L);
      lc_getupvalue(L, lc701, 3, 150);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc723);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc721);
    assert(lua_gettop(L) == 5);

    /* x = get() */
    lc_getupvalue(L, lc701, 3, 152);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 5);

    /* if x == ")" then */
    enum { lc724 = 5 };
    lua_pushliteral(L, ")");
    const int lc725 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc725);
    const int lc726 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc726) {

      /* set_last(null_v) */
      lc_getupvalue(L, lc701, 0, 158);
      lc_getupvalue(L, lc701, 23, 79);
      lua_call(L, 1, 0);
      assert(lua_gettop(L) == 5);

      /* return ret */
      lc_getupvalue(L, lc701, 1, 157);
      return 1;
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc724);
    assert(lua_gettop(L) == 5);

    /* if x == "." then */
    enum { lc727 = 5 };
    lua_pushliteral(L, ".");
    const int lc728 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc728);
    const int lc729 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc729) {

      /* space() */
      lc_getupvalue(L, lc701, 3, 148);
      lua_call(L, 0, 0);
      assert(lua_gettop(L) == 5);

      /* local e = val() */
      lc_getupvalue(L, lc701, 3, 138);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 6);

      /* set_last(e) */
      lc_getupvalue(L, lc701, 0, 158);
      lua_pushvalue(L, 6);
      lua_call(L, 1, 0);
      assert(lua_gettop(L) == 6);

      /* space() */
      lc_getupvalue(L, lc701, 3, 148);
      lua_call(L, 0, 0);
      assert(lua_gettop(L) == 6);

      /* if eof() then */
      enum { lc730 = 6 };
      lc_getupvalue(L, lc701, 3, 153);
      lua_call(L, 0, 1);
      const int lc731 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc731) {

        /* return parse_error() */
        const int lc732 = lua_gettop(L);
        lc_getupvalue(L, lc701, 3, 150);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc732);
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc730);
      assert(lua_gettop(L) == 6);

      /* x = get() */
      lc_getupvalue(L, lc701, 3, 152);
      lua_call(L, 0, 1);
      lua_replace(L, 1);
      assert(lua_gettop(L) == 6);

      /* if x ~= ")" then */
      enum { lc733 = 6 };
      lua_pushliteral(L, ")");
      const int lc734 = lua_equal(L, 1, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc734);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc735 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc735) {

        /* return parse_error() */
        const int lc736 = lua_gettop(L);
        lc_getupvalue(L, lc701, 3, 150);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc736);
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc733);
      assert(lua_gettop(L) == 6);

      /* return ret */
      lc_getupvalue(L, lc701, 1, 157);
      return 1;
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc727);
    assert(lua_gettop(L) == 5);

    /* put(x) */
    lc_getupvalue(L, lc701, 3, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 5);

    /* local e = val() */
    lc_getupvalue(L, lc701, 3, 138);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 6);

    /* last_add(e) */
    lua_pushvalue(L, 5);
    lua_pushvalue(L, 6);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 6);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc720);
  assert(lua_gettop(L) == 5);
  return 0;
}

/* name: data
 * function() */
static int lcf1_data(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc737 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  const int lc738 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc738) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc737);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "#" then */
  enum { lc739 = 1 };
  lua_pushliteral(L, "#");
  const int lc740 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc740);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc741 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc741) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc739);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 146);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc742 = 2 };
  lua_pushboolean(L, 0);
  const int lc743 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc743);
  const int lc744 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc744) {

    /* return parse_error() */
    const int lc745 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc745);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc742);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc746 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 20, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc747 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc747) {

    /* return parse_error() */
    const int lc748 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc748);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc746);
  assert(lua_gettop(L) == 2);

  /* return new_data(construction_head(xs), construction_tail(xs)) */
  const int lc749 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 77);
  const int lc750 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc750), LUA_MULTRET);
  return (lua_gettop(L) - lc749);
  assert(lua_gettop(L) == 2);
}

/* name: readerror
 * function() */
static int lcf1_readerror(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc751 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 153);
  lua_call(L, 0, 1);
  const int lc752 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc752) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc751);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "!" then */
  enum { lc753 = 1 };
  lua_pushliteral(L, "!");
  const int lc754 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc754);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc755 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc755) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc753);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 146);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc756 = 2 };
  lua_pushboolean(L, 0);
  const int lc757 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc757);
  const int lc758 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc758) {

    /* return parse_error() */
    const int lc759 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc759);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc756);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc760 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 20, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc761 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc761) {

    /* return parse_error() */
    const int lc762 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc762);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc760);
  assert(lua_gettop(L) == 2);

  /* return new_error(construction_head(xs), construction_tail(xs)) */
  const int lc763 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 73);
  const int lc764 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc764), LUA_MULTRET);
  return (lua_gettop(L) - lc763);
  assert(lua_gettop(L) == 2);
}

/* name: a_symbol_p
 * function(x) */
static int lcf1_a_symbol_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if a_space_p(x) then */
  enum { lc765 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 149);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc766 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc766) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc765);
  assert(lua_gettop(L) == 1);

  /* local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~", "/", "-",
   * ">", "_", ":", "?", "[", "]", "&"} */
  lua_createtable(L, 19, 0);
  lua_pushliteral(L, "(");
  lua_rawseti(L, -2, 1);
  lua_pushliteral(L, ")");
  lua_rawseti(L, -2, 2);
  lua_pushliteral(L, "!");
  lua_rawseti(L, -2, 3);
  lua_pushliteral(L, "#");
  lua_rawseti(L, -2, 4);
  lua_pushliteral(L, ".");
  lua_rawseti(L, -2, 5);
  lua_pushliteral(L, "$");
  lua_rawseti(L, -2, 6);
  lua_pushliteral(L, "%");
  lua_rawseti(L, -2, 7);
  lua_pushliteral(L, "^");
  lua_rawseti(L, -2, 8);
  lua_pushliteral(L, "@");
  lua_rawseti(L, -2, 9);
  lua_pushliteral(L, "~");
  lua_rawseti(L, -2, 10);
  lua_pushliteral(L, "/");
  lua_rawseti(L, -2, 11);
  lua_pushliteral(L, "-");
  lua_rawseti(L, -2, 12);
  lua_pushliteral(L, ">");
  lua_rawseti(L, -2, 13);
  lua_pushliteral(L, "_");
  lua_rawseti(L, -2, 14);
  lua_pushliteral(L, ":");
  lua_rawseti(L, -2, 15);
  lua_pushliteral(L, "?");
  lua_rawseti(L, -2, 16);
  lua_pushliteral(L, "[");
  lua_rawseti(L, -2, 17);
  lua_pushliteral(L, "]");
  lua_rawseti(L, -2, 18);
  lua_pushliteral(L, "&");
  lua_rawseti(L, -2, 19);
  assert(lua_gettop(L) == 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#not_xs) do */
  enum { lc767 = 3 };
  while (1) {
    const double lc768 = lua_objlen(L, 2);
    lua_pushnumber(L, lc768);
    const int lc769 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc769);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if x == not_xs[i + 1] then */
    enum { lc770 = 3 };
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_gettable(L, 2);
    const int lc771 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc771);
    const int lc772 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc772) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc770);
    assert(lua_gettop(L) == 3);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc767);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* return true */
  lua_pushboolean(L, 1);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: val
 * function() */
static int lcf1_val(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* space() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 148);
  lua_call(L, 0, 0);
  assert(lua_gettop(L) == 0);

  /* local fs = {list, symbol, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply} */
  lua_createtable(L, 8, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 146);
  lua_rawseti(L, -2, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 147);
  lua_rawseti(L, -2, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 145);
  lua_rawseti(L, -2, 3);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 144);
  lua_rawseti(L, -2, 4);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 143);
  lua_rawseti(L, -2, 5);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 142);
  lua_rawseti(L, -2, 6);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 141);
  lua_rawseti(L, -2, 7);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 140);
  lua_rawseti(L, -2, 8);
  assert(lua_gettop(L) == 1);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 2);

  /* while i < (#fs) do */
  enum { lc773 = 2 };
  while (1) {
    const double lc774 = lua_objlen(L, 1);
    lua_pushnumber(L, lc774);
    const int lc775 = lua_lessthan(L, 2, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc775);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* local x = fs[i + 1]() */
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 3);

    /* if x ~= false then */
    enum { lc776 = 3 };
    lua_pushboolean(L, 0);
    const int lc777 = lua_equal(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc777);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc778 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc778) {

      /* return x */
      lua_pushvalue(L, 3);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc776);
    assert(lua_gettop(L) == 3);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc773);
  assert(lua_gettop(L) == 2);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 1);

  /* return parse_error() */
  const int lc779 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc779);
  assert(lua_gettop(L) == 1);
}

/* function() */
static int lcf799(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc781 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 153);
  lua_call(L, 0, 1);
  const int lc782 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc782) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc781);
  assert(lua_gettop(L) == 0);

  /* local c = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if c ~= prefix then */
  enum { lc783 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 159);
  const int lc784 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc784);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc785 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc785) {

    /* put(c) */
    lc_getupvalue(L, lua_upvalueindex(1), 1, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc783);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 146);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc786 = 2 };
  lua_pushboolean(L, 0);
  const int lc787 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc787);
  const int lc788 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc788) {

    /* return parse_error() */
    const int lc789 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc789);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc786);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc790 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc791 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc791) {

    /* return parse_error() */
    const int lc792 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc792);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc790);
  assert(lua_gettop(L) == 2);

  /* local x = construction_tail(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if not (construction_p(x) and null_p(construction_tail(x))) then */
  enum { lc793 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 78);
    const int lc794 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
    lua_pushvalue(L, 3);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc794), 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc795 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc795) {

    /* return parse_error() */
    const int lc796 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc796);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc793);
  assert(lua_gettop(L) == 3);

  /* return k(construction_head(xs), construction_head(x)) */
  const int lc797 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 160);
  const int lc798 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 3);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc798), LUA_MULTRET);
  return (lua_gettop(L) - lc797);
  assert(lua_gettop(L) == 3);
}

/* name: make_read_two
 * function(prefix, k) */
static int lcf1_make_read_two(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc780 = 3 };
  assert((lua_gettop(L) == lc780));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 159);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 160);

  /* return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end */
  lua_pushvalue(L, lc780);
  lua_pushcclosure(L, lcf799, 1);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* function() */
static int lcf822(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc801 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 153);
  lua_call(L, 0, 1);
  const int lc802 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc802) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc801);
  assert(lua_gettop(L) == 0);

  /* local c = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 152);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if c ~= prefix then */
  enum { lc803 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 161);
  const int lc804 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc804);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc805 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc805) {

    /* put(c) */
    lc_getupvalue(L, lua_upvalueindex(1), 1, 151);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc803);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 146);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc806 = 2 };
  lua_pushboolean(L, 0);
  const int lc807 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc807);
  const int lc808 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc808) {

    /* return parse_error() */
    const int lc809 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc809);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc806);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc810 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc811 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc811) {

    /* return parse_error() */
    const int lc812 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc812);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc810);
  assert(lua_gettop(L) == 2);

  /* local x = construction_tail(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if not construction_p(x) then */
  enum { lc813 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc814 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc814) {

    /* return parse_error() */
    const int lc815 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc815);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc813);
  assert(lua_gettop(L) == 3);

  /* local x_d = construction_tail(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 4);

  /* if not (construction_p(x_d) and null_p(construction_tail(x_d))) then */
  enum { lc816 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 4);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 78);
    const int lc817 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
    lua_pushvalue(L, 4);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc817), 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc818 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc818) {

    /* return parse_error() */
    const int lc819 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc819);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc816);
  assert(lua_gettop(L) == 4);

  /* return k(construction_head(xs), construction_head(x),
   * construction_head(x_d)) */
  const int lc820 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 162);
  const int lc821 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 4);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc821), LUA_MULTRET);
  return (lua_gettop(L) - lc820);
  assert(lua_gettop(L) == 4);
}

/* name: make_read_three
 * function(prefix, k) */
static int lcf1_make_read_three(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc800 = 3 };
  assert((lua_gettop(L) == lc800));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 161);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 162);

  /* return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end */
  lua_pushvalue(L, lc800);
  lua_pushcclosure(L, lcf822, 1);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* function(e, x) */
static int lcf828(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local env = val2env(e) */
  lc_getupvalue(L, lua_upvalueindex(1), 3, 128);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if env == false then */
  enum { lc823 = 3 };
  lua_pushboolean(L, 0);
  const int lc824 = lua_equal(L, 3, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc824);
  const int lc825 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc825) {

    /* return parse_error() */
    const int lc826 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc826);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc823);
  assert(lua_gettop(L) == 3);

  /* return evaluate(env, x) */
  const int lc827 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 66);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 2);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc827);
  assert(lua_gettop(L) == 3);
}

/* function(xs) */
static int lcf829(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf831(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc830 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc830);
  assert(lua_gettop(L) == 2);
}

/* function(f, xs) */
static int lcf833(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 2);
  lua_pushcfunction(L, lcf829);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf831, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 3);

  /* return builtin_func_apply(f, jsxs) */
  const int lc832 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 57);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 3);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc832);
  assert(lua_gettop(L) == 3);
}

/* function(xs) */
static int lcf834(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf836(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc835 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc835);
  assert(lua_gettop(L) == 2);
}

/* function(e, f, xs) */
static int lcf842(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 3);
  lua_pushcfunction(L, lcf834);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf836, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 4);

  /* local env = val2env(e) */
  lc_getupvalue(L, lua_upvalueindex(1), 3, 128);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 5);

  /* if env == false then */
  enum { lc837 = 5 };
  lua_pushboolean(L, 0);
  const int lc838 = lua_equal(L, 5, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc838);
  const int lc839 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc839) {

    /* return parse_error() */
    const int lc840 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc840);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc837);
  assert(lua_gettop(L) == 5);

  /* return builtin_form_apply(env, f, jsxs) */
  const int lc841 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 62);
  lua_pushvalue(L, 5);
  lua_pushvalue(L, 2);
  lua_pushvalue(L, 4);
  lua_call(L, 3, LUA_MULTRET);
  return (lua_gettop(L) - lc841);
  assert(lua_gettop(L) == 5);
}

/* function(xs) */
static int lcf843(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf845(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc844 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 150);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc844);
  assert(lua_gettop(L) == 2);
}

/* function(f, xs) */
static int lcf847(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 2);
  lua_pushcfunction(L, lcf843);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf845, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 3);

  /* return apply(f, jsxs) */
  const int lc846 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 53);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 3);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc846);
  assert(lua_gettop(L) == 3);
}

/* name: simple_parse
 * function(x) */
static int lcf1_simple_parse(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local state_const, state, eof, get, put, parse_error, a_space_p, space,
   * symbol, list, data, readerror, readeval, readfuncapply, readformbuiltin,
   * readapply, a_symbol_p, val */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc671 = 2 };
  assert((lua_gettop(L) == lc671));
  lua_settop(L, (lua_gettop(L) + 18));
  lua_rawseti(L, lc671, 138);
  lua_rawseti(L, lc671, 139);
  lua_rawseti(L, lc671, 140);
  lua_rawseti(L, lc671, 141);
  lua_rawseti(L, lc671, 142);
  lua_rawseti(L, lc671, 143);
  lua_rawseti(L, lc671, 144);
  lua_rawseti(L, lc671, 145);
  lua_rawseti(L, lc671, 146);
  lua_rawseti(L, lc671, 147);
  lua_rawseti(L, lc671, 148);
  lua_rawseti(L, lc671, 149);
  lua_rawseti(L, lc671, 150);
  lua_rawseti(L, lc671, 151);
  lua_rawseti(L, lc671, 152);
  lua_rawseti(L, lc671, 153);
  lua_rawseti(L, lc671, 154);
  lua_rawseti(L, lc671, 155);
  assert(lua_gettop(L) == 2);

  /* eof = function()
   *         return (#state_const) == state;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_eof, 1);
  lc_setupvalue(L, lc671, 0, 153);
  assert(lua_gettop(L) == 2);

  /* get = function()
   *         ASSERT(not eof());
   *         local ret = state_const:sub(state + 1, state + 1);
   *         state = state + 1;
   *         return ret;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_get, 1);
  lc_setupvalue(L, lc671, 0, 152);
  assert(lua_gettop(L) == 2);

  /* put = function(x)
   *         ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x);
   *         state = state - 1;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_put, 1);
  lc_setupvalue(L, lc671, 0, 151);
  assert(lua_gettop(L) == 2);

  /* parse_error = function()
   *         error("TheLanguage parse ERROR!");
   *     end */
  lua_pushcfunction(L, lcf1_parse_error);
  lc_setupvalue(L, lc671, 0, 150);
  assert(lua_gettop(L) == 2);

  /* a_space_p = function(x)
   *         return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r");
   *     end */
  lua_pushcfunction(L, lcf1_a_space_p);
  lc_setupvalue(L, lc671, 0, 149);
  assert(lua_gettop(L) == 2);

  /* space = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if not a_space_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_space_p(x) and (not eof()) do
   *             x = get();
   *         end
   *         if not a_space_p(x) then
   *             put(x);
   *         end
   *         return true;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_space, 1);
  lc_setupvalue(L, lc671, 0, 148);
  assert(lua_gettop(L) == 2);

  /* symbol = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         local ret = "";
   *         if not a_symbol_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_symbol_p(x) and (not eof()) do
   *             ret = ret .. x;
   *             x = get();
   *         end
   *         if a_symbol_p(x) then
   *             ret = ret .. x;
   *         else
   *             put(x);
   *         end
   *         return new_symbol(ret);
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_symbol, 1);
  lc_setupvalue(L, lc671, 0, 147);
  assert(lua_gettop(L) == 2);

  /* list = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "(" then
   *             put(x);
   *             return false;
   *         end
   *         local HOLE = new_symbol("!!@@READ||HOLE@@!!");
   *         local ret = HOLE;
   *         local set_last;
   *         set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end;
   *         local last_add;
   *         last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end;
   *         while true do
   *             space();
   *             if eof() then
   *                 return parse_error();
   *             end
   *             x = get();
   *             if x == ")" then
   *                 set_last(null_v);
   *                 return ret;
   *             end
   *             if x == "." then
   *                 space();
   *                 local e = val();
   *                 set_last(e);
   *                 space();
   *                 if eof() then
   *                     return parse_error();
   *                 end
   *                 x = get();
   *                 if x ~= ")" then
   *                     return parse_error();
   *                 end
   *                 return ret;
   *             end
   *             put(x);
   *             local e = val();
   *             last_add(e);
   *         end
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_list, 1);
  lc_setupvalue(L, lc671, 0, 146);
  assert(lua_gettop(L) == 2);

  /* data = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "#" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_data(construction_head(xs), construction_tail(xs));
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_data, 1);
  lc_setupvalue(L, lc671, 0, 145);
  assert(lua_gettop(L) == 2);

  /* readerror = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "!" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_error(construction_head(xs), construction_tail(xs));
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_readerror, 1);
  lc_setupvalue(L, lc671, 0, 144);
  assert(lua_gettop(L) == 2);

  /* a_symbol_p = function(x)
   *         if a_space_p(x) then
   *             return false;
   *         end
   *         local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~",
   * "/", "-", ">", "_", ":", "?", "[", "]", "&"};
   *         do
   *             local i = 0;
   *             while i < (#not_xs) do
   *                 if x == not_xs[i + 1] then
   *                     return false;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return true;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_a_symbol_p, 1);
  lc_setupvalue(L, lc671, 0, 139);
  assert(lua_gettop(L) == 2);

  /* val = function()
   *         space();
   *         local fs = {list, symbol, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply};
   *         do
   *             local i = 0;
   *             while i < (#fs) do
   *                 local x = fs[i + 1]();
   *                 if x ~= false then
   *                     return x;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return parse_error();
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_val, 1);
  lc_setupvalue(L, lc671, 0, 138);
  assert(lua_gettop(L) == 2);

  /* state_const = x */
  lua_pushvalue(L, 1);
  lc_setupvalue(L, lc671, 0, 155);
  assert(lua_gettop(L) == 2);

  /* state = 0 */
  lua_pushnumber(L, 0);
  lc_setupvalue(L, lc671, 0, 154);
  assert(lua_gettop(L) == 2);

  /* local make_read_two */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);

  /* make_read_two = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_make_read_two, 1);
  lua_replace(L, 3);
  assert(lua_gettop(L) == 3);

  /* local make_read_three */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 4);

  /* make_read_three = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end;
   *     end */
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf1_make_read_three, 1);
  lua_replace(L, 4);
  assert(lua_gettop(L) == 4);

  /* readeval = make_read_two("$", function(e, x)
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return evaluate(env, x);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "$");
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf828, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc671, 0, 143);
  assert(lua_gettop(L) == 4);

  /* readfuncapply = make_read_two("%", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return builtin_func_apply(f, jsxs);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "%");
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf833, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc671, 0, 142);
  assert(lua_gettop(L) == 4);

  /* readformbuiltin = make_read_three("@", function(e, f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return builtin_form_apply(env, f, jsxs);
   *     end) */
  lua_pushvalue(L, 4);
  lua_pushliteral(L, "@");
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf842, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc671, 0, 141);
  assert(lua_gettop(L) == 4);

  /* readapply = make_read_two("^", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return apply(f, jsxs);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "^");
  lua_pushvalue(L, lc671);
  lua_pushcclosure(L, lcf847, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc671, 0, 140);
  assert(lua_gettop(L) == 4);

  /* return val() */
  const int lc848 = lua_gettop(L);
  lc_getupvalue(L, lc671, 0, 138);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc848);
  assert(lua_gettop(L) == 4);
}

/* name: eof
 * function() */
static int lcf2_eof(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* return (#state_const) == state */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 185);
  const double lc850 = lua_objlen(L, -1);
  lua_pop(L, 1);
  lua_pushnumber(L, lc850);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  const int lc851 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc851);
  return 1;
  assert(lua_gettop(L) == 0);
}

/* name: get
 * function() */
static int lcf2_get(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* ASSERT(not eof()) */
  lc_getupvalue(L, lua_upvalueindex(1), 20, 95);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);

  /* local ret = state_const:sub(state + 1, state + 1) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 185);
  lua_pushliteral(L, "sub");
  lua_gettable(L, -2);
  lua_insert(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 1);

  /* state = state + 1 */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_setupvalue(L, lua_upvalueindex(1), 0, 184);
  assert(lua_gettop(L) == 1);

  /* return ret */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: put
 * function(x) */
static int lcf2_put(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x) */
  lc_getupvalue(L, lua_upvalueindex(1), 20, 95);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 185);
  lua_pushliteral(L, "sub");
  lua_gettable(L, -2);
  lua_insert(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_pushnumber(L, 1);
  lc_add(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lua_call(L, 3, 1);
  lua_pushvalue(L, 1);
  const int lc852 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc852);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 1);

  /* state = state - 1 */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 184);
  lua_pushnumber(L, 1);
  lc_sub(L, -2, -1);
  lua_remove(L, -2);
  lua_remove(L, -2);
  lc_setupvalue(L, lua_upvalueindex(1), 0, 184);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: parse_error
 * function() */
static int lcf2_parse_error(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* error("TheLanguage parse ERROR!") */
  lua_getfield(L, LUA_ENVIRONINDEX, "error");
  lua_pushliteral(L, "TheLanguage parse ERROR!");
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);
  return 0;
}

/* name: a_space_p
 * function(x) */
static int lcf2_a_space_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r") */
  lua_pushvalue(L, 1);
  lua_pushliteral(L, " ");
  const int lc853 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc853);
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\n");
    const int lc854 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc854);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\9");
    const int lc855 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc855);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_pushvalue(L, 1);
    lua_pushliteral(L, "\13");
    const int lc856 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc856);
  }
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: space
 * function() */
static int lcf2_space(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc857 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  const int lc858 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc858) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc857);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if not a_space_p(x) then */
  enum { lc859 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 179);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc860 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc860) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc859);
  assert(lua_gettop(L) == 1);

  /* while a_space_p(x) and (not eof()) do */
  enum { lc861 = 1 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 179);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
      lua_call(L, 0, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
    }
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* x = get() */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc861);
  assert(lua_gettop(L) == 1);

  /* if not a_space_p(x) then */
  enum { lc862 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 179);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc863 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc863) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc862);
  assert(lua_gettop(L) == 1);

  /* return true */
  lua_pushboolean(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: symbol
 * function() */
static int lcf2_symbol(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc864 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  const int lc865 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc865) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc864);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* local ret = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 2);

  /* if not a_symbol_p(x) then */
  enum { lc866 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 169);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc867 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc867) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 2);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc866);
  assert(lua_gettop(L) == 2);

  /* while a_symbol_p(x) and (not eof()) do */
  enum { lc868 = 2 };
  while (1) {
    lc_getupvalue(L, lua_upvalueindex(1), 0, 169);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
      lua_call(L, 0, 1);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
    }
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* ret = ret .. x */
    lua_pushvalue(L, 2);
    lua_pushvalue(L, 1);
    lua_concat(L, 2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 2);

    /* x = get() */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc868);
  assert(lua_gettop(L) == 2);

  /* if a_symbol_p(x) then */
  enum { lc869 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 169);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc870 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc870) {

    /* ret = ret .. x */
    lua_pushvalue(L, 2);
    lua_pushvalue(L, 1);
    lua_concat(L, 2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 2);
  } else {

    /* else
     * put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc869);
  assert(lua_gettop(L) == 2);

  /* return new_symbol(ret) */
  const int lc871 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 18, 113);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc871);
  assert(lua_gettop(L) == 2);
}

/* name: set_last
 * function(lst) */
static int lcf2_set_last(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if ret == HOLE then */
  enum { lc880 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 187);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 186);
  const int lc881 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc881);
  const int lc882 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc882) {

    /* ret = lst */
    lua_pushvalue(L, 1);
    lc_setupvalue(L, lua_upvalueindex(1), 1, 187);
    assert(lua_gettop(L) == 1);

    /* return; */
    return 0;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc880);
  assert(lua_gettop(L) == 1);

  /* local x = ret */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 187);
  assert(lua_gettop(L) == 2);

  /* while true do */
  enum { lc883 = 2 };
  while (1) {
    lua_pushboolean(L, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if not construction_p(x) then */
    enum { lc884 = 2 };
    lc_getupvalue(L, lua_upvalueindex(1), 23, 82);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc885 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc885) {

      /* return ERROR() */
      const int lc886 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc886);
      assert(lua_gettop(L) == 2);
    }
    lua_settop(L, lc884);
    assert(lua_gettop(L) == 2);

    /* local d = construction_tail(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 3);

    /* if d == HOLE then */
    enum { lc887 = 3 };
    lc_getupvalue(L, lua_upvalueindex(1), 2, 186);
    const int lc888 = lua_equal(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc888);
    const int lc889 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc889) {

      /* break */
      break;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc887);
    assert(lua_gettop(L) == 3);

    /* x = construction_tail(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
    lua_pushvalue(L, 2);
    lua_call(L, 1, 1);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc883);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(x) then */
  enum { lc890 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 23, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc891 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc891) {

    /* return ERROR() */
    const int lc892 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc892);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc890);
  assert(lua_gettop(L) == 2);

  /* if construction_tail(x) ~= HOLE then */
  enum { lc893 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 23, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 186);
  const int lc894 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc894);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc895 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc895) {

    /* return ERROR() */
    const int lc896 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 23, 96);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc896);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc893);
  assert(lua_gettop(L) == 2);

  /* x[2 + 1] = lst */
  lua_pushvalue(L, 1);
  lua_pushnumber(L, 3);
  lua_insert(L, -2);
  lua_settable(L, 2);
  assert(lua_gettop(L) == 2);
  return 0;
}

/* name: last_add
 * function(x) */
static int lcf2_last_add(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* set_last(new_construction(x, HOLE)) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 188);
  const int lc897 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 23, 83);
  lua_pushvalue(L, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 2, 186);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc897), 0);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: list
 * function() */
static int lcf2_list(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc872 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  const int lc873 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc873) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc872);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "(" then */
  enum { lc874 = 1 };
  lua_pushliteral(L, "(");
  const int lc875 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc875);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc876 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc876) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc874);
  assert(lua_gettop(L) == 1);

  /* local HOLE = new_symbol("!!@@READ||HOLE@@!!") */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc877 = 2 };
  assert((lua_gettop(L) == lc877));
  lc_getupvalue(L, lua_upvalueindex(1), 18, 113);
  lua_pushliteral(L, "!!@@READ||HOLE@@!!");
  lua_call(L, 1, 1);
  lua_rawseti(L, lc877, 186);
  assert(lua_gettop(L) == 2);

  /* local ret = HOLE */
  lc_newclosuretable(L, lc877);
  enum { lc878 = 3 };
  assert((lua_gettop(L) == lc878));
  lc_getupvalue(L, lc877, 0, 186);
  lua_rawseti(L, lc878, 187);
  assert(lua_gettop(L) == 3);

  /* local set_last */
  lc_newclosuretable(L, lc878);
  enum { lc879 = 4 };
  assert((lua_gettop(L) == lc879));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, lc879, 188);
  assert(lua_gettop(L) == 4);

  /* set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end */
  lua_pushvalue(L, lc879);
  lua_pushcclosure(L, lcf2_set_last, 1);
  lc_setupvalue(L, lc879, 0, 188);
  assert(lua_gettop(L) == 4);

  /* local last_add */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 5);

  /* last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end */
  lua_pushvalue(L, lc879);
  lua_pushcclosure(L, lcf2_last_add, 1);
  lua_replace(L, 5);
  assert(lua_gettop(L) == 5);

  /* while true do */
  enum { lc898 = 5 };
  while (1) {
    lua_pushboolean(L, 1);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* space() */
    lc_getupvalue(L, lc879, 3, 178);
    lua_call(L, 0, 0);
    assert(lua_gettop(L) == 5);

    /* if eof() then */
    enum { lc899 = 5 };
    lc_getupvalue(L, lc879, 3, 183);
    lua_call(L, 0, 1);
    const int lc900 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc900) {

      /* return parse_error() */
      const int lc901 = lua_gettop(L);
      lc_getupvalue(L, lc879, 3, 180);
      lua_call(L, 0, LUA_MULTRET);
      return (lua_gettop(L) - lc901);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc899);
    assert(lua_gettop(L) == 5);

    /* x = get() */
    lc_getupvalue(L, lc879, 3, 182);
    lua_call(L, 0, 1);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 5);

    /* if x == ")" then */
    enum { lc902 = 5 };
    lua_pushliteral(L, ")");
    const int lc903 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc903);
    const int lc904 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc904) {

      /* set_last(null_v) */
      lc_getupvalue(L, lc879, 0, 188);
      lc_getupvalue(L, lc879, 23, 79);
      lua_call(L, 1, 0);
      assert(lua_gettop(L) == 5);

      /* return ret */
      lc_getupvalue(L, lc879, 1, 187);
      return 1;
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc902);
    assert(lua_gettop(L) == 5);

    /* if x == "." then */
    enum { lc905 = 5 };
    lua_pushliteral(L, ".");
    const int lc906 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc906);
    const int lc907 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc907) {

      /* space() */
      lc_getupvalue(L, lc879, 3, 178);
      lua_call(L, 0, 0);
      assert(lua_gettop(L) == 5);

      /* local e = val() */
      lc_getupvalue(L, lc879, 3, 168);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 6);

      /* set_last(e) */
      lc_getupvalue(L, lc879, 0, 188);
      lua_pushvalue(L, 6);
      lua_call(L, 1, 0);
      assert(lua_gettop(L) == 6);

      /* space() */
      lc_getupvalue(L, lc879, 3, 178);
      lua_call(L, 0, 0);
      assert(lua_gettop(L) == 6);

      /* if eof() then */
      enum { lc908 = 6 };
      lc_getupvalue(L, lc879, 3, 183);
      lua_call(L, 0, 1);
      const int lc909 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc909) {

        /* return parse_error() */
        const int lc910 = lua_gettop(L);
        lc_getupvalue(L, lc879, 3, 180);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc910);
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc908);
      assert(lua_gettop(L) == 6);

      /* x = get() */
      lc_getupvalue(L, lc879, 3, 182);
      lua_call(L, 0, 1);
      lua_replace(L, 1);
      assert(lua_gettop(L) == 6);

      /* if x ~= ")" then */
      enum { lc911 = 6 };
      lua_pushliteral(L, ")");
      const int lc912 = lua_equal(L, 1, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc912);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      const int lc913 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc913) {

        /* return parse_error() */
        const int lc914 = lua_gettop(L);
        lc_getupvalue(L, lc879, 3, 180);
        lua_call(L, 0, LUA_MULTRET);
        return (lua_gettop(L) - lc914);
        assert(lua_gettop(L) == 6);
      }
      lua_settop(L, lc911);
      assert(lua_gettop(L) == 6);

      /* return ret */
      lc_getupvalue(L, lc879, 1, 187);
      return 1;
      assert(lua_gettop(L) == 6);
    }
    lua_settop(L, lc905);
    assert(lua_gettop(L) == 5);

    /* put(x) */
    lc_getupvalue(L, lc879, 3, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 5);

    /* local e = val() */
    lc_getupvalue(L, lc879, 3, 168);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 6);

    /* last_add(e) */
    lua_pushvalue(L, 5);
    lua_pushvalue(L, 6);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 6);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc898);
  assert(lua_gettop(L) == 5);
  return 0;
}

/* name: data
 * function() */
static int lcf2_data(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc915 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  const int lc916 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc916) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc915);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "#" then */
  enum { lc917 = 1 };
  lua_pushliteral(L, "#");
  const int lc918 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc918);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc919 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc919) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc917);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 176);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc920 = 2 };
  lua_pushboolean(L, 0);
  const int lc921 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc921);
  const int lc922 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc922) {

    /* return parse_error() */
    const int lc923 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc923);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc920);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc924 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 20, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc925 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc925) {

    /* return parse_error() */
    const int lc926 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc926);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc924);
  assert(lua_gettop(L) == 2);

  /* return new_data(construction_head(xs), construction_tail(xs)) */
  const int lc927 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 77);
  const int lc928 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc928), LUA_MULTRET);
  return (lua_gettop(L) - lc927);
  assert(lua_gettop(L) == 2);
}

/* name: readerror
 * function() */
static int lcf2_readerror(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc929 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  const int lc930 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc930) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc929);
  assert(lua_gettop(L) == 0);

  /* local x = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x ~= "!" then */
  enum { lc931 = 1 };
  lua_pushliteral(L, "!");
  const int lc932 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc932);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc933 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc933) {

    /* put(x) */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc931);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 176);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc934 = 2 };
  lua_pushboolean(L, 0);
  const int lc935 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc935);
  const int lc936 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc936) {

    /* return parse_error() */
    const int lc937 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc937);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc934);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc938 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 20, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc939 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc939) {

    /* return parse_error() */
    const int lc940 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc940);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc938);
  assert(lua_gettop(L) == 2);

  /* return new_error(construction_head(xs), construction_tail(xs)) */
  const int lc941 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 73);
  const int lc942 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc942), LUA_MULTRET);
  return (lua_gettop(L) - lc941);
  assert(lua_gettop(L) == 2);
}

/* name: a_symbol_p
 * function(x) */
static int lcf2_a_symbol_p(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if a_space_p(x) then */
  enum { lc943 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 179);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc944 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc944) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc943);
  assert(lua_gettop(L) == 1);

  /* local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~", "/", "-",
   * ">", "_", ":", "?", "[", "]", "&"} */
  lua_createtable(L, 19, 0);
  lua_pushliteral(L, "(");
  lua_rawseti(L, -2, 1);
  lua_pushliteral(L, ")");
  lua_rawseti(L, -2, 2);
  lua_pushliteral(L, "!");
  lua_rawseti(L, -2, 3);
  lua_pushliteral(L, "#");
  lua_rawseti(L, -2, 4);
  lua_pushliteral(L, ".");
  lua_rawseti(L, -2, 5);
  lua_pushliteral(L, "$");
  lua_rawseti(L, -2, 6);
  lua_pushliteral(L, "%");
  lua_rawseti(L, -2, 7);
  lua_pushliteral(L, "^");
  lua_rawseti(L, -2, 8);
  lua_pushliteral(L, "@");
  lua_rawseti(L, -2, 9);
  lua_pushliteral(L, "~");
  lua_rawseti(L, -2, 10);
  lua_pushliteral(L, "/");
  lua_rawseti(L, -2, 11);
  lua_pushliteral(L, "-");
  lua_rawseti(L, -2, 12);
  lua_pushliteral(L, ">");
  lua_rawseti(L, -2, 13);
  lua_pushliteral(L, "_");
  lua_rawseti(L, -2, 14);
  lua_pushliteral(L, ":");
  lua_rawseti(L, -2, 15);
  lua_pushliteral(L, "?");
  lua_rawseti(L, -2, 16);
  lua_pushliteral(L, "[");
  lua_rawseti(L, -2, 17);
  lua_pushliteral(L, "]");
  lua_rawseti(L, -2, 18);
  lua_pushliteral(L, "&");
  lua_rawseti(L, -2, 19);
  assert(lua_gettop(L) == 2);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 3);

  /* while i < (#not_xs) do */
  enum { lc945 = 3 };
  while (1) {
    const double lc946 = lua_objlen(L, 2);
    lua_pushnumber(L, lc946);
    const int lc947 = lua_lessthan(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc947);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* if x == not_xs[i + 1] then */
    enum { lc948 = 3 };
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_gettable(L, 2);
    const int lc949 = lua_equal(L, 1, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc949);
    const int lc950 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc950) {

      /* return false */
      lua_pushboolean(L, 0);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc948);
    assert(lua_gettop(L) == 3);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 3, -1);
    lua_remove(L, -2);
    lua_replace(L, 3);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc945);
  assert(lua_gettop(L) == 3);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 2);

  /* return true */
  lua_pushboolean(L, 1);
  return 1;
  assert(lua_gettop(L) == 2);
}

/* name: val
 * function() */
static int lcf2_val(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* space() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 178);
  lua_call(L, 0, 0);
  assert(lua_gettop(L) == 0);

  /* local fs = {list, readsysname, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply} */
  lua_createtable(L, 8, 0);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 176);
  lua_rawseti(L, -2, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 163);
  lua_rawseti(L, -2, 2);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 175);
  lua_rawseti(L, -2, 3);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 174);
  lua_rawseti(L, -2, 4);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 173);
  lua_rawseti(L, -2, 5);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 172);
  lua_rawseti(L, -2, 6);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 171);
  lua_rawseti(L, -2, 7);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 170);
  lua_rawseti(L, -2, 8);
  assert(lua_gettop(L) == 1);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 2);

  /* while i < (#fs) do */
  enum { lc951 = 2 };
  while (1) {
    const double lc952 = lua_objlen(L, 1);
    lua_pushnumber(L, lc952);
    const int lc953 = lua_lessthan(L, 2, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc953);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* local x = fs[i + 1]() */
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_gettable(L, 1);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 3);

    /* if x ~= false then */
    enum { lc954 = 3 };
    lua_pushboolean(L, 0);
    const int lc955 = lua_equal(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc955);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc956 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc956) {

      /* return x */
      lua_pushvalue(L, 3);
      return 1;
      assert(lua_gettop(L) == 3);
    }
    lua_settop(L, lc954);
    assert(lua_gettop(L) == 3);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 2, -1);
    lua_remove(L, -2);
    lua_replace(L, 2);
    assert(lua_gettop(L) == 3);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc951);
  assert(lua_gettop(L) == 2);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 1);

  /* return parse_error() */
  const int lc957 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc957);
  assert(lua_gettop(L) == 1);
}

/* name: un_maybe
 * function(x) */
static int lcf1_un_maybe(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if x == false then */
  enum { lc958 = 1 };
  lua_pushboolean(L, 0);
  const int lc959 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc959);
  const int lc960 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc960) {

    /* return parse_error() */
    const int lc961 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc961);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc958);
  assert(lua_gettop(L) == 1);

  /* return x */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: not_eof
 * function() */
static int lcf1_not_eof(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* return not eof() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 183);
  lua_call(L, 0, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  return 1;
  assert(lua_gettop(L) == 0);
}

/* name: assert_get
 * function(c) */
static int lcf1_assert_get(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* un_maybe(not_eof()) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 167);
  const int lc962 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 166);
  lua_call(L, 0, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc962), 0);
  assert(lua_gettop(L) == 1);

  /* un_maybe(get() == c) */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 167);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 182);
  lua_call(L, 0, 1);
  lua_pushvalue(L, 1);
  const int lc963 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc963);
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 1);
  return 0;
}

/* name: readsysname_no_pack_bracket
 * function() */
static int lcf1_readsysname_no_pack_bracket(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* assert_get("[") */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 165);
  lua_pushliteral(L, "[");
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 0);

  /* local x = readsysname_no_pack_inner_must() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 189);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* assert_get("]") */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 165);
  lua_pushliteral(L, "]");
  lua_call(L, 1, 0);
  assert(lua_gettop(L) == 1);

  /* return x */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* name: readsysname_no_pack_inner_must
 * function(strict) */
static int lcf1_readsysname_no_pack_inner_must(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if strict == nil then */
  enum { lc965 = 1 };
  lua_pushnil(L);
  const int lc966 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc966);
  const int lc967 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc967) {

    /* strict = false */
    lua_pushboolean(L, 0);
    lua_replace(L, 1);
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc965);
  assert(lua_gettop(L) == 1);

  /* local readsysname_no_pack_bracket */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 2);

  /* readsysname_no_pack_bracket = function()
   *                 assert_get("[");
   *                 local x = readsysname_no_pack_inner_must();
   *                 assert_get("]");
   *                 return x;
   *             end */
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf1_readsysname_no_pack_bracket, 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 2);

  /* local fs = (strict and {list, symbol, readsysname_no_pack_bracket, data,
   * readerror, readeval, readfuncapply, readformbuiltin, readapply}) or {list,
   * readsysname_no_pack, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply} */
  lua_pushvalue(L, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lua_createtable(L, 9, 0);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 176);
    lua_rawseti(L, -2, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 177);
    lua_rawseti(L, -2, 2);
    lua_pushvalue(L, 2);
    lua_rawseti(L, -2, 3);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 175);
    lua_rawseti(L, -2, 4);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 174);
    lua_rawseti(L, -2, 5);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 173);
    lua_rawseti(L, -2, 6);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 172);
    lua_rawseti(L, -2, 7);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 171);
    lua_rawseti(L, -2, 8);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 170);
    lua_rawseti(L, -2, 9);
  }
  if (!(lua_toboolean(L, -1))) {
    lua_pop(L, 1);
    lua_createtable(L, 8, 0);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 176);
    lua_rawseti(L, -2, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 164);
    lua_rawseti(L, -2, 2);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 175);
    lua_rawseti(L, -2, 3);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 174);
    lua_rawseti(L, -2, 4);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 173);
    lua_rawseti(L, -2, 5);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 172);
    lua_rawseti(L, -2, 6);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 171);
    lua_rawseti(L, -2, 7);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 170);
    lua_rawseti(L, -2, 8);
  }
  assert(lua_gettop(L) == 3);

  /* do
   * local i = 0 */
  lua_pushnumber(L, 0);
  assert(lua_gettop(L) == 4);

  /* while i < (#fs) do */
  enum { lc968 = 4 };
  while (1) {
    const double lc969 = lua_objlen(L, 3);
    lua_pushnumber(L, lc969);
    const int lc970 = lua_lessthan(L, 4, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc970);
    if (!(lua_toboolean(L, -1))) {
      break;
    }
    lua_pop(L, 1);

    /* local x = fs[i + 1]() */
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_gettable(L, 3);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 5);

    /* if x ~= false then */
    enum { lc971 = 5 };
    lua_pushboolean(L, 0);
    const int lc972 = lua_equal(L, 5, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc972);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    const int lc973 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc973) {

      /* return x */
      lua_pushvalue(L, 5);
      return 1;
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc971);
    assert(lua_gettop(L) == 5);

    /* i = i + 1 */
    lua_pushnumber(L, 1);
    lc_add(L, 4, -1);
    lua_remove(L, -2);
    lua_replace(L, 4);
    assert(lua_gettop(L) == 5);

    /* internal: stack cleanup on scope exit */
    lua_pop(L, 1);
  }
  lua_settop(L, lc968);
  assert(lua_gettop(L) == 4);

  /* internal: stack cleanup on scope exit */
  lua_pop(L, 1);
  assert(lua_gettop(L) == 3);

  /* return parse_error() */
  const int lc974 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc974);
  assert(lua_gettop(L) == 3);
}

/* name: may_xfx_xf
 * function(x) */
static int lcf1_may_xfx_xf(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if eof() then */
  enum { lc975 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 183);
  lua_call(L, 0, 1);
  const int lc976 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc976) {

    /* return x */
    lua_pushvalue(L, 1);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc975);
  assert(lua_gettop(L) == 1);

  /* local head = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if head == "." then */
  enum { lc977 = 2 };
  lua_pushliteral(L, ".");
  const int lc978 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc978);
  const int lc979 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc979) {

    /* local y = readsysname_no_pack_inner_must() */
    lc_getupvalue(L, lua_upvalueindex(1), 0, 189);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 3);

    /* return new_list(typeAnnotation_symbol, new_list(function_symbol,
     * new_list(x), something_symbol), y) */
    const int lc980 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
    lc_getupvalue(L, lua_upvalueindex(1), 15, 117);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 47);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 16, 116);
    lua_call(L, 3, 1);
    lua_pushvalue(L, 3);
    lua_call(L, 3, LUA_MULTRET);
    return (lua_gettop(L) - lc980);
    assert(lua_gettop(L) == 3);
  } else {

    /* elseif head == ":" then */
    enum { lc981 = 2 };
    lua_pushliteral(L, ":");
    const int lc982 = lua_equal(L, 2, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc982);
    const int lc983 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc983) {

      /* local y = readsysname_no_pack_inner_must() */
      lc_getupvalue(L, lua_upvalueindex(1), 0, 189);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 3);

      /* return new_list(typeAnnotation_symbol, y, x) */
      const int lc984 = lua_gettop(L);
      lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
      lc_getupvalue(L, lua_upvalueindex(1), 15, 117);
      lua_pushvalue(L, 3);
      lua_pushvalue(L, 1);
      lua_call(L, 3, LUA_MULTRET);
      return (lua_gettop(L) - lc984);
      assert(lua_gettop(L) == 3);
    } else {

      /* elseif head == "~" then */
      enum { lc985 = 2 };
      lua_pushliteral(L, "~");
      const int lc986 = lua_equal(L, 2, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc986);
      const int lc987 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc987) {

        /* return new_list(isOrNot_symbol, x) */
        const int lc988 = lua_gettop(L);
        lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
        lc_getupvalue(L, lua_upvalueindex(1), 14, 118);
        lua_pushvalue(L, 1);
        lua_call(L, 2, LUA_MULTRET);
        return (lua_gettop(L) - lc988);
        assert(lua_gettop(L) == 2);
      } else {

        /* elseif head == "@" then */
        enum { lc989 = 2 };
        lua_pushliteral(L, "@");
        const int lc990 = lua_equal(L, 2, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc990);
        const int lc991 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc991) {

          /* local y = readsysname_no_pack_inner_must() */
          lc_getupvalue(L, lua_upvalueindex(1), 0, 189);
          lua_call(L, 0, 1);
          assert(lua_gettop(L) == 3);

          /* return new_list(typeAnnotation_symbol, new_list(function_symbol,
           * new_construction(x, something_symbol), something_symbol), y) */
          const int lc992 = lua_gettop(L);
          lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
          lc_getupvalue(L, lua_upvalueindex(1), 15, 117);
          lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
          lc_getupvalue(L, lua_upvalueindex(1), 21, 47);
          lc_getupvalue(L, lua_upvalueindex(1), 21, 83);
          lua_pushvalue(L, 1);
          lc_getupvalue(L, lua_upvalueindex(1), 16, 116);
          lua_call(L, 2, 1);
          lc_getupvalue(L, lua_upvalueindex(1), 16, 116);
          lua_call(L, 3, 1);
          lua_pushvalue(L, 3);
          lua_call(L, 3, LUA_MULTRET);
          return (lua_gettop(L) - lc992);
          assert(lua_gettop(L) == 3);
        } else {

          /* elseif head == "?" then */
          enum { lc993 = 2 };
          lua_pushliteral(L, "?");
          const int lc994 = lua_equal(L, 2, -1);
          lua_pop(L, 1);
          lua_pushboolean(L, lc994);
          const int lc995 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc995) {

            /* return new_list(typeAnnotation_symbol, function_symbol,
             * new_list(isOrNot_symbol, x)) */
            const int lc996 = lua_gettop(L);
            lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
            const int lc997 = lua_gettop(L);
            lc_getupvalue(L, lua_upvalueindex(1), 15, 117);
            lc_getupvalue(L, lua_upvalueindex(1), 21, 47);
            lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
            lc_getupvalue(L, lua_upvalueindex(1), 14, 118);
            lua_pushvalue(L, 1);
            lua_call(L, 2, LUA_MULTRET);
            lua_call(L, (lua_gettop(L) - lc997), LUA_MULTRET);
            return (lua_gettop(L) - lc996);
            assert(lua_gettop(L) == 2);
          } else {

            /* elseif head == "/" then */
            enum { lc998 = 2 };
            lua_pushliteral(L, "/");
            const int lc999 = lua_equal(L, 2, -1);
            lua_pop(L, 1);
            lua_pushboolean(L, lc999);
            const int lc1000 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc1000) {

              /* local ys = {x} */
              lua_createtable(L, 1, 0);
              lua_pushvalue(L, 1);
              lua_rawseti(L, -2, 1);
              assert(lua_gettop(L) == 3);

              /* while true do */
              enum { lc1001 = 3 };
              while (1) {
                lua_pushboolean(L, 1);
                if (!(lua_toboolean(L, -1))) {
                  break;
                }
                lua_pop(L, 1);

                /* local y = readsysname_no_pack_inner_must(true) */
                lc_getupvalue(L, lua_upvalueindex(1), 0, 189);
                lua_pushboolean(L, 1);
                lua_call(L, 1, 1);
                assert(lua_gettop(L) == 4);

                /* __TS__ArrayPush(ys, y) */
                lc_getupvalue(L, lua_upvalueindex(1), 22, 1);
                lua_pushvalue(L, 3);
                lua_pushvalue(L, 4);
                lua_call(L, 2, 0);
                assert(lua_gettop(L) == 4);

                /* if eof() then */
                enum { lc1002 = 4 };
                lc_getupvalue(L, lua_upvalueindex(1), 1, 183);
                lua_call(L, 0, 1);
                const int lc1003 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc1003) {

                  /* break */
                  break;
                  assert(lua_gettop(L) == 4);
                }
                lua_settop(L, lc1002);
                assert(lua_gettop(L) == 4);

                /* local c0 = get() */
                lc_getupvalue(L, lua_upvalueindex(1), 1, 182);
                lua_call(L, 0, 1);
                assert(lua_gettop(L) == 5);

                /* if c0 ~= "/" then */
                enum { lc1004 = 5 };
                lua_pushliteral(L, "/");
                const int lc1005 = lua_equal(L, 5, -1);
                lua_pop(L, 1);
                lua_pushboolean(L, lc1005);
                lua_pushboolean(L, !(lua_toboolean(L, -1)));
                lua_remove(L, -2);
                const int lc1006 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc1006) {

                  /* put(c0) */
                  lc_getupvalue(L, lua_upvalueindex(1), 1, 181);
                  lua_pushvalue(L, 5);
                  lua_call(L, 1, 0);
                  assert(lua_gettop(L) == 5);

                  /* break */
                  break;
                  assert(lua_gettop(L) == 5);
                }
                lua_settop(L, lc1004);
                assert(lua_gettop(L) == 5);

                /* internal: stack cleanup on scope exit */
                lua_pop(L, 2);
              }
              lua_settop(L, lc1001);
              assert(lua_gettop(L) == 3);

              /* return new_list(sub_symbol, jsArray_to_list(ys)) */
              const int lc1007 = lua_gettop(L);
              lc_getupvalue(L, lua_upvalueindex(1), 21, 21);
              const int lc1008 = lua_gettop(L);
              lc_getupvalue(L, lua_upvalueindex(1), 13, 119);
              lc_getupvalue(L, lua_upvalueindex(1), 21, 22);
              lua_pushvalue(L, 3);
              lua_call(L, 1, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc1008), LUA_MULTRET);
              return (lua_gettop(L) - lc1007);
              assert(lua_gettop(L) == 3);
            } else {

              /* else
               * put(head) */
              lc_getupvalue(L, lua_upvalueindex(1), 1, 181);
              lua_pushvalue(L, 2);
              lua_call(L, 1, 0);
              assert(lua_gettop(L) == 2);

              /* return x */
              lua_pushvalue(L, 1);
              return 1;
              assert(lua_gettop(L) == 2);
            }
            lua_settop(L, lc998);
          }
          lua_settop(L, lc993);
        }
        lua_settop(L, lc989);
      }
      lua_settop(L, lc985);
    }
    lua_settop(L, lc981);
  }
  lua_settop(L, lc977);
  assert(lua_gettop(L) == 2);

  /* return ERROR() */
  const int lc1009 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1009);
  assert(lua_gettop(L) == 2);
}

/* name: readsysname_no_pack
 * function() */
static int lcf1_readsysname_no_pack(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* local readsysname_no_pack_inner_must, may_xfx_xf */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc964 = 1 };
  assert((lua_gettop(L) == lc964));
  lua_settop(L, (lua_gettop(L) + 2));
  lua_rawseti(L, lc964, 189);
  assert(lua_gettop(L) == 2);

  /* readsysname_no_pack_inner_must = function(strict)
   *             if strict == nil then
   *                 strict = false;
   *             end
   *             local readsysname_no_pack_bracket;
   *             readsysname_no_pack_bracket = function()
   *                 assert_get("[");
   *                 local x = readsysname_no_pack_inner_must();
   *                 assert_get("]");
   *                 return x;
   *             end;
   *             local fs = (strict and {list, symbol,
   * readsysname_no_pack_bracket, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply}) or {list, readsysname_no_pack, data,
   * readerror, readeval, readfuncapply, readformbuiltin, readapply};
   *             do
   *                 local i = 0;
   *                 while i < (#fs) do
   *                     local x = fs[i + 1]();
   *                     if x ~= false then
   *                         return x;
   *                     end
   *                     i = i + 1;
   *                 end
   *             end
   *             return parse_error();
   *         end */
  lua_pushvalue(L, lc964);
  lua_pushcclosure(L, lcf1_readsysname_no_pack_inner_must, 1);
  lc_setupvalue(L, lc964, 0, 189);
  assert(lua_gettop(L) == 2);

  /* may_xfx_xf = function(x)
   *             if eof() then
   *                 return x;
   *             end
   *             local head = get();
   *             if head == "." then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_list(x), something_symbol), y);
   *             elseif head == ":" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol, y, x);
   *             elseif head == "~" then
   *                 return new_list(isOrNot_symbol, x);
   *             elseif head == "@" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_construction(x, something_symbol),
   * something_symbol), y);
   *             elseif head == "?" then
   *                 return new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, x));
   *             elseif head == "/" then
   *                 local ys = {x};
   *                 while true do
   *                     local y = readsysname_no_pack_inner_must(true);
   *                     __TS__ArrayPush(ys, y);
   *                     if eof() then
   *                         break;
   *                     end
   *                     local c0 = get();
   *                     if c0 ~= "/" then
   *                         put(c0);
   *                         break;
   *                     end
   *                 end
   *                 return new_list(sub_symbol, jsArray_to_list(ys));
   *             else
   *                 put(head);
   *                 return x;
   *             end
   *             return ERROR();
   *         end */
  lua_pushvalue(L, lc964);
  lua_pushcclosure(L, lcf1_may_xfx_xf, 1);
  lua_replace(L, 2);
  assert(lua_gettop(L) == 2);

  /* if eof() then */
  enum { lc1010 = 2 };
  lc_getupvalue(L, lc964, 1, 183);
  lua_call(L, 0, 1);
  const int lc1011 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1011) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc1010);
  assert(lua_gettop(L) == 2);

  /* local head = get() */
  lc_getupvalue(L, lc964, 1, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 3);

  /* if head == "&" then */
  enum { lc1012 = 3 };
  lua_pushliteral(L, "&");
  const int lc1013 = lua_equal(L, 3, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1013);
  const int lc1014 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1014) {

    /* un_maybe(not_eof()) */
    lc_getupvalue(L, lc964, 1, 167);
    const int lc1015 = lua_gettop(L);
    lc_getupvalue(L, lc964, 1, 166);
    lua_call(L, 0, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc1015), 0);
    assert(lua_gettop(L) == 3);

    /* local c0 = get() */
    lc_getupvalue(L, lc964, 1, 182);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 4);

    /* if c0 == "+" then */
    enum { lc1016 = 4 };
    lua_pushliteral(L, "+");
    const int lc1017 = lua_equal(L, 4, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc1017);
    const int lc1018 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1018) {

      /* local x = readsysname_no_pack_inner_must() */
      lc_getupvalue(L, lc964, 0, 189);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 5);

      /* return new_list(form_symbol, new_list(system_symbol, x)) */
      const int lc1019 = lua_gettop(L);
      lc_getupvalue(L, lc964, 21, 21);
      const int lc1020 = lua_gettop(L);
      lc_getupvalue(L, lc964, 21, 46);
      lc_getupvalue(L, lc964, 21, 21);
      lc_getupvalue(L, lc964, 21, 48);
      lua_pushvalue(L, 5);
      lua_call(L, 2, LUA_MULTRET);
      lua_call(L, (lua_gettop(L) - lc1020), LUA_MULTRET);
      return (lua_gettop(L) - lc1019);
      assert(lua_gettop(L) == 5);
    } else {

      /* else
       * put(c0) */
      lc_getupvalue(L, lc964, 1, 181);
      lua_pushvalue(L, 4);
      lua_call(L, 1, 0);
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L, lc1016);
    assert(lua_gettop(L) == 4);

    /* local x = readsysname_no_pack_inner_must() */
    lc_getupvalue(L, lc964, 0, 189);
    lua_call(L, 0, 1);
    assert(lua_gettop(L) == 5);

    /* return new_list(form_symbol, x) */
    const int lc1021 = lua_gettop(L);
    lc_getupvalue(L, lc964, 21, 21);
    lc_getupvalue(L, lc964, 21, 46);
    lua_pushvalue(L, 5);
    lua_call(L, 2, LUA_MULTRET);
    return (lua_gettop(L) - lc1021);
    assert(lua_gettop(L) == 5);
  } else {

    /* elseif head == ":" then */
    enum { lc1022 = 3 };
    lua_pushliteral(L, ":");
    const int lc1023 = lua_equal(L, 3, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc1023);
    const int lc1024 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1024) {

      /* un_maybe(not_eof()) */
      lc_getupvalue(L, lc964, 1, 167);
      const int lc1025 = lua_gettop(L);
      lc_getupvalue(L, lc964, 1, 166);
      lua_call(L, 0, LUA_MULTRET);
      lua_call(L, (lua_gettop(L) - lc1025), 0);
      assert(lua_gettop(L) == 3);

      /* local c0 = get() */
      lc_getupvalue(L, lc964, 1, 182);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 4);

      /* if c0 == "&" then */
      enum { lc1026 = 4 };
      lua_pushliteral(L, "&");
      const int lc1027 = lua_equal(L, 4, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc1027);
      const int lc1028 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1028) {

        /* assert_get(">") */
        lc_getupvalue(L, lc964, 1, 165);
        lua_pushliteral(L, ">");
        lua_call(L, 1, 0);
        assert(lua_gettop(L) == 4);

        /* local x = readsysname_no_pack_inner_must() */
        lc_getupvalue(L, lc964, 0, 189);
        lua_call(L, 0, 1);
        assert(lua_gettop(L) == 5);

        /* return new_list(typeAnnotation_symbol, new_list(form_symbol,
         * new_list(function_symbol, something_symbol, x)), theThing_symbol) */
        const int lc1029 = lua_gettop(L);
        lc_getupvalue(L, lc964, 21, 21);
        lc_getupvalue(L, lc964, 15, 117);
        lc_getupvalue(L, lc964, 21, 21);
        const int lc1030 = lua_gettop(L);
        lc_getupvalue(L, lc964, 21, 46);
        lc_getupvalue(L, lc964, 21, 21);
        lc_getupvalue(L, lc964, 21, 47);
        lc_getupvalue(L, lc964, 16, 116);
        lua_pushvalue(L, 5);
        lua_call(L, 3, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc1030), 1);
        lc_getupvalue(L, lc964, 17, 115);
        lua_call(L, 3, LUA_MULTRET);
        return (lua_gettop(L) - lc1029);
        assert(lua_gettop(L) == 5);
      } else {

        /* elseif c0 == ">" then */
        enum { lc1031 = 4 };
        lua_pushliteral(L, ">");
        const int lc1032 = lua_equal(L, 4, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc1032);
        const int lc1033 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1033) {

          /* local x = readsysname_no_pack_inner_must() */
          lc_getupvalue(L, lc964, 0, 189);
          lua_call(L, 0, 1);
          assert(lua_gettop(L) == 5);

          /* return new_list(typeAnnotation_symbol, new_list(function_symbol,
           * something_symbol, x), theThing_symbol) */
          const int lc1034 = lua_gettop(L);
          lc_getupvalue(L, lc964, 21, 21);
          lc_getupvalue(L, lc964, 15, 117);
          lc_getupvalue(L, lc964, 21, 21);
          lc_getupvalue(L, lc964, 21, 47);
          lc_getupvalue(L, lc964, 16, 116);
          lua_pushvalue(L, 5);
          lua_call(L, 3, 1);
          lc_getupvalue(L, lc964, 17, 115);
          lua_call(L, 3, LUA_MULTRET);
          return (lua_gettop(L) - lc1034);
          assert(lua_gettop(L) == 5);
        } else {

          /* else
           * put(c0) */
          lc_getupvalue(L, lc964, 1, 181);
          lua_pushvalue(L, 4);
          lua_call(L, 1, 0);
          assert(lua_gettop(L) == 4);
        }
        lua_settop(L, lc1031);
      }
      lua_settop(L, lc1026);
      assert(lua_gettop(L) == 4);

      /* local x = readsysname_no_pack_inner_must() */
      lc_getupvalue(L, lc964, 0, 189);
      lua_call(L, 0, 1);
      assert(lua_gettop(L) == 5);

      /* return new_list(typeAnnotation_symbol, x, theThing_symbol) */
      const int lc1035 = lua_gettop(L);
      lc_getupvalue(L, lc964, 21, 21);
      lc_getupvalue(L, lc964, 15, 117);
      lua_pushvalue(L, 5);
      lc_getupvalue(L, lc964, 17, 115);
      lua_call(L, 3, LUA_MULTRET);
      return (lua_gettop(L) - lc1035);
      assert(lua_gettop(L) == 5);
    } else {

      /* elseif head == "+" then */
      enum { lc1036 = 3 };
      lua_pushliteral(L, "+");
      const int lc1037 = lua_equal(L, 3, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc1037);
      const int lc1038 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1038) {

        /* local x = readsysname_no_pack_inner_must() */
        lc_getupvalue(L, lc964, 0, 189);
        lua_call(L, 0, 1);
        assert(lua_gettop(L) == 4);

        /* return new_list(system_symbol, x) */
        const int lc1039 = lua_gettop(L);
        lc_getupvalue(L, lc964, 21, 21);
        lc_getupvalue(L, lc964, 21, 48);
        lua_pushvalue(L, 4);
        lua_call(L, 2, LUA_MULTRET);
        return (lua_gettop(L) - lc1039);
        assert(lua_gettop(L) == 4);
      } else {

        /* elseif head == "[" then */
        enum { lc1040 = 3 };
        lua_pushliteral(L, "[");
        const int lc1041 = lua_equal(L, 3, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc1041);
        const int lc1042 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1042) {

          /* local x = readsysname_no_pack_inner_must() */
          lc_getupvalue(L, lc964, 0, 189);
          lua_call(L, 0, 1);
          assert(lua_gettop(L) == 4);

          /* assert_get("]") */
          lc_getupvalue(L, lc964, 1, 165);
          lua_pushliteral(L, "]");
          lua_call(L, 1, 0);
          assert(lua_gettop(L) == 4);

          /* return may_xfx_xf(x) */
          const int lc1043 = lua_gettop(L);
          lua_pushvalue(L, 2);
          lua_pushvalue(L, 4);
          lua_call(L, 1, LUA_MULTRET);
          return (lua_gettop(L) - lc1043);
          assert(lua_gettop(L) == 4);
        } else {

          /* elseif head == "_" then */
          enum { lc1044 = 3 };
          lua_pushliteral(L, "_");
          const int lc1045 = lua_equal(L, 3, -1);
          lua_pop(L, 1);
          lua_pushboolean(L, lc1045);
          const int lc1046 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc1046) {

            /* assert_get(":") */
            lc_getupvalue(L, lc964, 1, 165);
            lua_pushliteral(L, ":");
            lua_call(L, 1, 0);
            assert(lua_gettop(L) == 3);

            /* local x = readsysname_no_pack_inner_must() */
            lc_getupvalue(L, lc964, 0, 189);
            lua_call(L, 0, 1);
            assert(lua_gettop(L) == 4);

            /* return new_list(typeAnnotation_symbol, x, something_symbol) */
            const int lc1047 = lua_gettop(L);
            lc_getupvalue(L, lc964, 21, 21);
            lc_getupvalue(L, lc964, 15, 117);
            lua_pushvalue(L, 4);
            lc_getupvalue(L, lc964, 16, 116);
            lua_call(L, 3, LUA_MULTRET);
            return (lua_gettop(L) - lc1047);
            assert(lua_gettop(L) == 4);
          } else {

            /* else
             * put(head) */
            lc_getupvalue(L, lc964, 1, 181);
            lua_pushvalue(L, 3);
            lua_call(L, 1, 0);
            assert(lua_gettop(L) == 3);

            /* local x = symbol() */
            lc_getupvalue(L, lc964, 1, 177);
            lua_call(L, 0, 1);
            assert(lua_gettop(L) == 4);

            /* if x == false then */
            enum { lc1048 = 4 };
            lua_pushboolean(L, 0);
            const int lc1049 = lua_equal(L, 4, -1);
            lua_pop(L, 1);
            lua_pushboolean(L, lc1049);
            const int lc1050 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc1050) {

              /* return false */
              lua_pushboolean(L, 0);
              return 1;
              assert(lua_gettop(L) == 4);
            }
            lua_settop(L, lc1048);
            assert(lua_gettop(L) == 4);

            /* return may_xfx_xf(x) */
            const int lc1051 = lua_gettop(L);
            lua_pushvalue(L, 2);
            lua_pushvalue(L, 4);
            lua_call(L, 1, LUA_MULTRET);
            return (lua_gettop(L) - lc1051);
            assert(lua_gettop(L) == 4);
          }
          lua_settop(L, lc1044);
        }
        lua_settop(L, lc1040);
      }
      lua_settop(L, lc1036);
    }
    lua_settop(L, lc1022);
  }
  lua_settop(L, lc1012);
  assert(lua_gettop(L) == 3);

  /* return ERROR() */
  const int lc1052 = lua_gettop(L);
  lc_getupvalue(L, lc964, 21, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1052);
  assert(lua_gettop(L) == 3);
}

/* name: readsysname
 * function() */
static int lcf1_readsysname(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* local x = readsysname_no_pack() */
  lc_getupvalue(L, lua_upvalueindex(1), 0, 164);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if x == false then */
  enum { lc1053 = 1 };
  lua_pushboolean(L, 0);
  const int lc1054 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1054);
  const int lc1055 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1055) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc1053);
  assert(lua_gettop(L) == 1);

  /* if symbol_p(x) then */
  enum { lc1056 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 20, 85);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc1057 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1057) {

    /* return x */
    lua_pushvalue(L, 1);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc1056);
  assert(lua_gettop(L) == 1);

  /* return systemName_make(x) */
  const int lc1058 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 9, 122);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  return (lua_gettop(L) - lc1058);
  assert(lua_gettop(L) == 1);
}

/* function() */
static int lcf1078(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc1060 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 183);
  lua_call(L, 0, 1);
  const int lc1061 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1061) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc1060);
  assert(lua_gettop(L) == 0);

  /* local c = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if c ~= prefix then */
  enum { lc1062 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 190);
  const int lc1063 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1063);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1064 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1064) {

    /* put(c) */
    lc_getupvalue(L, lua_upvalueindex(1), 1, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc1062);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 176);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc1065 = 2 };
  lua_pushboolean(L, 0);
  const int lc1066 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1066);
  const int lc1067 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1067) {

    /* return parse_error() */
    const int lc1068 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1068);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc1065);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc1069 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1070 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1070) {

    /* return parse_error() */
    const int lc1071 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1071);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc1069);
  assert(lua_gettop(L) == 2);

  /* local x = construction_tail(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if not (construction_p(x) and null_p(construction_tail(x))) then */
  enum { lc1072 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 78);
    const int lc1073 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
    lua_pushvalue(L, 3);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc1073), 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1074 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1074) {

    /* return parse_error() */
    const int lc1075 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1075);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc1072);
  assert(lua_gettop(L) == 3);

  /* return k(construction_head(xs), construction_head(x)) */
  const int lc1076 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 191);
  const int lc1077 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 3);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc1077), LUA_MULTRET);
  return (lua_gettop(L) - lc1076);
  assert(lua_gettop(L) == 3);
}

/* name: make_read_two
 * function(prefix, k) */
static int lcf2_make_read_two(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc1059 = 3 };
  assert((lua_gettop(L) == lc1059));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 190);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 191);

  /* return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end */
  lua_pushvalue(L, lc1059);
  lua_pushcclosure(L, lcf1078, 1);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* function() */
static int lcf1101(lua_State *L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L, 0);

  /* if eof() then */
  enum { lc1080 = 0 };
  lc_getupvalue(L, lua_upvalueindex(1), 1, 183);
  lua_call(L, 0, 1);
  const int lc1081 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1081) {

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 0);
  }
  lua_settop(L, lc1080);
  assert(lua_gettop(L) == 0);

  /* local c = get() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 182);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 1);

  /* if c ~= prefix then */
  enum { lc1082 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 192);
  const int lc1083 = lua_equal(L, 1, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1083);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1084 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1084) {

    /* put(c) */
    lc_getupvalue(L, lua_upvalueindex(1), 1, 181);
    lua_pushvalue(L, 1);
    lua_call(L, 1, 0);
    assert(lua_gettop(L) == 1);

    /* return false */
    lua_pushboolean(L, 0);
    return 1;
    assert(lua_gettop(L) == 1);
  }
  lua_settop(L, lc1082);
  assert(lua_gettop(L) == 1);

  /* local xs = list() */
  lc_getupvalue(L, lua_upvalueindex(1), 1, 176);
  lua_call(L, 0, 1);
  assert(lua_gettop(L) == 2);

  /* if xs == false then */
  enum { lc1085 = 2 };
  lua_pushboolean(L, 0);
  const int lc1086 = lua_equal(L, 2, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1086);
  const int lc1087 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1087) {

    /* return parse_error() */
    const int lc1088 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1088);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc1085);
  assert(lua_gettop(L) == 2);

  /* if not construction_p(xs) then */
  enum { lc1089 = 2 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1090 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1090) {

    /* return parse_error() */
    const int lc1091 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1091);
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L, lc1089);
  assert(lua_gettop(L) == 2);

  /* local x = construction_tail(xs) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if not construction_p(x) then */
  enum { lc1092 = 3 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1093 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1093) {

    /* return parse_error() */
    const int lc1094 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1094);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc1092);
  assert(lua_gettop(L) == 3);

  /* local x_d = construction_tail(x) */
  lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 4);

  /* if not (construction_p(x_d) and null_p(construction_tail(x_d))) then */
  enum { lc1095 = 4 };
  lc_getupvalue(L, lua_upvalueindex(1), 21, 82);
  lua_pushvalue(L, 4);
  lua_call(L, 1, 1);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 78);
    const int lc1096 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 21, 80);
    lua_pushvalue(L, 4);
    lua_call(L, 1, LUA_MULTRET);
    lua_call(L, (lua_gettop(L) - lc1096), 1);
  }
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  const int lc1097 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1097) {

    /* return parse_error() */
    const int lc1098 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 1, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1098);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L, lc1095);
  assert(lua_gettop(L) == 4);

  /* return k(construction_head(xs), construction_head(x),
   * construction_head(x_d)) */
  const int lc1099 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 193);
  const int lc1100 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 2);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  lc_getupvalue(L, lua_upvalueindex(1), 21, 81);
  lua_pushvalue(L, 4);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc1100), LUA_MULTRET);
  return (lua_gettop(L) - lc1099);
  assert(lua_gettop(L) == 4);
}

/* name: make_read_three
 * function(prefix, k) */
static int lcf2_make_read_three(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc1079 = 3 };
  assert((lua_gettop(L) == lc1079));
  lua_pushvalue(L, 1);
  lua_rawseti(L, -2, 192);
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 193);

  /* return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end */
  lua_pushvalue(L, lc1079);
  lua_pushcclosure(L, lcf1101, 1);
  return 1;
  assert(lua_gettop(L) == 3);
}

/* function(e, x) */
static int lcf1107(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local env = val2env(e) */
  lc_getupvalue(L, lua_upvalueindex(1), 3, 128);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 3);

  /* if env == false then */
  enum { lc1102 = 3 };
  lua_pushboolean(L, 0);
  const int lc1103 = lua_equal(L, 3, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1103);
  const int lc1104 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1104) {

    /* return parse_error() */
    const int lc1105 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1105);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc1102);
  assert(lua_gettop(L) == 3);

  /* return evaluate(env, x) */
  const int lc1106 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 66);
  lua_pushvalue(L, 3);
  lua_pushvalue(L, 2);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc1106);
  assert(lua_gettop(L) == 3);
}

/* function(xs) */
static int lcf1108(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf1110(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc1109 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1109);
  assert(lua_gettop(L) == 2);
}

/* function(f, xs) */
static int lcf1112(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 2);
  lua_pushcfunction(L, lcf1108);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf1110, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 3);

  /* return builtin_func_apply(f, jsxs) */
  const int lc1111 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 57);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 3);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc1111);
  assert(lua_gettop(L) == 3);
}

/* function(xs) */
static int lcf1113(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf1115(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc1114 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1114);
  assert(lua_gettop(L) == 2);
}

/* function(e, f, xs) */
static int lcf1121(lua_State *L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L, 3);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 3);
  lua_pushcfunction(L, lcf1113);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf1115, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 4);

  /* local env = val2env(e) */
  lc_getupvalue(L, lua_upvalueindex(1), 3, 128);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 5);

  /* if env == false then */
  enum { lc1116 = 5 };
  lua_pushboolean(L, 0);
  const int lc1117 = lua_equal(L, 5, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1117);
  const int lc1118 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1118) {

    /* return parse_error() */
    const int lc1119 = lua_gettop(L);
    lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
    lua_call(L, 0, LUA_MULTRET);
    return (lua_gettop(L) - lc1119);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L, lc1116);
  assert(lua_gettop(L) == 5);

  /* return builtin_form_apply(env, f, jsxs) */
  const int lc1120 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 62);
  lua_pushvalue(L, 5);
  lua_pushvalue(L, 2);
  lua_pushvalue(L, 4);
  lua_call(L, 3, LUA_MULTRET);
  return (lua_gettop(L) - lc1120);
  assert(lua_gettop(L) == 5);
}

/* function(xs) */
static int lcf1122(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* return xs */
  lua_pushvalue(L, 1);
  return 1;
  assert(lua_gettop(L) == 1);
}

/* function(xs, y) */
static int lcf1124(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* return parse_error() */
  const int lc1123 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 0, 180);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1123);
  assert(lua_gettop(L) == 2);
}

/* function(f, xs) */
static int lcf1126(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);

  /* local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end) */
  lc_getupvalue(L, lua_upvalueindex(1), 5, 126);
  lua_pushvalue(L, 2);
  lua_pushcfunction(L, lcf1122);
  lua_pushvalue(L, lua_upvalueindex(1));
  lua_pushcclosure(L, lcf1124, 1);
  lua_call(L, 3, 1);
  assert(lua_gettop(L) == 3);

  /* return apply(f, jsxs) */
  const int lc1125 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 20, 53);
  lua_pushvalue(L, 1);
  lua_pushvalue(L, 3);
  lua_call(L, 2, LUA_MULTRET);
  return (lua_gettop(L) - lc1125);
  assert(lua_gettop(L) == 3);
}

/* name: complex_parse
 * function(x) */
static int lcf1_complex_parse(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local state_const, state, eof, get, put, parse_error, a_space_p, space,
   * symbol, list, data, readerror, readeval, readfuncapply, readformbuiltin,
   * readapply, a_symbol_p, val, un_maybe, not_eof, assert_get,
   * readsysname_no_pack, readsysname */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc849 = 2 };
  assert((lua_gettop(L) == lc849));
  lua_settop(L, (lua_gettop(L) + 23));
  lua_rawseti(L, lc849, 163);
  lua_rawseti(L, lc849, 164);
  lua_rawseti(L, lc849, 165);
  lua_rawseti(L, lc849, 166);
  lua_rawseti(L, lc849, 167);
  lua_rawseti(L, lc849, 168);
  lua_rawseti(L, lc849, 169);
  lua_rawseti(L, lc849, 170);
  lua_rawseti(L, lc849, 171);
  lua_rawseti(L, lc849, 172);
  lua_rawseti(L, lc849, 173);
  lua_rawseti(L, lc849, 174);
  lua_rawseti(L, lc849, 175);
  lua_rawseti(L, lc849, 176);
  lua_rawseti(L, lc849, 177);
  lua_rawseti(L, lc849, 178);
  lua_rawseti(L, lc849, 179);
  lua_rawseti(L, lc849, 180);
  lua_rawseti(L, lc849, 181);
  lua_rawseti(L, lc849, 182);
  lua_rawseti(L, lc849, 183);
  lua_rawseti(L, lc849, 184);
  lua_rawseti(L, lc849, 185);
  assert(lua_gettop(L) == 2);

  /* eof = function()
   *         return (#state_const) == state;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_eof, 1);
  lc_setupvalue(L, lc849, 0, 183);
  assert(lua_gettop(L) == 2);

  /* get = function()
   *         ASSERT(not eof());
   *         local ret = state_const:sub(state + 1, state + 1);
   *         state = state + 1;
   *         return ret;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_get, 1);
  lc_setupvalue(L, lc849, 0, 182);
  assert(lua_gettop(L) == 2);

  /* put = function(x)
   *         ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x);
   *         state = state - 1;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_put, 1);
  lc_setupvalue(L, lc849, 0, 181);
  assert(lua_gettop(L) == 2);

  /* parse_error = function()
   *         error("TheLanguage parse ERROR!");
   *     end */
  lua_pushcfunction(L, lcf2_parse_error);
  lc_setupvalue(L, lc849, 0, 180);
  assert(lua_gettop(L) == 2);

  /* a_space_p = function(x)
   *         return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r");
   *     end */
  lua_pushcfunction(L, lcf2_a_space_p);
  lc_setupvalue(L, lc849, 0, 179);
  assert(lua_gettop(L) == 2);

  /* space = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if not a_space_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_space_p(x) and (not eof()) do
   *             x = get();
   *         end
   *         if not a_space_p(x) then
   *             put(x);
   *         end
   *         return true;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_space, 1);
  lc_setupvalue(L, lc849, 0, 178);
  assert(lua_gettop(L) == 2);

  /* symbol = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         local ret = "";
   *         if not a_symbol_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_symbol_p(x) and (not eof()) do
   *             ret = ret .. x;
   *             x = get();
   *         end
   *         if a_symbol_p(x) then
   *             ret = ret .. x;
   *         else
   *             put(x);
   *         end
   *         return new_symbol(ret);
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_symbol, 1);
  lc_setupvalue(L, lc849, 0, 177);
  assert(lua_gettop(L) == 2);

  /* list = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "(" then
   *             put(x);
   *             return false;
   *         end
   *         local HOLE = new_symbol("!!@@READ||HOLE@@!!");
   *         local ret = HOLE;
   *         local set_last;
   *         set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end;
   *         local last_add;
   *         last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end;
   *         while true do
   *             space();
   *             if eof() then
   *                 return parse_error();
   *             end
   *             x = get();
   *             if x == ")" then
   *                 set_last(null_v);
   *                 return ret;
   *             end
   *             if x == "." then
   *                 space();
   *                 local e = val();
   *                 set_last(e);
   *                 space();
   *                 if eof() then
   *                     return parse_error();
   *                 end
   *                 x = get();
   *                 if x ~= ")" then
   *                     return parse_error();
   *                 end
   *                 return ret;
   *             end
   *             put(x);
   *             local e = val();
   *             last_add(e);
   *         end
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_list, 1);
  lc_setupvalue(L, lc849, 0, 176);
  assert(lua_gettop(L) == 2);

  /* data = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "#" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_data(construction_head(xs), construction_tail(xs));
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_data, 1);
  lc_setupvalue(L, lc849, 0, 175);
  assert(lua_gettop(L) == 2);

  /* readerror = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "!" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_error(construction_head(xs), construction_tail(xs));
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_readerror, 1);
  lc_setupvalue(L, lc849, 0, 174);
  assert(lua_gettop(L) == 2);

  /* a_symbol_p = function(x)
   *         if a_space_p(x) then
   *             return false;
   *         end
   *         local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~",
   * "/", "-", ">", "_", ":", "?", "[", "]", "&"};
   *         do
   *             local i = 0;
   *             while i < (#not_xs) do
   *                 if x == not_xs[i + 1] then
   *                     return false;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return true;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_a_symbol_p, 1);
  lc_setupvalue(L, lc849, 0, 169);
  assert(lua_gettop(L) == 2);

  /* val = function()
   *         space();
   *         local fs = {list, readsysname, data, readerror, readeval,
   * readfuncapply, readformbuiltin, readapply};
   *         do
   *             local i = 0;
   *             while i < (#fs) do
   *                 local x = fs[i + 1]();
   *                 if x ~= false then
   *                     return x;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return parse_error();
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_val, 1);
  lc_setupvalue(L, lc849, 0, 168);
  assert(lua_gettop(L) == 2);

  /* un_maybe = function(x)
   *         if x == false then
   *             return parse_error();
   *         end
   *         return x;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1_un_maybe, 1);
  lc_setupvalue(L, lc849, 0, 167);
  assert(lua_gettop(L) == 2);

  /* not_eof = function()
   *         return not eof();
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1_not_eof, 1);
  lc_setupvalue(L, lc849, 0, 166);
  assert(lua_gettop(L) == 2);

  /* assert_get = function(c)
   *         un_maybe(not_eof());
   *         un_maybe(get() == c);
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1_assert_get, 1);
  lc_setupvalue(L, lc849, 0, 165);
  assert(lua_gettop(L) == 2);

  /* readsysname_no_pack = function()
   *         local readsysname_no_pack_inner_must, may_xfx_xf;
   *         readsysname_no_pack_inner_must = function(strict)
   *             if strict == nil then
   *                 strict = false;
   *             end
   *             local readsysname_no_pack_bracket;
   *             readsysname_no_pack_bracket = function()
   *                 assert_get("[");
   *                 local x = readsysname_no_pack_inner_must();
   *                 assert_get("]");
   *                 return x;
   *             end;
   *             local fs = (strict and {list, symbol,
   * readsysname_no_pack_bracket, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply}) or {list, readsysname_no_pack, data,
   * readerror, readeval, readfuncapply, readformbuiltin, readapply};
   *             do
   *                 local i = 0;
   *                 while i < (#fs) do
   *                     local x = fs[i + 1]();
   *                     if x ~= false then
   *                         return x;
   *                     end
   *                     i = i + 1;
   *                 end
   *             end
   *             return parse_error();
   *         end;
   *         may_xfx_xf = function(x)
   *             if eof() then
   *                 return x;
   *             end
   *             local head = get();
   *             if head == "." then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_list(x), something_symbol), y);
   *             elseif head == ":" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol, y, x);
   *             elseif head == "~" then
   *                 return new_list(isOrNot_symbol, x);
   *             elseif head == "@" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_construction(x, something_symbol),
   * something_symbol), y);
   *             elseif head == "?" then
   *                 return new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, x));
   *             elseif head == "/" then
   *                 local ys = {x};
   *                 while true do
   *                     local y = readsysname_no_pack_inner_must(true);
   *                     __TS__ArrayPush(ys, y);
   *                     if eof() then
   *                         break;
   *                     end
   *                     local c0 = get();
   *                     if c0 ~= "/" then
   *                         put(c0);
   *                         break;
   *                     end
   *                 end
   *                 return new_list(sub_symbol, jsArray_to_list(ys));
   *             else
   *                 put(head);
   *                 return x;
   *             end
   *             return ERROR();
   *         end;
   *         if eof() then
   *             return false;
   *         end
   *         local head = get();
   *         if head == "&" then
   *             un_maybe(not_eof());
   *             local c0 = get();
   *             if c0 == "+" then
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(form_symbol, new_list(system_symbol, x));
   *             else
   *                 put(c0);
   *             end
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(form_symbol, x);
   *         elseif head == ":" then
   *             un_maybe(not_eof());
   *             local c0 = get();
   *             if c0 == "&" then
   *                 assert_get(">");
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(form_symbol, new_list(function_symbol, something_symbol, x)),
   * theThing_symbol);
   *             elseif c0 == ">" then
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, something_symbol, x), theThing_symbol);
   *             else
   *                 put(c0);
   *             end
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(typeAnnotation_symbol, x, theThing_symbol);
   *         elseif head == "+" then
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(system_symbol, x);
   *         elseif head == "[" then
   *             local x = readsysname_no_pack_inner_must();
   *             assert_get("]");
   *             return may_xfx_xf(x);
   *         elseif head == "_" then
   *             assert_get(":");
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(typeAnnotation_symbol, x, something_symbol);
   *         else
   *             put(head);
   *             local x = symbol();
   *             if x == false then
   *                 return false;
   *             end
   *             return may_xfx_xf(x);
   *         end
   *         return ERROR();
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1_readsysname_no_pack, 1);
  lc_setupvalue(L, lc849, 0, 164);
  assert(lua_gettop(L) == 2);

  /* readsysname = function()
   *         local x = readsysname_no_pack();
   *         if x == false then
   *             return false;
   *         end
   *         if symbol_p(x) then
   *             return x;
   *         end
   *         return systemName_make(x);
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1_readsysname, 1);
  lc_setupvalue(L, lc849, 0, 163);
  assert(lua_gettop(L) == 2);

  /* state_const = x */
  lua_pushvalue(L, 1);
  lc_setupvalue(L, lc849, 0, 185);
  assert(lua_gettop(L) == 2);

  /* state = 0 */
  lua_pushnumber(L, 0);
  lc_setupvalue(L, lc849, 0, 184);
  assert(lua_gettop(L) == 2);

  /* local make_read_two */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);

  /* make_read_two = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_make_read_two, 1);
  lua_replace(L, 3);
  assert(lua_gettop(L) == 3);

  /* local make_read_three */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 4);

  /* make_read_three = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end;
   *     end */
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf2_make_read_three, 1);
  lua_replace(L, 4);
  assert(lua_gettop(L) == 4);

  /* readeval = make_read_two("$", function(e, x)
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return evaluate(env, x);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "$");
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1107, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc849, 0, 173);
  assert(lua_gettop(L) == 4);

  /* readfuncapply = make_read_two("%", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return builtin_func_apply(f, jsxs);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "%");
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1112, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc849, 0, 172);
  assert(lua_gettop(L) == 4);

  /* readformbuiltin = make_read_three("@", function(e, f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return builtin_form_apply(env, f, jsxs);
   *     end) */
  lua_pushvalue(L, 4);
  lua_pushliteral(L, "@");
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1121, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc849, 0, 171);
  assert(lua_gettop(L) == 4);

  /* readapply = make_read_two("^", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return apply(f, jsxs);
   *     end) */
  lua_pushvalue(L, 3);
  lua_pushliteral(L, "^");
  lua_pushvalue(L, lc849);
  lua_pushcclosure(L, lcf1126, 1);
  lua_call(L, 2, 1);
  lc_setupvalue(L, lc849, 0, 170);
  assert(lua_gettop(L) == 4);

  /* return val() */
  const int lc1127 = lua_gettop(L);
  lc_getupvalue(L, lc849, 0, 168);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1127);
  assert(lua_gettop(L) == 4);
}

/* name: inner_bracket
 * function(x) */
static int lcf1_inner_bracket(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* if where == "inner" then */
  enum { lc1134 = 1 };
  lc_getupvalue(L, lua_upvalueindex(1), 0, 196);
  lua_pushliteral(L, "inner");
  const int lc1135 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc1135);
  const int lc1136 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1136) {

    /* return ("[" .. x) .. "]" */
    lua_pushliteral(L, "[");
    lua_pushvalue(L, 1);
    lua_concat(L, 2);
    lua_pushliteral(L, "]");
    lua_concat(L, 2);
    return 1;
    assert(lua_gettop(L) == 1);
  } else {

    /* elseif where == "top" then */
    enum { lc1137 = 1 };
    lc_getupvalue(L, lua_upvalueindex(1), 0, 196);
    lua_pushliteral(L, "top");
    const int lc1138 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc1138);
    const int lc1139 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1139) {

      /* return x */
      lua_pushvalue(L, 1);
      return 1;
      assert(lua_gettop(L) == 1);
    }
    lua_settop(L, lc1137);
  }
  lua_settop(L, lc1134);
  assert(lua_gettop(L) == 1);

  /* return ERROR() */
  const int lc1140 = lua_gettop(L);
  lc_getupvalue(L, lua_upvalueindex(1), 22, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1140);
  assert(lua_gettop(L) == 1);
}

/* name: print_sys_name
 * function(x, where) */
static int lcf1_print_sys_name(lua_State *L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L, 2);
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc1130 = 3 };
  assert((lua_gettop(L) == lc1130));
  lua_pushvalue(L, 2);
  lua_rawseti(L, -2, 196);

  /* if symbol_p(x) then */
  enum { lc1131 = 3 };
  lc_getupvalue(L, lc1130, 22, 85);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  const int lc1132 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1132) {

    /* return un_symbol(x) */
    const int lc1133 = lua_gettop(L);
    lc_getupvalue(L, lc1130, 22, 84);
    lua_pushvalue(L, 1);
    lua_call(L, 1, LUA_MULTRET);
    return (lua_gettop(L) - lc1133);
    assert(lua_gettop(L) == 3);
  }
  lua_settop(L, lc1131);
  assert(lua_gettop(L) == 3);

  /* local inner_bracket */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) == 4);

  /* inner_bracket = function(x)
   *             if where == "inner" then
   *                 return ("[" .. x) .. "]";
   *             elseif where == "top" then
   *                 return x;
   *             end
   *             return ERROR();
   *         end */
  lua_pushvalue(L, lc1130);
  lua_pushcclosure(L, lcf1_inner_bracket, 1);
  lua_replace(L, 4);
  assert(lua_gettop(L) == 4);

  /* local maybe_xs = maybe_list_to_jsArray(x) */
  lc_getupvalue(L, lc1130, 6, 127);
  lua_pushvalue(L, 1);
  lua_call(L, 1, 1);
  assert(lua_gettop(L) == 5);

  /* if ((maybe_xs ~= false) and ((#maybe_xs) == 3)) and
   * jsbool_no_force_equal_p(maybe_xs[0 + 1], typeAnnotation_symbol) then */
  enum { lc1141 = 5 };
  lua_pushboolean(L, 0);
  const int lc1142 = lua_equal(L, 5, -1);
  lua_pop(L, 1);
  lua_pushboolean(L, lc1142);
  lua_pushboolean(L, !(lua_toboolean(L, -1)));
  lua_remove(L, -2);
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    const double lc1143 = lua_objlen(L, 5);
    lua_pushnumber(L, lc1143);
    lua_pushnumber(L, 3);
    const int lc1144 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc1144);
  }
  if (lua_toboolean(L, -1)) {
    lua_pop(L, 1);
    lc_getupvalue(L, lc1130, 4, 136);
    lua_pushnumber(L, 1);
    lua_gettable(L, 5);
    lc_getupvalue(L, lc1130, 16, 117);
    lua_call(L, 2, 1);
  }
  const int lc1145 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1145) {

    /* local maybe_lst_2 = maybe_list_to_jsArray(maybe_xs[1 + 1]) */
    lc_getupvalue(L, lc1130, 6, 127);
    lua_pushnumber(L, 2);
    lua_gettable(L, 5);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 6);

    /* if ((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 3)) and
     * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], function_symbol) then */
    enum { lc1146 = 6 };
    lua_pushboolean(L, 0);
    const int lc1147 = lua_equal(L, 6, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc1147);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      const double lc1148 = lua_objlen(L, 6);
      lua_pushnumber(L, lc1148);
      lua_pushnumber(L, 3);
      const int lc1149 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc1149);
    }
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 1);
      lua_gettable(L, 6);
      lc_getupvalue(L, lc1130, 22, 47);
      lua_call(L, 2, 1);
    }
    const int lc1150 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1150) {

      /* local var_2_1 = maybe_lst_2[1 + 1] */
      lua_pushnumber(L, 2);
      lua_gettable(L, 6);
      assert(lua_gettop(L) == 7);

      /* local maybe_lst_3 = maybe_list_to_jsArray(var_2_1) */
      lc_getupvalue(L, lc1130, 6, 127);
      lua_pushvalue(L, 7);
      lua_call(L, 1, 1);
      assert(lua_gettop(L) == 8);

      /* if ((maybe_lst_3 ~= false) and ((#maybe_lst_3) == 1)) and
       * jsbool_no_force_equal_p(maybe_lst_2[2 + 1], something_symbol) then */
      enum { lc1151 = 8 };
      lua_pushboolean(L, 0);
      const int lc1152 = lua_equal(L, 8, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc1152);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        const double lc1153 = lua_objlen(L, 8);
        lua_pushnumber(L, lc1153);
        lua_pushnumber(L, 1);
        const int lc1154 = lua_equal(L, -2, -1);
        lua_pop(L, 2);
        lua_pushboolean(L, lc1154);
      }
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc1130, 4, 136);
        lua_pushnumber(L, 3);
        lua_gettable(L, 6);
        lc_getupvalue(L, lc1130, 17, 116);
        lua_call(L, 2, 1);
      }
      const int lc1155 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1155) {

        /* return inner_bracket((print_sys_name(maybe_lst_3[0 + 1], "inner") ..
         * ".") .. print_sys_name(maybe_xs[2 + 1], "inner")) */
        const int lc1156 = lua_gettop(L);
        lua_pushvalue(L, 4);
        lc_getupvalue(L, lc1130, 1, 195);
        lua_pushnumber(L, 1);
        lua_gettable(L, 8);
        lua_pushliteral(L, "inner");
        lua_call(L, 2, 1);
        lua_pushliteral(L, ".");
        lua_concat(L, 2);
        lc_getupvalue(L, lc1130, 1, 195);
        lua_pushnumber(L, 3);
        lua_gettable(L, 5);
        lua_pushliteral(L, "inner");
        lua_call(L, 2, 1);
        lua_concat(L, 2);
        lua_call(L, 1, LUA_MULTRET);
        return (lua_gettop(L) - lc1156);
        assert(lua_gettop(L) == 8);
      } else {

        /* elseif (construction_p(var_2_1) and
         * jsbool_no_force_equal_p(construction_tail(var_2_1),
         * something_symbol)) and jsbool_no_force_equal_p(maybe_lst_2[2 + 1],
         * something_symbol) then */
        enum { lc1157 = 8 };
        lc_getupvalue(L, lc1130, 22, 82);
        lua_pushvalue(L, 7);
        lua_call(L, 1, 1);
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          lc_getupvalue(L, lc1130, 4, 136);
          lc_getupvalue(L, lc1130, 22, 80);
          lua_pushvalue(L, 7);
          lua_call(L, 1, 1);
          lc_getupvalue(L, lc1130, 17, 116);
          lua_call(L, 2, 1);
        }
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          lc_getupvalue(L, lc1130, 4, 136);
          lua_pushnumber(L, 3);
          lua_gettable(L, 6);
          lc_getupvalue(L, lc1130, 17, 116);
          lua_call(L, 2, 1);
        }
        const int lc1158 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1158) {

          /* return inner_bracket((print_sys_name(construction_head(var_2_1),
           * "inner") .. "@") .. print_sys_name(maybe_xs[2 + 1], "inner")) */
          const int lc1159 = lua_gettop(L);
          lua_pushvalue(L, 4);
          lc_getupvalue(L, lc1130, 1, 195);
          lc_getupvalue(L, lc1130, 22, 81);
          lua_pushvalue(L, 7);
          lua_call(L, 1, 1);
          lua_pushliteral(L, "inner");
          lua_call(L, 2, 1);
          lua_pushliteral(L, "@");
          lua_concat(L, 2);
          lc_getupvalue(L, lc1130, 1, 195);
          lua_pushnumber(L, 3);
          lua_gettable(L, 5);
          lua_pushliteral(L, "inner");
          lua_call(L, 2, 1);
          lua_concat(L, 2);
          lua_call(L, 1, LUA_MULTRET);
          return (lua_gettop(L) - lc1159);
          assert(lua_gettop(L) == 8);
        } else {

          /* elseif jsbool_no_force_equal_p(var_2_1, something_symbol) and
           * jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol) then */
          enum { lc1160 = 8 };
          lc_getupvalue(L, lc1130, 4, 136);
          lua_pushvalue(L, 7);
          lc_getupvalue(L, lc1130, 17, 116);
          lua_call(L, 2, 1);
          if (lua_toboolean(L, -1)) {
            lua_pop(L, 1);
            lc_getupvalue(L, lc1130, 4, 136);
            lua_pushnumber(L, 3);
            lua_gettable(L, 5);
            lc_getupvalue(L, lc1130, 18, 115);
            lua_call(L, 2, 1);
          }
          const int lc1161 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc1161) {

            /* return inner_bracket(":>" .. print_sys_name(maybe_lst_2[2 + 1],
             * "inner")) */
            const int lc1162 = lua_gettop(L);
            lua_pushvalue(L, 4);
            lua_pushliteral(L, ":>");
            lc_getupvalue(L, lc1130, 1, 195);
            lua_pushnumber(L, 3);
            lua_gettable(L, 6);
            lua_pushliteral(L, "inner");
            lua_call(L, 2, 1);
            lua_concat(L, 2);
            lua_call(L, 1, LUA_MULTRET);
            return (lua_gettop(L) - lc1162);
            assert(lua_gettop(L) == 8);
          }
          lua_settop(L, lc1160);
        }
        lua_settop(L, lc1157);
      }
      lua_settop(L, lc1151);
      assert(lua_gettop(L) == 8);
    }
    lua_settop(L, lc1146);
    assert(lua_gettop(L) == 6);

    /* local maybe_lst_44 = maybe_list_to_jsArray(maybe_xs[2 + 1]) */
    lc_getupvalue(L, lc1130, 6, 127);
    lua_pushnumber(L, 3);
    lua_gettable(L, 5);
    lua_call(L, 1, 1);
    assert(lua_gettop(L) == 7);

    /* if ((jsbool_no_force_equal_p(maybe_xs[1 + 1], function_symbol) and
     * (maybe_lst_44 ~= false)) and ((#maybe_lst_44) == 2)) and
     * jsbool_no_force_equal_p(maybe_lst_44[0 + 1], isOrNot_symbol) then */
    enum { lc1163 = 7 };
    lc_getupvalue(L, lc1130, 4, 136);
    lua_pushnumber(L, 2);
    lua_gettable(L, 5);
    lc_getupvalue(L, lc1130, 22, 47);
    lua_call(L, 2, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lua_pushboolean(L, 0);
      const int lc1164 = lua_equal(L, 7, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc1164);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
    }
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      const double lc1165 = lua_objlen(L, 7);
      lua_pushnumber(L, lc1165);
      lua_pushnumber(L, 2);
      const int lc1166 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc1166);
    }
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 1);
      lua_gettable(L, 7);
      lc_getupvalue(L, lc1130, 15, 118);
      lua_call(L, 2, 1);
    }
    const int lc1167 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1167) {

      /* return inner_bracket(print_sys_name(maybe_lst_44[1 + 1], "inner") ..
       * "?") */
      const int lc1168 = lua_gettop(L);
      lua_pushvalue(L, 4);
      lc_getupvalue(L, lc1130, 1, 195);
      lua_pushnumber(L, 2);
      lua_gettable(L, 7);
      lua_pushliteral(L, "inner");
      lua_call(L, 2, 1);
      lua_pushliteral(L, "?");
      lua_concat(L, 2);
      lua_call(L, 1, LUA_MULTRET);
      return (lua_gettop(L) - lc1168);
      assert(lua_gettop(L) == 7);
    }
    lua_settop(L, lc1163);
    assert(lua_gettop(L) == 7);

    /* if (((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 2)) and
     * jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol)) and
     * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], form_symbol) then */
    enum { lc1169 = 7 };
    lua_pushboolean(L, 0);
    const int lc1170 = lua_equal(L, 6, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc1170);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      const double lc1171 = lua_objlen(L, 6);
      lua_pushnumber(L, lc1171);
      lua_pushnumber(L, 2);
      const int lc1172 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc1172);
    }
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 3);
      lua_gettable(L, 5);
      lc_getupvalue(L, lc1130, 18, 115);
      lua_call(L, 2, 1);
    }
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 1);
      lua_gettable(L, 6);
      lc_getupvalue(L, lc1130, 22, 46);
      lua_call(L, 2, 1);
    }
    const int lc1173 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1173) {

      /* local maybe_lst_88 = maybe_list_to_jsArray(maybe_lst_2[1 + 1]) */
      lc_getupvalue(L, lc1130, 6, 127);
      lua_pushnumber(L, 2);
      lua_gettable(L, 6);
      lua_call(L, 1, 1);
      assert(lua_gettop(L) == 8);

      /* if (((maybe_lst_88 ~= false) and ((#maybe_lst_88) == 3)) and
       * jsbool_no_force_equal_p(maybe_lst_88[0 + 1], function_symbol)) and
       * jsbool_no_force_equal_p(maybe_lst_88[1 + 1], something_symbol) then */
      enum { lc1174 = 8 };
      lua_pushboolean(L, 0);
      const int lc1175 = lua_equal(L, 8, -1);
      lua_pop(L, 1);
      lua_pushboolean(L, lc1175);
      lua_pushboolean(L, !(lua_toboolean(L, -1)));
      lua_remove(L, -2);
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        const double lc1176 = lua_objlen(L, 8);
        lua_pushnumber(L, lc1176);
        lua_pushnumber(L, 3);
        const int lc1177 = lua_equal(L, -2, -1);
        lua_pop(L, 2);
        lua_pushboolean(L, lc1177);
      }
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc1130, 4, 136);
        lua_pushnumber(L, 1);
        lua_gettable(L, 8);
        lc_getupvalue(L, lc1130, 22, 47);
        lua_call(L, 2, 1);
      }
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc1130, 4, 136);
        lua_pushnumber(L, 2);
        lua_gettable(L, 8);
        lc_getupvalue(L, lc1130, 17, 116);
        lua_call(L, 2, 1);
      }
      const int lc1178 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1178) {

        /* return inner_bracket(":&>" .. print_sys_name(maybe_lst_88[2 + 1],
         * "inner")) */
        const int lc1179 = lua_gettop(L);
        lua_pushvalue(L, 4);
        lua_pushliteral(L, ":&>");
        lc_getupvalue(L, lc1130, 1, 195);
        lua_pushnumber(L, 3);
        lua_gettable(L, 8);
        lua_pushliteral(L, "inner");
        lua_call(L, 2, 1);
        lua_concat(L, 2);
        lua_call(L, 1, LUA_MULTRET);
        return (lua_gettop(L) - lc1179);
        assert(lua_gettop(L) == 8);
      }
      lua_settop(L, lc1174);
      assert(lua_gettop(L) == 8);
    }
    lua_settop(L, lc1169);
    assert(lua_gettop(L) == 7);

    /* local hd = (jsbool_no_force_equal_p(maybe_xs[2 + 1], something_symbol)
     * and "_") or ((jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol)
     * and "") or print_sys_name(maybe_xs[2 + 1], "inner")) */
    lc_getupvalue(L, lc1130, 4, 136);
    lua_pushnumber(L, 3);
    lua_gettable(L, 5);
    lc_getupvalue(L, lc1130, 17, 116);
    lua_call(L, 2, 1);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      lua_pushliteral(L, "_");
    }
    if (!(lua_toboolean(L, -1))) {
      lua_pop(L, 1);
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 3);
      lua_gettable(L, 5);
      lc_getupvalue(L, lc1130, 18, 115);
      lua_call(L, 2, 1);
      if (lua_toboolean(L, -1)) {
        lua_pop(L, 1);
        lua_pushliteral(L, "");
      }
      if (!(lua_toboolean(L, -1))) {
        lua_pop(L, 1);
        lc_getupvalue(L, lc1130, 1, 195);
        lua_pushnumber(L, 3);
        lua_gettable(L, 5);
        lua_pushliteral(L, "inner");
        lua_call(L, 2, 1);
      }
    }
    assert(lua_gettop(L) == 8);

    /* return inner_bracket((hd .. ":") .. print_sys_name(maybe_xs[1 + 1],
     * "inner")) */
    const int lc1180 = lua_gettop(L);
    lua_pushvalue(L, 4);
    lua_pushvalue(L, 8);
    lua_pushliteral(L, ":");
    lua_concat(L, 2);
    lc_getupvalue(L, lc1130, 1, 195);
    lua_pushnumber(L, 2);
    lua_gettable(L, 5);
    lua_pushliteral(L, "inner");
    lua_call(L, 2, 1);
    lua_concat(L, 2);
    lua_call(L, 1, LUA_MULTRET);
    return (lua_gettop(L) - lc1180);
    assert(lua_gettop(L) == 8);
  } else {

    /* elseif (maybe_xs ~= false) and ((#maybe_xs) == 2) then */
    enum { lc1181 = 5 };
    lua_pushboolean(L, 0);
    const int lc1182 = lua_equal(L, 5, -1);
    lua_pop(L, 1);
    lua_pushboolean(L, lc1182);
    lua_pushboolean(L, !(lua_toboolean(L, -1)));
    lua_remove(L, -2);
    if (lua_toboolean(L, -1)) {
      lua_pop(L, 1);
      const double lc1183 = lua_objlen(L, 5);
      lua_pushnumber(L, lc1183);
      lua_pushnumber(L, 2);
      const int lc1184 = lua_equal(L, -2, -1);
      lua_pop(L, 2);
      lua_pushboolean(L, lc1184);
    }
    const int lc1185 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1185) {

      /* if jsbool_no_force_equal_p(maybe_xs[0 + 1], form_symbol) then */
      enum { lc1186 = 5 };
      lc_getupvalue(L, lc1130, 4, 136);
      lua_pushnumber(L, 1);
      lua_gettable(L, 5);
      lc_getupvalue(L, lc1130, 22, 46);
      lua_call(L, 2, 1);
      const int lc1187 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1187) {

        /* local maybe_lst_288 = maybe_list_to_jsArray(maybe_xs[1 + 1]) */
        lc_getupvalue(L, lc1130, 6, 127);
        lua_pushnumber(L, 2);
        lua_gettable(L, 5);
        lua_call(L, 1, 1);
        assert(lua_gettop(L) == 6);

        /* if ((maybe_lst_288 ~= false) and ((#maybe_lst_288) == 2)) and
         * jsbool_no_force_equal_p(maybe_lst_288[0 + 1], system_symbol) then */
        enum { lc1188 = 6 };
        lua_pushboolean(L, 0);
        const int lc1189 = lua_equal(L, 6, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc1189);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          const double lc1190 = lua_objlen(L, 6);
          lua_pushnumber(L, lc1190);
          lua_pushnumber(L, 2);
          const int lc1191 = lua_equal(L, -2, -1);
          lua_pop(L, 2);
          lua_pushboolean(L, lc1191);
        }
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          lc_getupvalue(L, lc1130, 4, 136);
          lua_pushnumber(L, 1);
          lua_gettable(L, 6);
          lc_getupvalue(L, lc1130, 22, 48);
          lua_call(L, 2, 1);
        }
        const int lc1192 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1192) {

          /* return inner_bracket("&+" .. print_sys_name(maybe_lst_288[1 + 1],
           * "inner")) */
          const int lc1193 = lua_gettop(L);
          lua_pushvalue(L, 4);
          lua_pushliteral(L, "&+");
          lc_getupvalue(L, lc1130, 1, 195);
          lua_pushnumber(L, 2);
          lua_gettable(L, 6);
          lua_pushliteral(L, "inner");
          lua_call(L, 2, 1);
          lua_concat(L, 2);
          lua_call(L, 1, LUA_MULTRET);
          return (lua_gettop(L) - lc1193);
          assert(lua_gettop(L) == 6);
        }
        lua_settop(L, lc1188);
        assert(lua_gettop(L) == 6);

        /* return inner_bracket("&" .. print_sys_name(maybe_xs[1 + 1], "inner"))
         */
        const int lc1194 = lua_gettop(L);
        lua_pushvalue(L, 4);
        lua_pushliteral(L, "&");
        lc_getupvalue(L, lc1130, 1, 195);
        lua_pushnumber(L, 2);
        lua_gettable(L, 5);
        lua_pushliteral(L, "inner");
        lua_call(L, 2, 1);
        lua_concat(L, 2);
        lua_call(L, 1, LUA_MULTRET);
        return (lua_gettop(L) - lc1194);
        assert(lua_gettop(L) == 6);
      } else {

        /* elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], isOrNot_symbol) then
         */
        enum { lc1195 = 5 };
        lc_getupvalue(L, lc1130, 4, 136);
        lua_pushnumber(L, 1);
        lua_gettable(L, 5);
        lc_getupvalue(L, lc1130, 15, 118);
        lua_call(L, 2, 1);
        const int lc1196 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1196) {

          /* return inner_bracket(print_sys_name(maybe_xs[1 + 1], "inner") ..
           * "~") */
          const int lc1197 = lua_gettop(L);
          lua_pushvalue(L, 4);
          lc_getupvalue(L, lc1130, 1, 195);
          lua_pushnumber(L, 2);
          lua_gettable(L, 5);
          lua_pushliteral(L, "inner");
          lua_call(L, 2, 1);
          lua_pushliteral(L, "~");
          lua_concat(L, 2);
          lua_call(L, 1, LUA_MULTRET);
          return (lua_gettop(L) - lc1197);
          assert(lua_gettop(L) == 5);
        } else {

          /* elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], system_symbol) then
           */
          enum { lc1198 = 5 };
          lc_getupvalue(L, lc1130, 4, 136);
          lua_pushnumber(L, 1);
          lua_gettable(L, 5);
          lc_getupvalue(L, lc1130, 22, 48);
          lua_call(L, 2, 1);
          const int lc1199 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc1199) {

            /* return inner_bracket("+" .. print_sys_name(maybe_xs[1 + 1],
             * "inner")) */
            const int lc1200 = lua_gettop(L);
            lua_pushvalue(L, 4);
            lua_pushliteral(L, "+");
            lc_getupvalue(L, lc1130, 1, 195);
            lua_pushnumber(L, 2);
            lua_gettable(L, 5);
            lua_pushliteral(L, "inner");
            lua_call(L, 2, 1);
            lua_concat(L, 2);
            lua_call(L, 1, LUA_MULTRET);
            return (lua_gettop(L) - lc1200);
            assert(lua_gettop(L) == 5);
          } else {

            /* elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], sub_symbol) then
             */
            enum { lc1201 = 5 };
            lc_getupvalue(L, lc1130, 4, 136);
            lua_pushnumber(L, 1);
            lua_gettable(L, 5);
            lc_getupvalue(L, lc1130, 14, 119);
            lua_call(L, 2, 1);
            const int lc1202 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc1202) {

              /* local maybe_lst_8934 = maybe_list_to_jsArray(maybe_xs[1 + 1])
               */
              lc_getupvalue(L, lc1130, 6, 127);
              lua_pushnumber(L, 2);
              lua_gettable(L, 5);
              lua_call(L, 1, 1);
              assert(lua_gettop(L) == 6);

              /* if (maybe_lst_8934 ~= false) and ((#maybe_lst_8934) > 1) then
               */
              enum { lc1203 = 6 };
              lua_pushboolean(L, 0);
              const int lc1204 = lua_equal(L, 6, -1);
              lua_pop(L, 1);
              lua_pushboolean(L, lc1204);
              lua_pushboolean(L, !(lua_toboolean(L, -1)));
              lua_remove(L, -2);
              if (lua_toboolean(L, -1)) {
                lua_pop(L, 1);
                lua_pushnumber(L, 1);
                const double lc1205 = lua_objlen(L, 6);
                lua_pushnumber(L, lc1205);
                const int lc1206 = lua_lessthan(L, -2, -1);
                lua_pop(L, 2);
                lua_pushboolean(L, lc1206);
              }
              const int lc1207 = lua_toboolean(L, -1);
              lua_pop(L, 1);
              if (lc1207) {

                /* local tmp = print_sys_name(maybe_lst_8934[0 + 1], "inner") */
                lc_getupvalue(L, lc1130, 1, 195);
                lua_pushnumber(L, 1);
                lua_gettable(L, 6);
                lua_pushliteral(L, "inner");
                lua_call(L, 2, 1);
                assert(lua_gettop(L) == 7);

                /* do
                 * local i = 1 */
                lua_pushnumber(L, 1);
                assert(lua_gettop(L) == 8);

                /* while i < (#maybe_lst_8934) do */
                enum { lc1208 = 8 };
                while (1) {
                  const double lc1209 = lua_objlen(L, 6);
                  lua_pushnumber(L, lc1209);
                  const int lc1210 = lua_lessthan(L, 8, -1);
                  lua_pop(L, 1);
                  lua_pushboolean(L, lc1210);
                  if (!(lua_toboolean(L, -1))) {
                    break;
                  }
                  lua_pop(L, 1);

                  /* tmp = tmp .. ("/" .. print_sys_name(maybe_lst_8934[i + 1],
                   * "inner")) */
                  lua_pushvalue(L, 7);
                  lua_pushliteral(L, "/");
                  lc_getupvalue(L, lc1130, 1, 195);
                  lua_pushnumber(L, 1);
                  lc_add(L, 8, -1);
                  lua_remove(L, -2);
                  lua_gettable(L, 6);
                  lua_pushliteral(L, "inner");
                  lua_call(L, 2, 1);
                  lua_concat(L, 2);
                  lua_concat(L, 2);
                  lua_replace(L, 7);
                  assert(lua_gettop(L) == 8);

                  /* i = i + 1 */
                  lua_pushnumber(L, 1);
                  lc_add(L, 8, -1);
                  lua_remove(L, -2);
                  lua_replace(L, 8);
                  assert(lua_gettop(L) == 8);
                }
                lua_settop(L, lc1208);
                assert(lua_gettop(L) == 8);

                /* internal: stack cleanup on scope exit */
                lua_pop(L, 1);
                assert(lua_gettop(L) == 7);

                /* return inner_bracket(tmp) */
                const int lc1211 = lua_gettop(L);
                lua_pushvalue(L, 4);
                lua_pushvalue(L, 7);
                lua_call(L, 1, LUA_MULTRET);
                return (lua_gettop(L) - lc1211);
                assert(lua_gettop(L) == 7);
              }
              lua_settop(L, lc1203);
              assert(lua_gettop(L) == 6);
            }
            lua_settop(L, lc1201);
          }
          lua_settop(L, lc1198);
        }
        lua_settop(L, lc1195);
      }
      lua_settop(L, lc1186);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc1181);
  }
  lua_settop(L, lc1141);
  assert(lua_gettop(L) == 5);

  /* if where == "inner" then */
  enum { lc1212 = 5 };
  lc_getupvalue(L, lc1130, 0, 196);
  lua_pushliteral(L, "inner");
  const int lc1213 = lua_equal(L, -2, -1);
  lua_pop(L, 2);
  lua_pushboolean(L, lc1213);
  const int lc1214 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1214) {

    /* return simple_print(x) */
    const int lc1215 = lua_gettop(L);
    lc_getupvalue(L, lc1130, 22, 2);
    lua_pushvalue(L, 1);
    lua_call(L, 1, LUA_MULTRET);
    return (lua_gettop(L) - lc1215);
    assert(lua_gettop(L) == 5);
  } else {

    /* elseif where == "top" then */
    enum { lc1216 = 5 };
    lc_getupvalue(L, lc1130, 0, 196);
    lua_pushliteral(L, "top");
    const int lc1217 = lua_equal(L, -2, -1);
    lua_pop(L, 2);
    lua_pushboolean(L, lc1217);
    const int lc1218 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1218) {

      /* return simple_print(systemName_make(x)) */
      const int lc1219 = lua_gettop(L);
      lc_getupvalue(L, lc1130, 22, 2);
      const int lc1220 = lua_gettop(L);
      lc_getupvalue(L, lc1130, 11, 122);
      lua_pushvalue(L, 1);
      lua_call(L, 1, LUA_MULTRET);
      lua_call(L, (lua_gettop(L) - lc1220), LUA_MULTRET);
      return (lua_gettop(L) - lc1219);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L, lc1216);
  }
  lua_settop(L, lc1212);
  assert(lua_gettop(L) == 5);

  /* return ERROR() */
  const int lc1221 = lua_gettop(L);
  lc_getupvalue(L, lc1130, 22, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1221);
  assert(lua_gettop(L) == 5);
}

/* name: complex_print
 * function(val) */
static int lcf1_complex_print(lua_State *L) {
  enum { lc_nformalargs = 1 };
  lua_settop(L, 1);

  /* local print_sys_name */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc1129 = 2 };
  assert((lua_gettop(L) == lc1129));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, lc1129, 195);
  assert(lua_gettop(L) == 2);

  /* print_sys_name = function(x, where)
   *         if symbol_p(x) then
   *             return un_symbol(x);
   *         end
   *         local inner_bracket;
   *         inner_bracket = function(x)
   *             if where == "inner" then
   *                 return ("[" .. x) .. "]";
   *             elseif where == "top" then
   *                 return x;
   *             end
   *             return ERROR();
   *         end;
   *         local maybe_xs = maybe_list_to_jsArray(x);
   *         if ((maybe_xs ~= false) and ((#maybe_xs) == 3)) and
   * jsbool_no_force_equal_p(maybe_xs[0 + 1], typeAnnotation_symbol) then
   *             local maybe_lst_2 = maybe_list_to_jsArray(maybe_xs[1 + 1]);
   *             if ((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 3)) and
   * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], function_symbol) then
   *                 local var_2_1 = maybe_lst_2[1 + 1];
   *                 local maybe_lst_3 = maybe_list_to_jsArray(var_2_1);
   *                 if ((maybe_lst_3 ~= false) and ((#maybe_lst_3) == 1)) and
   * jsbool_no_force_equal_p(maybe_lst_2[2 + 1], something_symbol) then
   *                     return inner_bracket((print_sys_name(maybe_lst_3[0 +
   * 1], "inner") .. ".") .. print_sys_name(maybe_xs[2 + 1], "inner"));
   *                 elseif (construction_p(var_2_1) and
   * jsbool_no_force_equal_p(construction_tail(var_2_1), something_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_2[2 + 1], something_symbol) then
   *                     return
   * inner_bracket((print_sys_name(construction_head(var_2_1), "inner") .. "@")
   * .. print_sys_name(maybe_xs[2 + 1], "inner"));
   *                 elseif jsbool_no_force_equal_p(var_2_1, something_symbol)
   * and jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol) then
   *                     return inner_bracket(":>" ..
   * print_sys_name(maybe_lst_2[2 + 1], "inner"));
   *                 end
   *             end
   *             local maybe_lst_44 = maybe_list_to_jsArray(maybe_xs[2 + 1]);
   *             if ((jsbool_no_force_equal_p(maybe_xs[1 + 1], function_symbol)
   * and (maybe_lst_44 ~= false)) and ((#maybe_lst_44) == 2)) and
   * jsbool_no_force_equal_p(maybe_lst_44[0 + 1], isOrNot_symbol) then
   *                 return inner_bracket(print_sys_name(maybe_lst_44[1 + 1],
   * "inner") .. "?");
   *             end
   *             if (((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 2)) and
   * jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], form_symbol) then
   *                 local maybe_lst_88 = maybe_list_to_jsArray(maybe_lst_2[1 +
   * 1]);
   *                 if (((maybe_lst_88 ~= false) and ((#maybe_lst_88) == 3))
   * and jsbool_no_force_equal_p(maybe_lst_88[0 + 1], function_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_88[1 + 1], something_symbol) then
   *                     return inner_bracket(":&>" ..
   * print_sys_name(maybe_lst_88[2 + 1], "inner"));
   *                 end
   *             end
   *             local hd = (jsbool_no_force_equal_p(maybe_xs[2 + 1],
   * something_symbol) and "_") or ((jsbool_no_force_equal_p(maybe_xs[2 + 1],
   * theThing_symbol) and "") or print_sys_name(maybe_xs[2 + 1], "inner"));
   *             return inner_bracket((hd .. ":") .. print_sys_name(maybe_xs[1 +
   * 1], "inner"));
   *         elseif (maybe_xs ~= false) and ((#maybe_xs) == 2) then
   *             if jsbool_no_force_equal_p(maybe_xs[0 + 1], form_symbol) then
   *                 local maybe_lst_288 = maybe_list_to_jsArray(maybe_xs[1 +
   * 1]);
   *                 if ((maybe_lst_288 ~= false) and ((#maybe_lst_288) == 2))
   * and jsbool_no_force_equal_p(maybe_lst_288[0 + 1], system_symbol) then
   *                     return inner_bracket("&+" ..
   * print_sys_name(maybe_lst_288[1 + 1], "inner"));
   *                 end
   *                 return inner_bracket("&" .. print_sys_name(maybe_xs[1 + 1],
   * "inner"));
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], isOrNot_symbol)
   * then
   *                 return inner_bracket(print_sys_name(maybe_xs[1 + 1],
   * "inner") .. "~");
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], system_symbol)
   * then
   *                 return inner_bracket("+" .. print_sys_name(maybe_xs[1 + 1],
   * "inner"));
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], sub_symbol)
   * then
   *                 local maybe_lst_8934 = maybe_list_to_jsArray(maybe_xs[1 +
   * 1]);
   *                 if (maybe_lst_8934 ~= false) and ((#maybe_lst_8934) > 1)
   * then
   *                     local tmp = print_sys_name(maybe_lst_8934[0 + 1],
   * "inner");
   *                     do
   *                         local i = 1;
   *                         while i < (#maybe_lst_8934) do
   *                             tmp = tmp .. ("/" ..
   * print_sys_name(maybe_lst_8934[i + 1], "inner"));
   *                             i = i + 1;
   *                         end
   *                     end
   *                     return inner_bracket(tmp);
   *                 end
   *             end
   *         end
   *         if where == "inner" then
   *             return simple_print(x);
   *         elseif where == "top" then
   *             return simple_print(systemName_make(x));
   *         end
   *         return ERROR();
   *     end */
  lua_pushvalue(L, lc1129);
  lua_pushcclosure(L, lcf1_print_sys_name, 1);
  lc_setupvalue(L, lc1129, 0, 195);
  assert(lua_gettop(L) == 2);

  /* local x = simple_parse(simple_print(val)) */
  lc_getupvalue(L, lc1129, 2, 137);
  const int lc1222 = lua_gettop(L);
  lc_getupvalue(L, lc1129, 21, 2);
  lua_pushvalue(L, 1);
  lua_call(L, 1, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc1222), 1);
  assert(lua_gettop(L) == 3);

  /* local temp = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 4);

  /* local prefix = "" */
  lua_pushliteral(L, "");
  assert(lua_gettop(L) == 5);

  /* if null_p(x) then */
  enum { lc1223 = 5 };
  lc_getupvalue(L, lc1129, 21, 78);
  lua_pushvalue(L, 3);
  lua_call(L, 1, 1);
  const int lc1224 = lua_toboolean(L, -1);
  lua_pop(L, 1);
  if (lc1224) {

    /* return "()" */
    lua_pushliteral(L, "()");
    return 1;
    assert(lua_gettop(L) == 5);
  } else {

    /* elseif construction_p(x) then */
    enum { lc1225 = 5 };
    lc_getupvalue(L, lc1129, 21, 82);
    lua_pushvalue(L, 3);
    lua_call(L, 1, 1);
    const int lc1226 = lua_toboolean(L, -1);
    lua_pop(L, 1);
    if (lc1226) {

      /* temp = "(" */
      lua_pushliteral(L, "(");
      lua_replace(L, 4);
      assert(lua_gettop(L) == 5);

      /* prefix = "" */
      lua_pushliteral(L, "");
      lua_replace(L, 5);
      assert(lua_gettop(L) == 5);

      /* while construction_p(x) do */
      enum { lc1227 = 5 };
      while (1) {
        lc_getupvalue(L, lc1129, 21, 82);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        if (!(lua_toboolean(L, -1))) {
          break;
        }
        lua_pop(L, 1);

        /* temp = temp .. (prefix .. complex_print(construction_head(x))) */
        lua_pushvalue(L, 4);
        lua_pushvalue(L, 5);
        lc_getupvalue(L, lc1129, 1, 194);
        const int lc1228 = lua_gettop(L);
        lc_getupvalue(L, lc1129, 21, 81);
        lua_pushvalue(L, 3);
        lua_call(L, 1, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc1228), 1);
        lua_concat(L, 2);
        lua_concat(L, 2);
        lua_replace(L, 4);
        assert(lua_gettop(L) == 5);

        /* prefix = " " */
        lua_pushliteral(L, " ");
        lua_replace(L, 5);
        assert(lua_gettop(L) == 5);

        /* x = construction_tail(x) */
        lc_getupvalue(L, lc1129, 21, 80);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        lua_replace(L, 3);
        assert(lua_gettop(L) == 5);
      }
      lua_settop(L, lc1227);
      assert(lua_gettop(L) == 5);

      /* if null_p(x) then */
      enum { lc1229 = 5 };
      lc_getupvalue(L, lc1129, 21, 78);
      lua_pushvalue(L, 3);
      lua_call(L, 1, 1);
      const int lc1230 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1230) {

        /* temp = temp .. ")" */
        lua_pushvalue(L, 4);
        lua_pushliteral(L, ")");
        lua_concat(L, 2);
        lua_replace(L, 4);
        assert(lua_gettop(L) == 5);
      } else {

        /* else
         * temp = temp .. ((" . " .. complex_print(x)) .. ")") */
        lua_pushvalue(L, 4);
        lua_pushliteral(L, " . ");
        lc_getupvalue(L, lc1129, 1, 194);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        lua_concat(L, 2);
        lua_pushliteral(L, ")");
        lua_concat(L, 2);
        lua_concat(L, 2);
        lua_replace(L, 4);
        assert(lua_gettop(L) == 5);
      }
      lua_settop(L, lc1229);
      assert(lua_gettop(L) == 5);

      /* return temp */
      lua_pushvalue(L, 4);
      return 1;
      assert(lua_gettop(L) == 5);
    } else {

      /* elseif data_p(x) then */
      enum { lc1231 = 5 };
      lc_getupvalue(L, lc1129, 21, 76);
      lua_pushvalue(L, 3);
      lua_call(L, 1, 1);
      const int lc1232 = lua_toboolean(L, -1);
      lua_pop(L, 1);
      if (lc1232) {

        /* local name = data_name(x) */
        lc_getupvalue(L, lc1129, 21, 75);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        assert(lua_gettop(L) == 6);

        /* local list = data_list(x) */
        lc_getupvalue(L, lc1129, 21, 74);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        assert(lua_gettop(L) == 7);

        /* local maybe_xs = maybe_list_to_jsArray(list) */
        lc_getupvalue(L, lc1129, 5, 127);
        lua_pushvalue(L, 7);
        lua_call(L, 1, 1);
        assert(lua_gettop(L) == 8);

        /* if (((maybe_xs ~= false) and ((#maybe_xs) == 2)) and
         * jsbool_no_force_equal_p(name, name_symbol)) and
         * jsbool_no_force_equal_p(maybe_xs[0 + 1], system_symbol) then */
        enum { lc1233 = 8 };
        lua_pushboolean(L, 0);
        const int lc1234 = lua_equal(L, 8, -1);
        lua_pop(L, 1);
        lua_pushboolean(L, lc1234);
        lua_pushboolean(L, !(lua_toboolean(L, -1)));
        lua_remove(L, -2);
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          const double lc1235 = lua_objlen(L, 8);
          lua_pushnumber(L, lc1235);
          lua_pushnumber(L, 2);
          const int lc1236 = lua_equal(L, -2, -1);
          lua_pop(L, 2);
          lua_pushboolean(L, lc1236);
        }
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          lc_getupvalue(L, lc1129, 3, 136);
          lua_pushvalue(L, 6);
          lc_getupvalue(L, lc1129, 18, 114);
          lua_call(L, 2, 1);
        }
        if (lua_toboolean(L, -1)) {
          lua_pop(L, 1);
          lc_getupvalue(L, lc1129, 3, 136);
          lua_pushnumber(L, 1);
          lua_gettable(L, 8);
          lc_getupvalue(L, lc1129, 21, 48);
          lua_call(L, 2, 1);
        }
        const int lc1237 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1237) {

          /* return print_sys_name(maybe_xs[1 + 1], "top") */
          const int lc1238 = lua_gettop(L);
          lc_getupvalue(L, lc1129, 0, 195);
          lua_pushnumber(L, 2);
          lua_gettable(L, 8);
          lua_pushliteral(L, "top");
          lua_call(L, 2, LUA_MULTRET);
          return (lua_gettop(L) - lc1238);
          assert(lua_gettop(L) == 8);
        }
        lua_settop(L, lc1233);
        assert(lua_gettop(L) == 8);

        /* return "#" .. complex_print(new_construction(name, list)) */
        lua_pushliteral(L, "#");
        lc_getupvalue(L, lc1129, 1, 194);
        const int lc1239 = lua_gettop(L);
        lc_getupvalue(L, lc1129, 21, 83);
        lua_pushvalue(L, 6);
        lua_pushvalue(L, 7);
        lua_call(L, 2, LUA_MULTRET);
        lua_call(L, (lua_gettop(L) - lc1239), 1);
        lua_concat(L, 2);
        return 1;
        assert(lua_gettop(L) == 8);
      } else {

        /* elseif error_p(x) then */
        enum { lc1240 = 5 };
        lc_getupvalue(L, lc1129, 21, 72);
        lua_pushvalue(L, 3);
        lua_call(L, 1, 1);
        const int lc1241 = lua_toboolean(L, -1);
        lua_pop(L, 1);
        if (lc1241) {

          /* return "!" .. complex_print(new_construction(error_name(x),
           * error_list(x))) */
          lua_pushliteral(L, "!");
          lc_getupvalue(L, lc1129, 1, 194);
          const int lc1242 = lua_gettop(L);
          lc_getupvalue(L, lc1129, 21, 83);
          const int lc1243 = lua_gettop(L);
          lc_getupvalue(L, lc1129, 21, 71);
          lua_pushvalue(L, 3);
          lua_call(L, 1, 1);
          lc_getupvalue(L, lc1129, 21, 70);
          lua_pushvalue(L, 3);
          lua_call(L, 1, LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc1243), LUA_MULTRET);
          lua_call(L, (lua_gettop(L) - lc1242), 1);
          lua_concat(L, 2);
          return 1;
          assert(lua_gettop(L) == 5);
        } else {

          /* elseif symbol_p(x) then */
          enum { lc1244 = 5 };
          lc_getupvalue(L, lc1129, 21, 85);
          lua_pushvalue(L, 3);
          lua_call(L, 1, 1);
          const int lc1245 = lua_toboolean(L, -1);
          lua_pop(L, 1);
          if (lc1245) {

            /* return un_symbol(x) */
            const int lc1246 = lua_gettop(L);
            lc_getupvalue(L, lc1129, 21, 84);
            lua_pushvalue(L, 3);
            lua_call(L, 1, LUA_MULTRET);
            return (lua_gettop(L) - lc1246);
            assert(lua_gettop(L) == 5);
          } else {

            /* elseif delay_evaluate_p(x) then */
            enum { lc1247 = 5 };
            lc_getupvalue(L, lc1129, 21, 65);
            lua_pushvalue(L, 3);
            lua_call(L, 1, 1);
            const int lc1248 = lua_toboolean(L, -1);
            lua_pop(L, 1);
            if (lc1248) {

              /* return ((("$(" ..
               * complex_print(env2val(delay_evaluate_env(x)))) .. " ") ..
               * complex_print(delay_evaluate_x(x))) .. ")" */
              lua_pushliteral(L, "$(");
              lc_getupvalue(L, lc1129, 1, 194);
              const int lc1249 = lua_gettop(L);
              lc_getupvalue(L, lc1129, 21, 12);
              const int lc1250 = lua_gettop(L);
              lc_getupvalue(L, lc1129, 21, 64);
              lua_pushvalue(L, 3);
              lua_call(L, 1, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc1250), LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc1249), 1);
              lua_concat(L, 2);
              lua_pushliteral(L, " ");
              lua_concat(L, 2);
              lc_getupvalue(L, lc1129, 1, 194);
              const int lc1251 = lua_gettop(L);
              lc_getupvalue(L, lc1129, 21, 63);
              lua_pushvalue(L, 3);
              lua_call(L, 1, LUA_MULTRET);
              lua_call(L, (lua_gettop(L) - lc1251), 1);
              lua_concat(L, 2);
              lua_pushliteral(L, ")");
              lua_concat(L, 2);
              return 1;
              assert(lua_gettop(L) == 5);
            } else {

              /* elseif delay_builtin_func_p(x) then */
              enum { lc1252 = 5 };
              lc_getupvalue(L, lc1129, 21, 56);
              lua_pushvalue(L, 3);
              lua_call(L, 1, 1);
              const int lc1253 = lua_toboolean(L, -1);
              lua_pop(L, 1);
              if (lc1253) {

                /* return ((("%(" .. complex_print(delay_builtin_func_f(x))) ..
                 * " ") ..
                 * complex_print(jsArray_to_list(delay_builtin_func_xs(x)))) ..
                 * ")" */
                lua_pushliteral(L, "%(");
                lc_getupvalue(L, lc1129, 1, 194);
                const int lc1254 = lua_gettop(L);
                lc_getupvalue(L, lc1129, 21, 55);
                lua_pushvalue(L, 3);
                lua_call(L, 1, LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc1254), 1);
                lua_concat(L, 2);
                lua_pushliteral(L, " ");
                lua_concat(L, 2);
                lc_getupvalue(L, lc1129, 1, 194);
                const int lc1255 = lua_gettop(L);
                lc_getupvalue(L, lc1129, 21, 22);
                const int lc1256 = lua_gettop(L);
                lc_getupvalue(L, lc1129, 21, 54);
                lua_pushvalue(L, 3);
                lua_call(L, 1, LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc1256), LUA_MULTRET);
                lua_call(L, (lua_gettop(L) - lc1255), 1);
                lua_concat(L, 2);
                lua_pushliteral(L, ")");
                lua_concat(L, 2);
                return 1;
                assert(lua_gettop(L) == 5);
              } else {

                /* elseif delay_builtin_form_p(x) then */
                enum { lc1257 = 5 };
                lc_getupvalue(L, lc1129, 21, 61);
                lua_pushvalue(L, 3);
                lua_call(L, 1, 1);
                const int lc1258 = lua_toboolean(L, -1);
                lua_pop(L, 1);
                if (lc1258) {

                  /* return ((((("@(" ..
                   * complex_print(env2val(delay_builtin_form_env(x)))) .. " ")
                   * .. complex_print(delay_builtin_form_f(x))) .. " ") ..
                   * complex_print(jsArray_to_list(delay_builtin_form_xs(x))))
                   * .. ")" */
                  lua_pushliteral(L, "@(");
                  lc_getupvalue(L, lc1129, 1, 194);
                  const int lc1259 = lua_gettop(L);
                  lc_getupvalue(L, lc1129, 21, 12);
                  const int lc1260 = lua_gettop(L);
                  lc_getupvalue(L, lc1129, 21, 60);
                  lua_pushvalue(L, 3);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc1260), LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc1259), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, " ");
                  lua_concat(L, 2);
                  lc_getupvalue(L, lc1129, 1, 194);
                  const int lc1261 = lua_gettop(L);
                  lc_getupvalue(L, lc1129, 21, 59);
                  lua_pushvalue(L, 3);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc1261), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, " ");
                  lua_concat(L, 2);
                  lc_getupvalue(L, lc1129, 1, 194);
                  const int lc1262 = lua_gettop(L);
                  lc_getupvalue(L, lc1129, 21, 22);
                  const int lc1263 = lua_gettop(L);
                  lc_getupvalue(L, lc1129, 21, 58);
                  lua_pushvalue(L, 3);
                  lua_call(L, 1, LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc1263), LUA_MULTRET);
                  lua_call(L, (lua_gettop(L) - lc1262), 1);
                  lua_concat(L, 2);
                  lua_pushliteral(L, ")");
                  lua_concat(L, 2);
                  return 1;
                  assert(lua_gettop(L) == 5);
                } else {

                  /* elseif delay_apply_p(x) then */
                  enum { lc1264 = 5 };
                  lc_getupvalue(L, lc1129, 21, 52);
                  lua_pushvalue(L, 3);
                  lua_call(L, 1, 1);
                  const int lc1265 = lua_toboolean(L, -1);
                  lua_pop(L, 1);
                  if (lc1265) {

                    /* return ((("^(" .. complex_print(delay_apply_f(x))) .. "
                     * ") .. complex_print(jsArray_to_list(delay_apply_xs(x))))
                     * .. ")" */
                    lua_pushliteral(L, "^(");
                    lc_getupvalue(L, lc1129, 1, 194);
                    const int lc1266 = lua_gettop(L);
                    lc_getupvalue(L, lc1129, 21, 51);
                    lua_pushvalue(L, 3);
                    lua_call(L, 1, LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc1266), 1);
                    lua_concat(L, 2);
                    lua_pushliteral(L, " ");
                    lua_concat(L, 2);
                    lc_getupvalue(L, lc1129, 1, 194);
                    const int lc1267 = lua_gettop(L);
                    lc_getupvalue(L, lc1129, 21, 22);
                    const int lc1268 = lua_gettop(L);
                    lc_getupvalue(L, lc1129, 21, 50);
                    lua_pushvalue(L, 3);
                    lua_call(L, 1, LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc1268), LUA_MULTRET);
                    lua_call(L, (lua_gettop(L) - lc1267), 1);
                    lua_concat(L, 2);
                    lua_pushliteral(L, ")");
                    lua_concat(L, 2);
                    return 1;
                    assert(lua_gettop(L) == 5);
                  }
                  lua_settop(L, lc1264);
                }
                lua_settop(L, lc1257);
              }
              lua_settop(L, lc1252);
            }
            lua_settop(L, lc1247);
          }
          lua_settop(L, lc1244);
        }
        lua_settop(L, lc1240);
      }
      lua_settop(L, lc1231);
    }
    lua_settop(L, lc1225);
  }
  lua_settop(L, lc1223);
  assert(lua_gettop(L) == 5);

  /* return ERROR() */
  const int lc1269 = lua_gettop(L);
  lc_getupvalue(L, lc1129, 21, 96);
  lua_call(L, 0, LUA_MULTRET);
  return (lua_gettop(L) - lc1269);
  assert(lua_gettop(L) == 5);
}

/* name: (main)
 * function(...) */
static int lcf_main(lua_State *L) {
  lua_checkstack(L, 61);
  enum { lc_nformalargs = 0 };
  const int lc_nactualargs = lua_gettop(L);
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);

  /* -- Generated by make.rkt
   * --    The Language
   * --    Copyright (C) 2018, 2019  Zaoqi <zaomir@outlook.com>
   * --    This program is free software: you can redistribute it and/or modify
   * --    it under the terms of the GNU Affero General Public License as
   * published
   * --    by the Free Software Foundation, either version 3 of the License, or
   * --    (at your option) any later version.
   * --    This program is distributed in the hope that it will be useful,
   * --    but WITHOUT ANY WARRANTY; without even the implied warranty of
   * --    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * --    GNU Affero General Public License for more details.
   * --    You should have received a copy of the GNU Affero General Public
   * License
   * --    along with this program.  If not, see
   * <https://www.gnu.org/licenses/>.
   * local __TS__ArrayPush = function(arr, item)
   *     arr[#arr+1] = item
   *     return #arr
   * end */
  lc_newclosuretable(L, lua_upvalueindex(1));
  enum { lc1 = 1 };
  assert((lua_gettop(L) == (lc1 + lc_nextra)));
  lua_pushcfunction(L, lcf1___TS__ArrayPush);
  lua_rawseti(L, (lc1 + lc_nextra), 1);
  assert(lua_gettop(L) - lc_nextra == 1);

  /* local exports = {} */
  lua_newtable(L);
  assert(lua_gettop(L) - lc_nextra == 2);

  /* local ERROR, ASSERT, construction_t, null_t, data_t, error_t, just_t,
   * delay_evaluate_t, delay_builtin_func_t, delay_builtin_form_t,
   * delay_apply_t, symbol_p, un_symbol, new_construction, construction_p,
   * construction_head, construction_tail, null_v, null_p, new_data, data_p,
   * data_name, data_list, new_error, error_p, error_name, error_list,
   * lang_set_do, just_p, un_just, evaluate, delay_evaluate_p,
   * delay_evaluate_env, delay_evaluate_x, builtin_form_apply,
   * delay_builtin_form_p, delay_builtin_form_env, delay_builtin_form_f,
   * delay_builtin_form_xs, builtin_func_apply, delay_builtin_func_p,
   * delay_builtin_func_f, delay_builtin_func_xs, apply, delay_apply_p,
   * delay_apply_f, delay_apply_xs, force_all_rec, system_symbol,
   * function_symbol, form_symbol, mapping_symbol, the_world_stopped_v,
   * data_name_function_builtin_systemName,
   * data_list_function_builtin_systemName, data_p_function_builtin_systemName,
   * error_name_function_builtin_systemName,
   * error_list_function_builtin_systemName,
   * error_p_function_builtin_systemName,
   * construction_p_function_builtin_systemName,
   * construction_head_function_builtin_systemName,
   * construction_tail_function_builtin_systemName,
   * symbol_p_function_builtin_systemName, null_p_function_builtin_systemName,
   * equal_p_function_builtin_systemName, apply_function_builtin_systemName,
   * evaluate_function_builtin_systemName, if_function_builtin_systemName,
   * quote_form_builtin_systemName, lambda_form_builtin_systemName,
   * function_builtin_use_systemName, form_builtin_use_systemName,
   * form_use_systemName, symbol_equal_p, jsArray_to_list, new_list,
   * un_just_all, any_delay_just_p, force_all, force1, env_null_v, env_set,
   * env_get, must_env_get, env2val, env_foreach, real_evaluate, name_p,
   * real_builtin_func_apply_s, real_apply, real_builtin_func_apply,
   * real_builtin_form_apply, new_lambda, jsbool_equal_p, simple_print */
  lc_newclosuretable(L, (lc1 + lc_nextra));
  enum { lc4 = 3 };
  assert((lua_gettop(L) == (lc4 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 95));
  lua_rawseti(L, (lc4 + lc_nextra), 2);
  lua_rawseti(L, (lc4 + lc_nextra), 3);
  lua_rawseti(L, (lc4 + lc_nextra), 4);
  lua_rawseti(L, (lc4 + lc_nextra), 5);
  lua_rawseti(L, (lc4 + lc_nextra), 6);
  lua_rawseti(L, (lc4 + lc_nextra), 7);
  lua_rawseti(L, (lc4 + lc_nextra), 8);
  lua_rawseti(L, (lc4 + lc_nextra), 9);
  lua_rawseti(L, (lc4 + lc_nextra), 10);
  lua_rawseti(L, (lc4 + lc_nextra), 11);
  lua_rawseti(L, (lc4 + lc_nextra), 12);
  lua_rawseti(L, (lc4 + lc_nextra), 13);
  lua_rawseti(L, (lc4 + lc_nextra), 14);
  lua_rawseti(L, (lc4 + lc_nextra), 15);
  lua_rawseti(L, (lc4 + lc_nextra), 16);
  lua_rawseti(L, (lc4 + lc_nextra), 17);
  lua_rawseti(L, (lc4 + lc_nextra), 18);
  lua_rawseti(L, (lc4 + lc_nextra), 19);
  lua_rawseti(L, (lc4 + lc_nextra), 20);
  lua_rawseti(L, (lc4 + lc_nextra), 21);
  lua_rawseti(L, (lc4 + lc_nextra), 22);
  lua_rawseti(L, (lc4 + lc_nextra), 23);
  lua_rawseti(L, (lc4 + lc_nextra), 24);
  lua_rawseti(L, (lc4 + lc_nextra), 25);
  lua_rawseti(L, (lc4 + lc_nextra), 26);
  lua_rawseti(L, (lc4 + lc_nextra), 27);
  lua_rawseti(L, (lc4 + lc_nextra), 28);
  lua_rawseti(L, (lc4 + lc_nextra), 29);
  lua_rawseti(L, (lc4 + lc_nextra), 30);
  lua_rawseti(L, (lc4 + lc_nextra), 31);
  lua_rawseti(L, (lc4 + lc_nextra), 32);
  lua_rawseti(L, (lc4 + lc_nextra), 33);
  lua_rawseti(L, (lc4 + lc_nextra), 34);
  lua_rawseti(L, (lc4 + lc_nextra), 35);
  lua_rawseti(L, (lc4 + lc_nextra), 36);
  lua_rawseti(L, (lc4 + lc_nextra), 37);
  lua_rawseti(L, (lc4 + lc_nextra), 38);
  lua_rawseti(L, (lc4 + lc_nextra), 39);
  lua_rawseti(L, (lc4 + lc_nextra), 40);
  lua_rawseti(L, (lc4 + lc_nextra), 41);
  lua_rawseti(L, (lc4 + lc_nextra), 42);
  lua_rawseti(L, (lc4 + lc_nextra), 43);
  lua_rawseti(L, (lc4 + lc_nextra), 44);
  lua_rawseti(L, (lc4 + lc_nextra), 45);
  lua_rawseti(L, (lc4 + lc_nextra), 46);
  lua_rawseti(L, (lc4 + lc_nextra), 47);
  lua_rawseti(L, (lc4 + lc_nextra), 48);
  lua_rawseti(L, (lc4 + lc_nextra), 49);
  lua_rawseti(L, (lc4 + lc_nextra), 50);
  lua_rawseti(L, (lc4 + lc_nextra), 51);
  lua_rawseti(L, (lc4 + lc_nextra), 52);
  lua_rawseti(L, (lc4 + lc_nextra), 53);
  lua_rawseti(L, (lc4 + lc_nextra), 54);
  lua_rawseti(L, (lc4 + lc_nextra), 55);
  lua_rawseti(L, (lc4 + lc_nextra), 56);
  lua_rawseti(L, (lc4 + lc_nextra), 57);
  lua_rawseti(L, (lc4 + lc_nextra), 58);
  lua_rawseti(L, (lc4 + lc_nextra), 59);
  lua_rawseti(L, (lc4 + lc_nextra), 60);
  lua_rawseti(L, (lc4 + lc_nextra), 61);
  lua_rawseti(L, (lc4 + lc_nextra), 62);
  lua_rawseti(L, (lc4 + lc_nextra), 63);
  lua_rawseti(L, (lc4 + lc_nextra), 64);
  lua_rawseti(L, (lc4 + lc_nextra), 65);
  lua_rawseti(L, (lc4 + lc_nextra), 66);
  lua_rawseti(L, (lc4 + lc_nextra), 67);
  lua_rawseti(L, (lc4 + lc_nextra), 68);
  lua_rawseti(L, (lc4 + lc_nextra), 69);
  lua_rawseti(L, (lc4 + lc_nextra), 70);
  lua_rawseti(L, (lc4 + lc_nextra), 71);
  lua_rawseti(L, (lc4 + lc_nextra), 72);
  lua_rawseti(L, (lc4 + lc_nextra), 73);
  lua_rawseti(L, (lc4 + lc_nextra), 74);
  lua_rawseti(L, (lc4 + lc_nextra), 75);
  lua_rawseti(L, (lc4 + lc_nextra), 76);
  lua_rawseti(L, (lc4 + lc_nextra), 77);
  lua_rawseti(L, (lc4 + lc_nextra), 78);
  lua_rawseti(L, (lc4 + lc_nextra), 79);
  lua_rawseti(L, (lc4 + lc_nextra), 80);
  lua_rawseti(L, (lc4 + lc_nextra), 81);
  lua_rawseti(L, (lc4 + lc_nextra), 82);
  lua_rawseti(L, (lc4 + lc_nextra), 83);
  lua_rawseti(L, (lc4 + lc_nextra), 84);
  lua_rawseti(L, (lc4 + lc_nextra), 85);
  lua_rawseti(L, (lc4 + lc_nextra), 86);
  lua_rawseti(L, (lc4 + lc_nextra), 87);
  lua_rawseti(L, (lc4 + lc_nextra), 88);
  lua_rawseti(L, (lc4 + lc_nextra), 89);
  lua_rawseti(L, (lc4 + lc_nextra), 90);
  lua_rawseti(L, (lc4 + lc_nextra), 91);
  lua_rawseti(L, (lc4 + lc_nextra), 92);
  lua_rawseti(L, (lc4 + lc_nextra), 93);
  lua_rawseti(L, (lc4 + lc_nextra), 94);
  lua_rawseti(L, (lc4 + lc_nextra), 95);
  lua_rawseti(L, (lc4 + lc_nextra), 96);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* ERROR = function()
   *     error("TheLanguage PANIC");
   * end */
  lua_pushcfunction(L, lcf1_ERROR);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 96);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* ASSERT = function(x)
   *     if not x then
   *         return ERROR();
   *     end
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_ASSERT, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 95);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* symbol_p = function(x)
   *     return x[0 + 1] == 0;
   * end */
  lua_pushcfunction(L, lcf1_symbol_p);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 85);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* un_symbol = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_un_symbol);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 84);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* new_construction = function(x, y)
   *     return {construction_t, x, y};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_construction, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 83);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* construction_p = function(x)
   *     return x[0 + 1] == construction_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_construction_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 82);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* construction_head = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_construction_head);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 81);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* construction_tail = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_construction_tail);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 80);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* null_p = function(x)
   *     return x[0 + 1] == null_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_null_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 78);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* new_data = function(x, y)
   *     return {data_t, x, y};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_data, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 77);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* data_p = function(x)
   *     return x[0 + 1] == data_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_data_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 76);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* data_name = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_data_name);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 75);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* data_list = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_data_list);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 74);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* new_error = function(x, y)
   *     return {error_t, x, y};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_error, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 73);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* error_p = function(x)
   *     return x[0 + 1] == error_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_error_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 72);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* error_name = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_error_name);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 71);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* error_list = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_error_list);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 70);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* lang_set_do = function(x, y)
   *     if x == y then
   *         return;
   *     end
   *     x[0 + 1] = just_t;
   *     x[1 + 1] = y;
   *     x[2 + 1] = false;
   *     x[3 + 1] = false;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_lang_set_do, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 69);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* just_p = function(x)
   *     return x[0 + 1] == just_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_just_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 68);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* un_just = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_un_just);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 67);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* evaluate = function(x, y)
   *     return {delay_evaluate_t, x, y};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_evaluate, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 66);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_evaluate_p = function(x)
   *     return x[0 + 1] == delay_evaluate_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_delay_evaluate_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 65);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_evaluate_env = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_evaluate_env);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 64);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_evaluate_x = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_evaluate_x);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 63);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* builtin_form_apply = function(x, y, z)
   *     return {delay_builtin_form_t, x, y, z};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_builtin_form_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 62);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_form_p = function(x)
   *     return x[0 + 1] == delay_builtin_form_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_delay_builtin_form_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 61);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_form_env = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_builtin_form_env);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 60);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_form_f = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_builtin_form_f);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 59);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_form_xs = function(x)
   *     return x[3 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_builtin_form_xs);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 58);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* builtin_func_apply = function(x, y)
   *     return {delay_builtin_func_t, x, y};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_builtin_func_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 57);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_func_p = function(x)
   *     return x[0 + 1] == delay_builtin_func_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_delay_builtin_func_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 56);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_func_f = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_builtin_func_f);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 55);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_builtin_func_xs = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_builtin_func_xs);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 54);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* apply = function(f, xs)
   *     return {delay_apply_t, f, xs};
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 53);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_apply_p = function(x)
   *     return x[0 + 1] == delay_apply_t;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_delay_apply_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 52);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_apply_f = function(x)
   *     return x[1 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_apply_f);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 51);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* delay_apply_xs = function(x)
   *     return x[2 + 1];
   * end */
  lua_pushcfunction(L, lcf1_delay_apply_xs);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 50);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* force_all_rec = function(raw)
   *     local x = force_all(raw);
   *     if data_p(x) then
   *         local a = x[1 + 1];
   *         local d = x[2 + 1];
   *         x[1 + 1] = force_all_rec(a);
   *         x[2 + 1] = force_all_rec(d);
   *         return x;
   *     elseif error_p(x) then
   *         local a = x[1 + 1];
   *         local d = x[2 + 1];
   *         x[1 + 1] = force_all_rec(a);
   *         x[2 + 1] = force_all_rec(d);
   *         return x;
   *     elseif construction_p(x) then
   *         local a = x[1 + 1];
   *         local d = x[2 + 1];
   *         x[1 + 1] = force_all_rec(a);
   *         x[2 + 1] = force_all_rec(d);
   *         return x;
   *     end
   *     return x;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_force_all_rec, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 49);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* symbol_equal_p = function(x, y)
   *     if x == y then
   *         return true;
   *     end
   *     if un_symbol(x) == un_symbol(y) then
   *         lang_set_do(x, y);
   *         return true;
   *     else
   *         return false;
   *     end
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_symbol_equal_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 23);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* jsArray_to_list = function(xs)
   *     local ret = null_v;
   *     do
   *         local i = (#xs) - 1;
   *         while i >= 0 do
   *             ret = new_construction(xs[i + 1], ret);
   *             i = i - 1;
   *         end
   *     end
   *     return ret;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_jsArray_to_list, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 22);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* new_list = function(...)
   *     local xs = ({...});
   *     return jsArray_to_list(xs);
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_list, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 21);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* un_just_all = function(raw)
   *     local x = raw;
   *     local xs = {};
   *     while just_p(x) do
   *         __TS__ArrayPush(xs, x);
   *         x = un_just(x);
   *     end
   *     do
   *         local i = 0;
   *         while i < (#xs) do
   *             lang_set_do(xs[i + 1], x);
   *             i = i + 1;
   *         end
   *     end
   *     return x;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_un_just_all, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 20);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* any_delay_just_p = function(x)
   *     return (((just_p(x) or delay_evaluate_p(x)) or delay_builtin_form_p(x))
   * or delay_builtin_func_p(x)) or delay_apply_p(x);
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_any_delay_just_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 19);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* force_all = function(raw, parents_history, ref_novalue_replace, xs)
   *     if parents_history == nil then
   *         parents_history = {};
   *     end
   *     if ref_novalue_replace == nil then
   *         ref_novalue_replace = {false, false};
   *     end
   *     if xs == nil then
   *         xs = {};
   *     end
   *     local x, do_rewrite, do_rewrite_force_all;
   *     do_rewrite = function(newval)
   *         lang_set_do(x, newval);
   *         do
   *             local i = 0;
   *             while i < (#xs) do
   *                 lang_set_do(xs[i + 1], newval);
   *                 i = i + 1;
   *             end
   *         end
   *         return newval;
   *     end;
   *     do_rewrite_force_all = function(newval)
   *         do_rewrite(newval);
   *         if any_delay_just_p(newval) then
   *             __TS__ArrayPush(xs, x);
   *             return force_all(newval, {}, {false, false}, xs);
   *         end
   *         return newval;
   *     end;
   *     local history = {};
   *     x = raw;
   *     local replace_this_with_stopped;
   *     replace_this_with_stopped = function()
   *         ref_novalue_replace[1 + 1] = true;
   *         return do_rewrite_force_all(the_world_stopped_v);
   *     end;
   *     local make_history;
   *     make_history = function()
   *         local ret = {};
   *         for x_id in pairs(history) do
   *             ret[x_id] = true;
   *         end
   *         for x_id in pairs(parents_history) do
   *             ret[x_id] = true;
   *         end
   *         return ret;
   *     end;
   *     while any_delay_just_p(x) do
   *         local x_id = simple_print(x);
   *         if parents_history[x_id] == true then
   *             return replace_this_with_stopped();
   *         end
   *         if history[x_id] == true then
   *             ref_novalue_replace[0 + 1] = true;
   *             if delay_evaluate_p(x) then
   *                 return replace_this_with_stopped();
   *             elseif delay_builtin_func_p(x) then
   *                 local f = delay_builtin_func_f(x);
   *                 local xs = delay_builtin_func_xs(x);
   *                 local elim_s = {data_name_function_builtin_systemName,
   * data_list_function_builtin_systemName, data_p_function_builtin_systemName,
   * error_name_function_builtin_systemName,
   * error_list_function_builtin_systemName,
   * error_p_function_builtin_systemName,
   * construction_p_function_builtin_systemName,
   * construction_head_function_builtin_systemName,
   * construction_tail_function_builtin_systemName,
   * symbol_p_function_builtin_systemName, null_p_function_builtin_systemName};
   *                 local is_elim = false;
   *                 do
   *                     local i = 0;
   *                     while i < (#elim_s) do
   *                         if jsbool_equal_p(elim_s[i + 1], f) then
   *                             is_elim = true;
   *                         end
   *                         i = i + 1;
   *                     end
   *                 end
   *                 if is_elim then
   *                     ASSERT((#xs) == 1);
   *                     ASSERT(ref_novalue_replace[1 + 1] == false);
   *                     local inner = force_all(xs[0 + 1], make_history(),
   * ref_novalue_replace);
   *                     if ref_novalue_replace[1 + 1] then
   *                         return do_rewrite_force_all(builtin_func_apply(f,
   * {inner}));
   *                     else
   *                         return ERROR();
   *                     end
   *                 end
   *                 if jsbool_equal_p(f, equal_p_function_builtin_systemName)
   * then
   *                     return replace_this_with_stopped();
   *                 elseif jsbool_equal_p(f, apply_function_builtin_systemName)
   * then
   *                     return replace_this_with_stopped();
   *                 elseif jsbool_equal_p(f,
   * evaluate_function_builtin_systemName) then
   *                     return replace_this_with_stopped();
   *                 elseif jsbool_equal_p(f, if_function_builtin_systemName)
   * then
   *                     ASSERT((#xs) == 3);
   *                     ASSERT(ref_novalue_replace[1 + 1] == false);
   *                     local tf = force_all(xs[0 + 1], make_history(),
   * ref_novalue_replace);
   *                     if ref_novalue_replace[1 + 1] then
   *                         return
   * do_rewrite_force_all(builtin_func_apply(if_function_builtin_systemName,
   * {tf, xs[1 + 1], xs[2 + 1]}));
   *                     else
   *                         return ERROR();
   *                     end
   *                 end
   *                 return ERROR();
   *             elseif delay_builtin_form_p(x) then
   *                 return replace_this_with_stopped();
   *             elseif delay_apply_p(x) then
   *                 return replace_this_with_stopped();
   *             end
   *             return ERROR();
   *         end
   *         history[x_id] = true;
   *         __TS__ArrayPush(xs, x);
   *         x = force1(x);
   *     end
   *     return do_rewrite(x);
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_force_all, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 18);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* force1 = function(raw)
   *     local x = un_just_all(raw);
   *     local ret;
   *     ASSERT(not just_p(x));
   *     if delay_evaluate_p(x) then
   *         ret = real_evaluate(delay_evaluate_env(x), delay_evaluate_x(x));
   *     elseif delay_builtin_form_p(x) then
   *         ret = real_builtin_form_apply(delay_builtin_form_env(x),
   * delay_builtin_form_f(x), delay_builtin_form_xs(x));
   *     elseif delay_builtin_func_p(x) then
   *         ret = real_builtin_func_apply(delay_builtin_func_f(x),
   * delay_builtin_func_xs(x));
   *     elseif delay_apply_p(x) then
   *         ret = real_apply(delay_apply_f(x), delay_apply_xs(x));
   *     else
   *         ret = x;
   *     end
   *     ret = un_just_all(ret);
   *     lang_set_do(x, ret);
   *     return ret;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_force1, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 17);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* env_set = function(env, key, val)
   *     local ret = {};
   *     do
   *         local i = 0;
   *         while i < (#env) do
   *             if jsbool_equal_p(env[(i + 0) + 1], key) then
   *                 ret[(i + 0) + 1] = key;
   *                 ret[(i + 1) + 1] = val;
   *                 do
   *                     i = i + 2;
   *                     while i < (#env) do
   *                         ret[(i + 0) + 1] = env[(i + 0) + 1];
   *                         ret[(i + 1) + 1] = env[(i + 1) + 1];
   *                         i = i + 2;
   *                     end
   *                 end
   *                 return ret;
   *             else
   *                 ret[(i + 0) + 1] = env[(i + 0) + 1];
   *                 ret[(i + 1) + 1] = env[(i + 1) + 1];
   *             end
   *             i = i + 2;
   *         end
   *     end
   *     ret[((#env) + 0) + 1] = key;
   *     ret[((#env) + 1) + 1] = val;
   *     return ret;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_env_set, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 15);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* env_get = function(env, key, default_v)
   *     do
   *         local i = 0;
   *         while i < (#env) do
   *             if jsbool_equal_p(env[(i + 0) + 1], key) then
   *                 return env[(i + 1) + 1];
   *             end
   *             i = i + 2;
   *         end
   *     end
   *     return default_v;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_env_get, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 14);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* must_env_get = function(env, key)
   *     do
   *         local i = 0;
   *         while i < (#env) do
   *             if jsbool_equal_p(env[(i + 0) + 1], key) then
   *                 return env[(i + 1) + 1];
   *             end
   *             i = i + 2;
   *         end
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_must_env_get, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 13);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* env2val = function(env)
   *     local ret = null_v;
   *     do
   *         local i = 0;
   *         while i < (#env) do
   *             ret = new_construction(new_list(env[(i + 0) + 1], env[(i + 1) +
   * 1]), ret);
   *             i = i + 2;
   *         end
   *     end
   *     return new_data(mapping_symbol, new_list(ret));
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_env2val, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 12);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* env_foreach = function(env, f)
   *     do
   *         local i = 0;
   *         while i < (#env) do
   *             f(env[(i + 0) + 1], env[(i + 1) + 1]);
   *             i = i + 2;
   *         end
   *     end
   * end */
  lua_pushcfunction(L, lcf1_env_foreach);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 11);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* real_evaluate = function(env, raw)
   *     local x = force1(raw);
   *     if any_delay_just_p(x) then
   *         return evaluate(env, x);
   *     end
   *     local error_v = new_error(system_symbol,
   * new_list(function_builtin_use_systemName,
   * new_list(evaluate_function_builtin_systemName, new_list(env2val(env),
   * x))));
   *     if construction_p(x) then
   *         local xs = {};
   *         local rest = x;
   *         while not null_p(rest) do
   *             if any_delay_just_p(rest) then
   *                 return evaluate(env, x);
   *             elseif construction_p(rest) then
   *                 __TS__ArrayPush(xs, construction_head(rest));
   *                 rest = force1(construction_tail(rest));
   *             else
   *                 return error_v;
   *             end
   *         end
   *         if jsbool_equal_p(xs[0 + 1], form_builtin_use_systemName) then
   *             if (#xs) == 1 then
   *                 return error_v;
   *             end
   *             local f = xs[1 + 1];
   *             local args = {};
   *             do
   *                 local i = 2;
   *                 while i < (#xs) do
   *                     args[(i - 2) + 1] = xs[i + 1];
   *                     i = i + 1;
   *                 end
   *             end
   *             return builtin_form_apply(env, f, args);
   *         elseif jsbool_equal_p(xs[0 + 1], form_use_systemName) then
   *             if (#xs) == 1 then
   *                 return error_v;
   *             end
   *             local f = force_all(evaluate(env, xs[1 + 1]));
   *             if not data_p(f) then
   *                 return error_v;
   *             end
   *             local f_type = force1(data_name(f));
   *             if any_delay_just_p(f_type) then
   *                 return evaluate(env, x);
   *             end
   *             if not symbol_p(f_type) then
   *                 return error_v;
   *             end
   *             if not symbol_equal_p(f_type, form_symbol) then
   *                 return error_v;
   *             end
   *             local f_list = force1(data_list(f));
   *             if any_delay_just_p(f_list) then
   *                 return evaluate(env, x);
   *             end
   *             if not construction_p(f_list) then
   *                 return error_v;
   *             end
   *             local f_x = construction_head(f_list);
   *             local f_list_cdr = force1(construction_tail(f_list));
   *             if any_delay_just_p(f_list_cdr) then
   *                 return evaluate(env, x);
   *             end
   *             if not null_p(f_list_cdr) then
   *                 return error_v;
   *             end
   *             local args = {env2val(env)};
   *             do
   *                 local i = 2;
   *                 while i < (#xs) do
   *                     args[(i - 1) + 1] = xs[i + 1];
   *                     i = i + 1;
   *                 end
   *             end
   *             return apply(f_x, args);
   *         elseif jsbool_equal_p(xs[0 + 1], function_builtin_use_systemName)
   * then
   *             if (#xs) == 1 then
   *                 return error_v;
   *             end
   *             local f = xs[1 + 1];
   *             local args = {};
   *             do
   *                 local i = 2;
   *                 while i < (#xs) do
   *                     args[(i - 2) + 1] = evaluate(env, xs[i + 1]);
   *                     i = i + 1;
   *                 end
   *             end
   *             return builtin_func_apply(f, args);
   *         else
   *             local f = evaluate(env, xs[0 + 1]);
   *             local args = {};
   *             do
   *                 local i = 1;
   *                 while i < (#xs) do
   *                     args[(i - 1) + 1] = evaluate(env, xs[i + 1]);
   *                     i = i + 1;
   *                 end
   *             end
   *             return apply(f, args);
   *         end
   *     elseif null_p(x) then
   *         return x;
   *     elseif name_p(x) then
   *         return env_get(env, x, error_v);
   *     elseif error_p(x) then
   *         return error_v;
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_real_evaluate, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 10);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* name_p = function(x)
   *     return symbol_p(x) or data_p(x);
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_name_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 9);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* real_apply = function(f, xs)
   *     local make_error_v;
   *     make_error_v = function()
   *         return new_error(system_symbol,
   * new_list(function_builtin_use_systemName,
   * new_list(apply_function_builtin_systemName, new_list(f,
   * jsArray_to_list(xs)))));
   *     end;
   *     f = force1(f);
   *     if any_delay_just_p(f) then
   *         return apply(f, xs);
   *     end
   *     if not data_p(f) then
   *         return make_error_v();
   *     end
   *     local f_type = force_all(data_name(f));
   *     if not (symbol_p(f_type) and symbol_equal_p(f_type, function_symbol))
   * then
   *         return make_error_v();
   *     end
   *     local f_list = force_all(data_list(f));
   *     if not construction_p(f_list) then
   *         return make_error_v();
   *     end
   *     local args_pat = force_all_rec(construction_head(f_list));
   *     local f_list_cdr = force_all(construction_tail(f_list));
   *     if not (construction_p(f_list_cdr) and
   * null_p(force_all(construction_tail(f_list_cdr)))) then
   *         return make_error_v();
   *     end
   *     local f_code = construction_head(f_list_cdr);
   *     local env = env_null_v;
   *     local xs_i = 0;
   *     while not null_p(args_pat) do
   *         if name_p(args_pat) then
   *             local x = null_v;
   *             do
   *                 local i = (#xs) - 1;
   *                 while i >= xs_i do
   *                     x = new_construction(xs[i + 1], x);
   *                     i = i - 1;
   *                 end
   *             end
   *             env = env_set(env, args_pat, x);
   *             xs_i = #xs;
   *             args_pat = null_v;
   *         elseif construction_p(args_pat) then
   *             if xs_i < (#xs) then
   *                 local x = xs[xs_i + 1];
   *                 xs_i = xs_i + 1;
   *                 env = env_set(env, construction_head(args_pat), x);
   *                 args_pat = construction_tail(args_pat);
   *             else
   *                 return make_error_v();
   *             end
   *         else
   *             return make_error_v();
   *         end
   *     end
   *     if (#xs) ~= xs_i then
   *         return make_error_v();
   *     end
   *     return evaluate(env, f_code);
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_real_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 7);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* real_builtin_func_apply = function(f, xs)
   *     local error_v = new_error(system_symbol,
   * new_list(function_builtin_use_systemName, new_list(f,
   * jsArray_to_list(xs))));
   *     do
   *         local i = 0;
   *         while i < (#real_builtin_func_apply_s) do
   *             if jsbool_equal_p(f, real_builtin_func_apply_s[i + 1][0 + 1])
   * then
   *                 local actually_length = real_builtin_func_apply_s[i + 1][1
   * + 1];
   *                 if (#xs) ~= actually_length then
   *                     return error_v;
   *                 end
   *                 local f = real_builtin_func_apply_s[i + 1][2 + 1];
   *                 if actually_length == 1 then
   *                     return (f)(xs[0 + 1], error_v);
   *                 elseif actually_length == 2 then
   *                     return (f)(xs[0 + 1], xs[1 + 1], error_v);
   *                 elseif actually_length == 3 then
   *                     return (f)(xs[0 + 1], xs[1 + 1], xs[2 + 1], error_v);
   *                 end
   *                 return ERROR();
   *             end
   *             i = i + 1;
   *         end
   *     end
   *     return error_v;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_real_builtin_func_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 6);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* real_builtin_form_apply = function(env, f, xs)
   *     local error_v = new_error(system_symbol,
   * new_list(form_builtin_use_systemName, new_list(env2val(env), f,
   * jsArray_to_list(xs))));
   *     if jsbool_equal_p(f, quote_form_builtin_systemName) then
   *         if (#xs) ~= 1 then
   *             return error_v;
   *         end
   *         return xs[0 + 1];
   *     elseif jsbool_equal_p(f, lambda_form_builtin_systemName) then
   *         if (#xs) ~= 2 then
   *             return error_v;
   *         end
   *         return new_lambda(env, xs[0 + 1], xs[1 + 1], error_v);
   *     end
   *     return error_v;
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_real_builtin_form_apply, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 5);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* new_lambda = function(env, args_pat, body, error_v)
   *     if error_v == nil then
   *         error_v = false;
   *     end
   *     local make_error_v;
   *     make_error_v = function()
   *         if error_v == false then
   *             return new_error(system_symbol,
   * new_list(form_builtin_use_systemName, new_list(env2val(env),
   * lambda_form_builtin_systemName, jsArray_to_list({args_pat, body}))));
   *         else
   *             return error_v;
   *         end
   *     end;
   *     local make_quote;
   *     make_quote = function(x)
   *         return new_list(form_builtin_use_systemName,
   * quote_form_builtin_systemName, x);
   *     end;
   *     args_pat = force_all_rec(args_pat);
   *     local args_pat_vars = {};
   *     local args_pat_is_dot = false;
   *     local args_pat_iter = args_pat;
   *     while not null_p(args_pat_iter) do
   *         if name_p(args_pat_iter) then
   *             __TS__ArrayPush(args_pat_vars, args_pat_iter);
   *             args_pat_is_dot = true;
   *             args_pat_iter = null_v;
   *         elseif construction_p(args_pat_iter) then
   *             __TS__ArrayPush(args_pat_vars,
   * construction_head(args_pat_iter));
   *             args_pat_iter = construction_tail(args_pat_iter);
   *         else
   *             return make_error_v();
   *         end
   *     end
   *     local args_pat_vars_val = args_pat;
   *     if args_pat_is_dot then
   *         args_pat_vars_val = jsArray_to_list(args_pat_vars);
   *     end
   *     local env_vars = {};
   *     env_foreach(env, function(k, v)
   *         do
   *             local i = 0;
   *             while i < (#args_pat_vars) do
   *                 if jsbool_equal_p(args_pat_vars[i + 1], k) then
   *                     return;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         __TS__ArrayPush(env_vars, k);
   *     end);
   *     local new_args_pat = args_pat_vars_val;
   *     do
   *         local i = (#env_vars) - 1;
   *         while i >= 0 do
   *             new_args_pat = new_construction(env_vars[i + 1], new_args_pat);
   *             i = i - 1;
   *         end
   *     end
   *     local new_args = args_pat_vars_val;
   *     do
   *         local i = (#env_vars) - 1;
   *         while i >= 0 do
   *             new_args = new_construction(make_quote(must_env_get(env,
   * env_vars[i + 1])), new_args);
   *             i = i - 1;
   *         end
   *     end
   *     return new_data(function_symbol, new_list(args_pat,
   * new_construction(make_quote(new_data(function_symbol,
   * new_list(new_args_pat, body))), new_args)));
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_lambda, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 4);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* jsbool_equal_p = function(x, y)
   *     if x == y then
   *         return true;
   *     end
   *     x = force_all(x);
   *     y = force_all(y);
   *     if x == y then
   *         return true;
   *     end
   *     local end_2;
   *     end_2 = function(x, y, f1, f2)
   *         if jsbool_equal_p(f1(x), f1(y)) and jsbool_equal_p(f2(x), f2(y))
   * then
   *             lang_set_do(x, y);
   *             return true;
   *         else
   *             return false;
   *         end
   *     end;
   *     if null_p(x) then
   *         if not null_p(y) then
   *             return false;
   *         end
   *         lang_set_do(x, null_v);
   *         lang_set_do(y, null_v);
   *         return true;
   *     elseif symbol_p(x) then
   *         if not symbol_p(y) then
   *             return false;
   *         end
   *         return symbol_equal_p(x, y);
   *     elseif construction_p(x) then
   *         if not construction_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, construction_head, construction_tail);
   *     elseif error_p(x) then
   *         if not error_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, error_name, error_list);
   *     elseif data_p(x) then
   *         if not data_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, data_name, data_list);
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_jsbool_equal_p, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 3);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* simple_print = function(x)
   *     x = un_just_all(x);
   *     local temp = "";
   *     local prefix = "";
   *     if null_p(x) then
   *         return "()";
   *     elseif construction_p(x) then
   *         temp = "(";
   *         prefix = "";
   *         while construction_p(x) do
   *             temp = temp .. (prefix .. simple_print(construction_head(x)));
   *             prefix = " ";
   *             x = un_just_all(construction_tail(x));
   *         end
   *         if null_p(x) then
   *             temp = temp .. ")";
   *         else
   *             temp = temp .. ((" . " .. simple_print(x)) .. ")");
   *         end
   *         return temp;
   *     elseif data_p(x) then
   *         return "#" .. simple_print(new_construction(data_name(x),
   * data_list(x)));
   *     elseif error_p(x) then
   *         return "!" .. simple_print(new_construction(error_name(x),
   * error_list(x)));
   *     elseif symbol_p(x) then
   *         return un_symbol(x);
   *     elseif delay_evaluate_p(x) then
   *         return ((("$(" .. simple_print(env2val(delay_evaluate_env(x)))) ..
   * " ") .. simple_print(delay_evaluate_x(x))) .. ")";
   *     elseif delay_builtin_func_p(x) then
   *         return ((("%(" .. simple_print(delay_builtin_func_f(x))) .. " ") ..
   * simple_print(jsArray_to_list(delay_builtin_func_xs(x)))) .. ")";
   *     elseif delay_builtin_form_p(x) then
   *         return ((((("@(" ..
   * simple_print(env2val(delay_builtin_form_env(x)))) .. " ") ..
   * simple_print(delay_builtin_form_f(x))) .. " ") ..
   * simple_print(jsArray_to_list(delay_builtin_form_xs(x)))) .. ")";
   *     elseif delay_apply_p(x) then
   *         return ((("^(" .. simple_print(delay_apply_f(x))) .. " ") ..
   * simple_print(jsArray_to_list(delay_apply_xs(x)))) .. ")";
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc4 + lc_nextra));
  lua_pushcclosure(L, lcf1_simple_print, 1);
  lc_setupvalue(L, (lc4 + lc_nextra), 0, 2);
  assert(lua_gettop(L) - lc_nextra == 3);

  /* local symbol_t = 0 */
  lc_newclosuretable(L, (lc4 + lc_nextra));
  enum { lc447 = 4 };
  assert((lua_gettop(L) == (lc447 + lc_nextra)));
  lua_pushnumber(L, 0);
  lua_rawseti(L, (lc447 + lc_nextra), 112);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* construction_t = 1 */
  lua_pushnumber(L, 1);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 94);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* null_t = 2 */
  lua_pushnumber(L, 2);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 93);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* data_t = 3 */
  lua_pushnumber(L, 3);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 92);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* error_t = 4 */
  lua_pushnumber(L, 4);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 91);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* just_t = 5 */
  lua_pushnumber(L, 5);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 90);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* delay_evaluate_t = 6 */
  lua_pushnumber(L, 6);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 89);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* delay_builtin_func_t = 7 */
  lua_pushnumber(L, 7);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 88);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* delay_builtin_form_t = 8 */
  lua_pushnumber(L, 8);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 87);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* delay_apply_t = 9 */
  lua_pushnumber(L, 9);
  lc_setupvalue(L, (lc447 + lc_nextra), 1, 86);
  assert(lua_gettop(L) - lc_nextra == 4);

  /* local new_symbol */
  lc_newclosuretable(L, (lc447 + lc_nextra));
  enum { lc448 = 5 };
  assert((lua_gettop(L) == (lc448 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc448 + lc_nextra), 113);
  assert(lua_gettop(L) - lc_nextra == 5);

  /* new_symbol = function(x)
   *     return {symbol_t, x};
   * end */
  lua_pushvalue(L, (lc448 + lc_nextra));
  lua_pushcclosure(L, lcf1_new_symbol, 1);
  lc_setupvalue(L, (lc448 + lc_nextra), 0, 113);
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.new_symbol = new_symbol */
  lc_getupvalue(L, (lc448 + lc_nextra), 0, 113);
  lua_pushliteral(L, "new_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.symbol_p = symbol_p */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 85);
  lua_pushliteral(L, "symbol_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.un_symbol = un_symbol */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 84);
  lua_pushliteral(L, "un_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.new_construction = new_construction */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 83);
  lua_pushliteral(L, "new_construction");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.construction_p = construction_p */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 82);
  lua_pushliteral(L, "construction_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.construction_head = construction_head */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 81);
  lua_pushliteral(L, "construction_head");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.construction_tail = construction_tail */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 80);
  lua_pushliteral(L, "construction_tail");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* null_v = {null_t} */
  lua_createtable(L, 1, 0);
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 93);
  lua_rawseti(L, -2, 1);
  lc_setupvalue(L, (lc448 + lc_nextra), 2, 79);
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.null_v = null_v */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 79);
  lua_pushliteral(L, "null_v");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.null_p = null_p */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 78);
  lua_pushliteral(L, "null_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.new_data = new_data */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 77);
  lua_pushliteral(L, "new_data");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.data_p = data_p */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 76);
  lua_pushliteral(L, "data_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.data_name = data_name */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 75);
  lua_pushliteral(L, "data_name");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.data_list = data_list */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 74);
  lua_pushliteral(L, "data_list");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.new_error = new_error */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 73);
  lua_pushliteral(L, "new_error");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.error_p = error_p */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 72);
  lua_pushliteral(L, "error_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.error_name = error_name */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 71);
  lua_pushliteral(L, "error_name");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.error_list = error_list */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 70);
  lua_pushliteral(L, "error_list");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.evaluate = evaluate */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 66);
  lua_pushliteral(L, "evaluate");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.apply = apply */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 53);
  lua_pushliteral(L, "apply");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* exports.force_all_rec = force_all_rec */
  lc_getupvalue(L, (lc448 + lc_nextra), 2, 49);
  lua_pushliteral(L, "force_all_rec");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 5);

  /* system_symbol = new_symbol("") */
  lc_getupvalue(L, (lc448 + lc_nextra), 0, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc448 + lc_nextra), 2, 48);
  assert(lua_gettop(L) - lc_nextra == 5);

  /* local name_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc448 + lc_nextra));
  enum { lc449 = 6 };
  assert((lua_gettop(L) == (lc449 + lc_nextra)));
  lc_getupvalue(L, (lc448 + lc_nextra), 0, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc449 + lc_nextra), 114);
  assert(lua_gettop(L) - lc_nextra == 6);

  /* function_symbol = new_symbol("") */
  lc_getupvalue(L, (lc449 + lc_nextra), 1, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc449 + lc_nextra), 3, 47);
  assert(lua_gettop(L) - lc_nextra == 6);

  /* form_symbol = new_symbol("") */
  lc_getupvalue(L, (lc449 + lc_nextra), 1, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc449 + lc_nextra), 3, 46);
  assert(lua_gettop(L) - lc_nextra == 6);

  /* local equal_symbol = new_symbol("") */
  lc_getupvalue(L, (lc449 + lc_nextra), 1, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 7);

  /* local evaluate_sym = new_symbol("") */
  lc_getupvalue(L, (lc449 + lc_nextra), 1, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 8);

  /* local theThing_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc449 + lc_nextra));
  enum { lc450 = 9 };
  assert((lua_gettop(L) == (lc450 + lc_nextra)));
  lc_getupvalue(L, (lc449 + lc_nextra), 1, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc450 + lc_nextra), 115);
  assert(lua_gettop(L) - lc_nextra == 9);

  /* local something_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc450 + lc_nextra));
  enum { lc451 = 10 };
  assert((lua_gettop(L) == (lc451 + lc_nextra)));
  lc_getupvalue(L, (lc450 + lc_nextra), 2, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc451 + lc_nextra), 116);
  assert(lua_gettop(L) - lc_nextra == 10);

  /* mapping_symbol = new_symbol("") */
  lc_getupvalue(L, (lc451 + lc_nextra), 3, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc451 + lc_nextra), 5, 45);
  assert(lua_gettop(L) - lc_nextra == 10);

  /* local if_symbol = new_symbol("") */
  lc_getupvalue(L, (lc451 + lc_nextra), 3, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 11);

  /* local typeAnnotation_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc451 + lc_nextra));
  enum { lc452 = 12 };
  assert((lua_gettop(L) == (lc452 + lc_nextra)));
  lc_getupvalue(L, (lc451 + lc_nextra), 3, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc452 + lc_nextra), 117);
  assert(lua_gettop(L) - lc_nextra == 12);

  /* local isOrNot_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc452 + lc_nextra));
  enum { lc453 = 13 };
  assert((lua_gettop(L) == (lc453 + lc_nextra)));
  lc_getupvalue(L, (lc452 + lc_nextra), 4, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc453 + lc_nextra), 118);
  assert(lua_gettop(L) - lc_nextra == 13);

  /* local sub_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc453 + lc_nextra));
  enum { lc454 = 14 };
  assert((lua_gettop(L) == (lc454 + lc_nextra)));
  lc_getupvalue(L, (lc453 + lc_nextra), 5, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc454 + lc_nextra), 119);
  assert(lua_gettop(L) - lc_nextra == 14);

  /* local true_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc454 + lc_nextra));
  enum { lc455 = 15 };
  assert((lua_gettop(L) == (lc455 + lc_nextra)));
  lc_getupvalue(L, (lc454 + lc_nextra), 6, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc455 + lc_nextra), 120);
  assert(lua_gettop(L) - lc_nextra == 15);

  /* local false_symbol = new_symbol("") */
  lc_newclosuretable(L, (lc455 + lc_nextra));
  enum { lc456 = 16 };
  assert((lua_gettop(L) == (lc456 + lc_nextra)));
  lc_getupvalue(L, (lc455 + lc_nextra), 7, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  lua_rawseti(L, (lc456 + lc_nextra), 121);
  assert(lua_gettop(L) - lc_nextra == 16);

  /* local quote_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 17);

  /* local apply_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 18);

  /* local null_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 19);

  /* local construction_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 20);

  /* local data_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 21);

  /* local error_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 22);

  /* local symbol_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 23);

  /* local list_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 24);

  /* local head_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 25);

  /* local tail_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 26);

  /* local thing_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 27);

  /* local theWorldStopped_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 28);

  /* local effect_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 29);

  /* local sequentialWordFormation_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 30);

  /* local inputOutput_symbol = new_symbol("") */
  lc_getupvalue(L, (lc456 + lc_nextra), 8, 113);
  lua_pushliteral(L, "");
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.system_symbol = system_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 48);
  lua_pushliteral(L, "system_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.name_symbol = name_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 7, 114);
  lua_pushliteral(L, "name_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.function_symbol = function_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 47);
  lua_pushliteral(L, "function_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.form_symbol = form_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 46);
  lua_pushliteral(L, "form_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.equal_symbol = equal_symbol */
  lua_pushvalue(L, (7 + lc_nextra));
  lua_pushliteral(L, "equal_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.evaluate_sym = evaluate_sym */
  lua_pushvalue(L, (8 + lc_nextra));
  lua_pushliteral(L, "evaluate_sym");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.theThing_symbol = theThing_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 6, 115);
  lua_pushliteral(L, "theThing_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.something_symbol = something_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 5, 116);
  lua_pushliteral(L, "something_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.mapping_symbol = mapping_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 45);
  lua_pushliteral(L, "mapping_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.if_symbol = if_symbol */
  lua_pushvalue(L, (11 + lc_nextra));
  lua_pushliteral(L, "if_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.typeAnnotation_symbol = typeAnnotation_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 4, 117);
  lua_pushliteral(L, "typeAnnotation_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.isOrNot_symbol = isOrNot_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 3, 118);
  lua_pushliteral(L, "isOrNot_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.sub_symbol = sub_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 2, 119);
  lua_pushliteral(L, "sub_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.true_symbol = true_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 1, 120);
  lua_pushliteral(L, "true_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.false_symbol = false_symbol */
  lc_getupvalue(L, (lc456 + lc_nextra), 0, 121);
  lua_pushliteral(L, "false_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.quote_symbol = quote_symbol */
  lua_pushvalue(L, (17 + lc_nextra));
  lua_pushliteral(L, "quote_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.apply_symbol = apply_symbol */
  lua_pushvalue(L, (18 + lc_nextra));
  lua_pushliteral(L, "apply_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.null_symbol = null_symbol */
  lua_pushvalue(L, (19 + lc_nextra));
  lua_pushliteral(L, "null_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.construction_symbol = construction_symbol */
  lua_pushvalue(L, (20 + lc_nextra));
  lua_pushliteral(L, "construction_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.data_symbol = data_symbol */
  lua_pushvalue(L, (21 + lc_nextra));
  lua_pushliteral(L, "data_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.error_symbol = error_symbol */
  lua_pushvalue(L, (22 + lc_nextra));
  lua_pushliteral(L, "error_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.symbol_symbol = symbol_symbol */
  lua_pushvalue(L, (23 + lc_nextra));
  lua_pushliteral(L, "symbol_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.list_symbol = list_symbol */
  lua_pushvalue(L, (24 + lc_nextra));
  lua_pushliteral(L, "list_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.head_symbol = head_symbol */
  lua_pushvalue(L, (25 + lc_nextra));
  lua_pushliteral(L, "head_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.tail_symbol = tail_symbol */
  lua_pushvalue(L, (26 + lc_nextra));
  lua_pushliteral(L, "tail_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.thing_symbol = thing_symbol */
  lua_pushvalue(L, (27 + lc_nextra));
  lua_pushliteral(L, "thing_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.theWorldStopped_symbol = theWorldStopped_symbol */
  lua_pushvalue(L, (28 + lc_nextra));
  lua_pushliteral(L, "theWorldStopped_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.effect_symbol = effect_symbol */
  lua_pushvalue(L, (29 + lc_nextra));
  lua_pushliteral(L, "effect_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.sequentialWordFormation_symbol = sequentialWordFormation_symbol */
  lua_pushvalue(L, (30 + lc_nextra));
  lua_pushliteral(L, "sequentialWordFormation_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* exports.inputOutput_symbol = inputOutput_symbol */
  lua_pushvalue(L, (31 + lc_nextra));
  lua_pushliteral(L, "inputOutput_symbol");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 31);

  /* the_world_stopped_v = new_error(system_symbol,
   * new_list(theWorldStopped_symbol, something_symbol)) */
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 73);
  const int lc457 = lua_gettop(L);
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 48);
  lc_getupvalue(L, (lc456 + lc_nextra), 10, 21);
  lua_pushvalue(L, (28 + lc_nextra));
  lc_getupvalue(L, (lc456 + lc_nextra), 5, 116);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc457), 1);
  lc_setupvalue(L, (lc456 + lc_nextra), 10, 44);
  assert(lua_gettop(L) - lc_nextra == 31);

  /* local systemName_make */
  lc_newclosuretable(L, (lc456 + lc_nextra));
  enum { lc458 = 32 };
  assert((lua_gettop(L) == (lc458 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc458 + lc_nextra), 122);
  assert(lua_gettop(L) - lc_nextra == 32);

  /* systemName_make = function(x)
   *     return new_data(name_symbol, new_list(system_symbol, x));
   * end */
  lua_pushvalue(L, (lc458 + lc_nextra));
  lua_pushcclosure(L, lcf1_systemName_make, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 0, 122);
  assert(lua_gettop(L) - lc_nextra == 32);

  /* local make_builtin_f_new_sym_f */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 33);

  /* make_builtin_f_new_sym_f = function(x_sym)
   *     return systemName_make(new_list(typeAnnotation_symbol,
   * new_list(function_symbol, something_symbol, x_sym), theThing_symbol));
   * end */
  lua_pushvalue(L, (lc458 + lc_nextra));
  lua_pushcclosure(L, lcf1_make_builtin_f_new_sym_f, 1);
  lua_replace(L, (33 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 33);

  /* local make_builtin_f_get_sym_f */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 34);

  /* make_builtin_f_get_sym_f = function(t_sym, x_sym)
   *     return systemName_make(new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_list(t_sym), something_symbol), x_sym));
   * end */
  lua_pushvalue(L, (lc458 + lc_nextra));
  lua_pushcclosure(L, lcf1_make_builtin_f_get_sym_f, 1);
  lua_replace(L, (34 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 34);

  /* local make_builtin_f_p_sym_f */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 35);

  /* make_builtin_f_p_sym_f = function(t_sym)
   *     return systemName_make(new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, new_list(typeAnnotation_symbol, t_sym,
   * something_symbol))));
   * end */
  lua_pushvalue(L, (lc458 + lc_nextra));
  lua_pushcclosure(L, lcf1_make_builtin_f_p_sym_f, 1);
  lua_replace(L, (35 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 35);

  /* local new_data_function_builtin_systemName =
   * make_builtin_f_new_sym_f(data_symbol) */
  lua_pushvalue(L, (33 + lc_nextra));
  lua_pushvalue(L, (21 + lc_nextra));
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 36);

  /* data_name_function_builtin_systemName =
   * make_builtin_f_get_sym_f(data_symbol, name_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (21 + lc_nextra));
  lc_getupvalue(L, (lc458 + lc_nextra), 8, 114);
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 43);
  assert(lua_gettop(L) - lc_nextra == 36);

  /* data_list_function_builtin_systemName =
   * make_builtin_f_get_sym_f(data_symbol, list_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (21 + lc_nextra));
  lua_pushvalue(L, (24 + lc_nextra));
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 42);
  assert(lua_gettop(L) - lc_nextra == 36);

  /* data_p_function_builtin_systemName = make_builtin_f_p_sym_f(data_symbol) */
  lua_pushvalue(L, (35 + lc_nextra));
  lua_pushvalue(L, (21 + lc_nextra));
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 41);
  assert(lua_gettop(L) - lc_nextra == 36);

  /* local new_error_function_builtin_systemName =
   * make_builtin_f_new_sym_f(error_symbol) */
  lua_pushvalue(L, (33 + lc_nextra));
  lua_pushvalue(L, (22 + lc_nextra));
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 37);

  /* error_name_function_builtin_systemName =
   * make_builtin_f_get_sym_f(error_symbol, name_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (22 + lc_nextra));
  lc_getupvalue(L, (lc458 + lc_nextra), 8, 114);
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 40);
  assert(lua_gettop(L) - lc_nextra == 37);

  /* error_list_function_builtin_systemName =
   * make_builtin_f_get_sym_f(error_symbol, list_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (22 + lc_nextra));
  lua_pushvalue(L, (24 + lc_nextra));
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 39);
  assert(lua_gettop(L) - lc_nextra == 37);

  /* error_p_function_builtin_systemName = make_builtin_f_p_sym_f(error_symbol)
   */
  lua_pushvalue(L, (35 + lc_nextra));
  lua_pushvalue(L, (22 + lc_nextra));
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 38);
  assert(lua_gettop(L) - lc_nextra == 37);

  /* local new_construction_function_builtin_systemName =
   * make_builtin_f_new_sym_f(construction_symbol) */
  lua_pushvalue(L, (33 + lc_nextra));
  lua_pushvalue(L, (20 + lc_nextra));
  lua_call(L, 1, 1);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* construction_p_function_builtin_systemName =
   * make_builtin_f_p_sym_f(construction_symbol) */
  lua_pushvalue(L, (35 + lc_nextra));
  lua_pushvalue(L, (20 + lc_nextra));
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 37);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* construction_head_function_builtin_systemName =
   * make_builtin_f_get_sym_f(construction_symbol, head_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (20 + lc_nextra));
  lua_pushvalue(L, (25 + lc_nextra));
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 36);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* construction_tail_function_builtin_systemName =
   * make_builtin_f_get_sym_f(construction_symbol, tail_symbol) */
  lua_pushvalue(L, (34 + lc_nextra));
  lua_pushvalue(L, (20 + lc_nextra));
  lua_pushvalue(L, (26 + lc_nextra));
  lua_call(L, 2, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 35);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* symbol_p_function_builtin_systemName =
   * make_builtin_f_p_sym_f(symbol_symbol) */
  lua_pushvalue(L, (35 + lc_nextra));
  lua_pushvalue(L, (23 + lc_nextra));
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 34);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* null_p_function_builtin_systemName = make_builtin_f_p_sym_f(null_symbol) */
  lua_pushvalue(L, (35 + lc_nextra));
  lua_pushvalue(L, (19 + lc_nextra));
  lua_call(L, 1, 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 33);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* equal_p_function_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, equal_symbol))) */
  lc_getupvalue(L, (lc458 + lc_nextra), 0, 122);
  const int lc469 = lua_gettop(L);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  const int lc470 = lua_gettop(L);
  lc_getupvalue(L, (lc458 + lc_nextra), 5, 117);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 47);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  lc_getupvalue(L, (lc458 + lc_nextra), 4, 118);
  lua_pushvalue(L, (7 + lc_nextra));
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc470), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc469), 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 32);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* apply_function_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, new_list(function_symbol,
   * new_construction(function_symbol, something_symbol), something_symbol),
   * apply_symbol)) */
  lc_getupvalue(L, (lc458 + lc_nextra), 0, 122);
  const int lc471 = lua_gettop(L);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  lc_getupvalue(L, (lc458 + lc_nextra), 5, 117);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 47);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 83);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 47);
  lc_getupvalue(L, (lc458 + lc_nextra), 6, 116);
  lua_call(L, 2, 1);
  lc_getupvalue(L, (lc458 + lc_nextra), 6, 116);
  lua_call(L, 3, 1);
  lua_pushvalue(L, (18 + lc_nextra));
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc471), 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 31);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* evaluate_function_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, function_symbol,
   * evaluate_sym)) */
  lc_getupvalue(L, (lc458 + lc_nextra), 0, 122);
  const int lc472 = lua_gettop(L);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  lc_getupvalue(L, (lc458 + lc_nextra), 5, 117);
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 47);
  lua_pushvalue(L, (8 + lc_nextra));
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc472), 1);
  lc_setupvalue(L, (lc458 + lc_nextra), 11, 30);
  assert(lua_gettop(L) - lc_nextra == 38);

  /* local list_chooseOne_function_builtin_systemName =
   * make_builtin_f_get_sym_f(list_symbol, new_list(typeAnnotation_symbol,
   * thing_symbol, something_symbol)) */
  lc_newclosuretable(L, (lc458 + lc_nextra));
  enum { lc473 = 39 };
  assert((lua_gettop(L) == (lc473 + lc_nextra)));
  lua_pushvalue(L, (34 + lc_nextra));
  const int lc474 = lua_gettop(L);
  lua_pushvalue(L, (24 + lc_nextra));
  lc_getupvalue(L, (lc458 + lc_nextra), 11, 21);
  lc_getupvalue(L, (lc458 + lc_nextra), 5, 117);
  lua_pushvalue(L, (27 + lc_nextra));
  lc_getupvalue(L, (lc458 + lc_nextra), 6, 116);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc474), 1);
  lua_rawseti(L, (lc473 + lc_nextra), 123);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* if_function_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, function_symbol,
   * if_symbol)) */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc475 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 6, 117);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 47);
  lua_pushvalue(L, (11 + lc_nextra));
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc475), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 29);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* quote_form_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, form_symbol, quote_symbol))
   */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc476 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 6, 117);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lua_pushvalue(L, (17 + lc_nextra));
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc476), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 28);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* lambda_form_builtin_systemName =
   * systemName_make(new_list(typeAnnotation_symbol, new_list(form_symbol,
   * new_list(function_symbol, something_symbol, function_symbol)),
   * theThing_symbol)) */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc477 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 6, 117);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  const int lc478 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 47);
  lc_getupvalue(L, (lc473 + lc_nextra), 7, 116);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 47);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc478), 1);
  lc_getupvalue(L, (lc473 + lc_nextra), 8, 115);
  lua_call(L, 3, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc477), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 27);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* function_builtin_use_systemName = systemName_make(new_list(form_symbol,
   * new_list(system_symbol, function_symbol))) */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc479 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  const int lc480 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 48);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 47);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc480), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc479), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 26);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* form_builtin_use_systemName = systemName_make(new_list(form_symbol,
   * new_list(system_symbol, form_symbol))) */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc481 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  const int lc482 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 48);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc482), LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc481), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 25);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* form_use_systemName = systemName_make(new_list(form_symbol, form_symbol))
   */
  lc_getupvalue(L, (lc473 + lc_nextra), 1, 122);
  const int lc483 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 46);
  lua_call(L, 2, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc483), 1);
  lc_setupvalue(L, (lc473 + lc_nextra), 12, 24);
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.new_data_function_builtin_systemName =
   * new_data_function_builtin_systemName */
  lua_pushvalue(L, (36 + lc_nextra));
  lua_pushliteral(L, "new_data_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.data_name_function_builtin_systemName =
   * data_name_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 43);
  lua_pushliteral(L, "data_name_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.data_list_function_builtin_systemName =
   * data_list_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 42);
  lua_pushliteral(L, "data_list_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.data_p_function_builtin_systemName =
   * data_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 41);
  lua_pushliteral(L, "data_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.new_error_function_builtin_systemName =
   * new_error_function_builtin_systemName */
  lua_pushvalue(L, (37 + lc_nextra));
  lua_pushliteral(L, "new_error_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.error_name_function_builtin_systemName =
   * error_name_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 40);
  lua_pushliteral(L, "error_name_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.error_list_function_builtin_systemName =
   * error_list_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 39);
  lua_pushliteral(L, "error_list_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.error_p_function_builtin_systemName =
   * error_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 38);
  lua_pushliteral(L, "error_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.new_construction_function_builtin_systemName =
   * new_construction_function_builtin_systemName */
  lua_pushvalue(L, (38 + lc_nextra));
  lua_pushliteral(L, "new_construction_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.construction_p_function_builtin_systemName =
   * construction_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 37);
  lua_pushliteral(L, "construction_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.construction_head_function_builtin_systemName =
   * construction_head_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 36);
  lua_pushliteral(L, "construction_head_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.construction_tail_function_builtin_systemName =
   * construction_tail_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 35);
  lua_pushliteral(L, "construction_tail_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.symbol_p_function_builtin_systemName =
   * symbol_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 34);
  lua_pushliteral(L, "symbol_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.null_p_function_builtin_systemName =
   * null_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 33);
  lua_pushliteral(L, "null_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.equal_p_function_builtin_systemName =
   * equal_p_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 32);
  lua_pushliteral(L, "equal_p_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.apply_function_builtin_systemName =
   * apply_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 31);
  lua_pushliteral(L, "apply_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.evaluate_function_builtin_systemName =
   * evaluate_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 30);
  lua_pushliteral(L, "evaluate_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.list_chooseOne_function_builtin_systemName =
   * list_chooseOne_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 0, 123);
  lua_pushliteral(L, "list_chooseOne_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.if_function_builtin_systemName = if_function_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 29);
  lua_pushliteral(L, "if_function_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.quote_form_builtin_systemName = quote_form_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 28);
  lua_pushliteral(L, "quote_form_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.lambda_form_builtin_systemName = lambda_form_builtin_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 27);
  lua_pushliteral(L, "lambda_form_builtin_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.function_builtin_use_systemName = function_builtin_use_systemName
   */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 26);
  lua_pushliteral(L, "function_builtin_use_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.form_builtin_use_systemName = form_builtin_use_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 25);
  lua_pushliteral(L, "form_builtin_use_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* exports.form_use_systemName = form_use_systemName */
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 24);
  lua_pushliteral(L, "form_use_systemName");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 39);

  /* local false_v = new_data(false_symbol, new_list()) */
  lc_newclosuretable(L, (lc473 + lc_nextra));
  enum { lc484 = 40 };
  assert((lua_gettop(L) == (lc484 + lc_nextra)));
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 77);
  const int lc485 = lua_gettop(L);
  lc_getupvalue(L, (lc473 + lc_nextra), 2, 121);
  lc_getupvalue(L, (lc473 + lc_nextra), 12, 21);
  lua_call(L, 0, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc485), 1);
  lua_rawseti(L, (lc484 + lc_nextra), 124);
  assert(lua_gettop(L) - lc_nextra == 40);

  /* local true_v = new_data(true_symbol, new_list()) */
  lc_newclosuretable(L, (lc484 + lc_nextra));
  enum { lc486 = 41 };
  assert((lua_gettop(L) == (lc486 + lc_nextra)));
  lc_getupvalue(L, (lc484 + lc_nextra), 13, 77);
  const int lc487 = lua_gettop(L);
  lc_getupvalue(L, (lc484 + lc_nextra), 4, 120);
  lc_getupvalue(L, (lc484 + lc_nextra), 13, 21);
  lua_call(L, 0, LUA_MULTRET);
  lua_call(L, (lua_gettop(L) - lc487), 1);
  lua_rawseti(L, (lc486 + lc_nextra), 125);
  assert(lua_gettop(L) - lc_nextra == 41);

  /* local list_to_jsArray */
  lc_newclosuretable(L, (lc486 + lc_nextra));
  enum { lc488 = 42 };
  assert((lua_gettop(L) == (lc488 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc488 + lc_nextra), 126);
  assert(lua_gettop(L) - lc_nextra == 42);

  /* list_to_jsArray = function(xs, k_done, k_tail)
   *     local ret = {};
   *     while construction_p(xs) do
   *         __TS__ArrayPush(ret, construction_head(xs));
   *         xs = construction_tail(xs);
   *     end
   *     if null_p(xs) then
   *         return k_done(ret);
   *     end
   *     return k_tail(ret, xs);
   * end */
  lua_pushvalue(L, (lc488 + lc_nextra));
  lua_pushcclosure(L, lcf1_list_to_jsArray, 1);
  lc_setupvalue(L, (lc488 + lc_nextra), 0, 126);
  assert(lua_gettop(L) - lc_nextra == 42);

  /* local maybe_list_to_jsArray */
  lc_newclosuretable(L, (lc488 + lc_nextra));
  enum { lc495 = 43 };
  assert((lua_gettop(L) == (lc495 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc495 + lc_nextra), 127);
  assert(lua_gettop(L) - lc_nextra == 43);

  /* maybe_list_to_jsArray = function(xs)
   *     return list_to_jsArray(xs, function(xs)
   *         return xs;
   *     end, function(xs, x)
   *         return false;
   *     end);
   * end */
  lua_pushvalue(L, (lc495 + lc_nextra));
  lua_pushcclosure(L, lcf1_maybe_list_to_jsArray, 1);
  lc_setupvalue(L, (lc495 + lc_nextra), 0, 127);
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.jsArray_to_list = jsArray_to_list */
  lc_getupvalue(L, (lc495 + lc_nextra), 16, 22);
  lua_pushliteral(L, "jsArray_to_list");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.maybe_list_to_jsArray = maybe_list_to_jsArray */
  lc_getupvalue(L, (lc495 + lc_nextra), 0, 127);
  lua_pushliteral(L, "maybe_list_to_jsArray");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.new_list = new_list */
  lc_getupvalue(L, (lc495 + lc_nextra), 16, 21);
  lua_pushliteral(L, "new_list");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.delay_p = any_delay_just_p */
  lc_getupvalue(L, (lc495 + lc_nextra), 16, 19);
  lua_pushliteral(L, "delay_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.force_all = force_all */
  lc_getupvalue(L, (lc495 + lc_nextra), 16, 18);
  lua_pushliteral(L, "force_all");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* exports.force1 = force1 */
  lc_getupvalue(L, (lc495 + lc_nextra), 16, 17);
  lua_pushliteral(L, "force1");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 43);

  /* env_null_v = {} */
  lua_newtable(L);
  lc_setupvalue(L, (lc495 + lc_nextra), 16, 16);
  assert(lua_gettop(L) - lc_nextra == 43);

  /* local val2env */
  lc_newclosuretable(L, (lc495 + lc_nextra));
  enum { lc499 = 44 };
  assert((lua_gettop(L) == (lc499 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc499 + lc_nextra), 128);
  assert(lua_gettop(L) - lc_nextra == 44);

  /* val2env = function(x)
   *     x = force_all(x);
   *     if not data_p(x) then
   *         return false;
   *     end
   *     local s = force_all(data_name(x));
   *     if not symbol_p(s) then
   *         return false;
   *     end
   *     if not symbol_equal_p(s, mapping_symbol) then
   *         return false;
   *     end
   *     s = force_all(data_list(x));
   *     if not construction_p(s) then
   *         return false;
   *     end
   *     if not null_p(force_all(construction_tail(s))) then
   *         return false;
   *     end
   *     local ret = {};
   *     local xs = force_all(construction_head(s));
   *     while not null_p(xs) do
   *         if not construction_p(xs) then
   *             return false;
   *         end
   *         local x = force_all(construction_head(xs));
   *         xs = force_all(construction_tail(xs));
   *         if not construction_p(x) then
   *             return false;
   *         end
   *         local k = construction_head(x);
   *         x = force_all(construction_tail(x));
   *         if not construction_p(x) then
   *             return false;
   *         end
   *         local v = construction_head(x);
   *         if not null_p(force_all(construction_tail(x))) then
   *             return false;
   *         end
   *         local not_breaked = true;
   *         do
   *             local i = 0;
   *             while i < (#ret) do
   *                 if jsbool_equal_p(ret[(i + 0) + 1], k) then
   *                     ret[(i + 1) + 1] = v;
   *                     not_breaked = false;
   *                     break;
   *                 end
   *                 i = i + 2;
   *             end
   *         end
   *         if not_breaked then
   *             __TS__ArrayPush(ret, k);
   *             __TS__ArrayPush(ret, v);
   *         end
   *     end
   *     return ret;
   * end */
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf1_val2env, 1);
  lc_setupvalue(L, (lc499 + lc_nextra), 0, 128);
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.env_null_v = env_null_v */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 16);
  lua_pushliteral(L, "env_null_v");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.env_set = env_set */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 15);
  lua_pushliteral(L, "env_set");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.env_get = env_get */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 14);
  lua_pushliteral(L, "env_get");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.env2val = env2val */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 12);
  lua_pushliteral(L, "env2val");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.env_foreach = env_foreach */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 11);
  lua_pushliteral(L, "env_foreach");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* exports.val2env = val2env */
  lc_getupvalue(L, (lc499 + lc_nextra), 0, 128);
  lua_pushliteral(L, "val2env");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 44);

  /* local make_builtin_p_func */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 45);

  /* make_builtin_p_func = function(p_sym, p_jsfunc)
   *     return {p_sym, 1, function(x, error_v)
   *         x = force1(x);
   *         if any_delay_just_p(x) then
   *             return builtin_func_apply(p_sym, {x});
   *         end
   *         if p_jsfunc(x) then
   *             return true_v;
   *         end
   *         return false_v;
   *     end};
   * end */
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf1_make_builtin_p_func, 1);
  lua_replace(L, (45 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 45);

  /* local make_builtin_get_func */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 46);

  /* make_builtin_get_func = function(f_sym, p_jsfunc, f_jsfunc)
   *     return {f_sym, 1, function(x, error_v)
   *         x = force1(x);
   *         if any_delay_just_p(x) then
   *             return builtin_func_apply(f_sym, {x});
   *         end
   *         if p_jsfunc(x) then
   *             return f_jsfunc(x);
   *         end
   *         return error_v;
   *     end};
   * end */
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf1_make_builtin_get_func, 1);
  lua_replace(L, (46 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 46);

  /* real_builtin_func_apply_s =
   * {make_builtin_p_func(data_p_function_builtin_systemName, data_p),
   * {new_data_function_builtin_systemName, 2, new_data},
   * make_builtin_get_func(data_name_function_builtin_systemName, data_p,
   * data_name), make_builtin_get_func(data_list_function_builtin_systemName,
   * data_p, data_list),
   * make_builtin_p_func(error_p_function_builtin_systemName, error_p),
   * {new_error_function_builtin_systemName, 2, new_error},
   * make_builtin_get_func(error_name_function_builtin_systemName, error_p,
   * error_name), make_builtin_get_func(error_list_function_builtin_systemName,
   * error_p, error_list),
   * make_builtin_p_func(null_p_function_builtin_systemName, null_p),
   * {new_construction_function_builtin_systemName, 2, new_construction},
   * make_builtin_p_func(construction_p_function_builtin_systemName,
   * construction_p),
   * make_builtin_get_func(construction_head_function_builtin_systemName,
   * construction_p, construction_head),
   * make_builtin_get_func(construction_tail_function_builtin_systemName,
   * construction_p, construction_tail), {equal_p_function_builtin_systemName,
   * 2, function(x, y, error_v)
   *     if x == y then
   *         return true_v;
   *     end
   *     x = force1(x);
   *     y = force1(y);
   *     if any_delay_just_p(x) or any_delay_just_p(y) then
   *         return builtin_func_apply(equal_p_function_builtin_systemName, {x,
   * y});
   *     end
   *     if x == y then
   *         return true_v;
   *     end
   *     local H_if;
   *     H_if = function(b, x, y)
   *         return builtin_func_apply(if_function_builtin_systemName, {b, x,
   * y});
   *     end;
   *     local H_and;
   *     H_and = function(x, y)
   *         return H_if(x, y, false_v);
   *     end;
   *     ASSERT(not any_delay_just_p(x));
   *     local end_2;
   *     end_2 = function(x, y, f1, f2)
   *         return
   * H_and(builtin_func_apply(equal_p_function_builtin_systemName, {f1(x),
   * f1(y)}), builtin_func_apply(equal_p_function_builtin_systemName, {f2(x),
   * f2(y)}));
   *     end;
   *     if null_p(x) then
   *         if not null_p(x) then
   *             return false_v;
   *         end
   *         return true_v;
   *     elseif symbol_p(x) then
   *         if not symbol_p(y) then
   *             return false_v;
   *         end
   *         return (symbol_equal_p(x, y) and true_v) or false_v;
   *     elseif data_p(x) then
   *         if not data_p(y) then
   *             return false_v;
   *         end
   *         return end_2(x, y, data_name, data_list);
   *     elseif construction_p(x) then
   *         if not construction_p(y) then
   *             return false_v;
   *         end
   *         return end_2(x, y, construction_head, construction_tail);
   *     elseif error_p(x) then
   *         if not error_p(y) then
   *             return false_v;
   *         end
   *         return end_2(x, y, error_name, error_list);
   *     end
   *     return ERROR();
   * end}, {apply_function_builtin_systemName, 2, function(f, xs, error_v)
   *     local jslist = {};
   *     local iter = force_all(xs);
   *     while construction_p(iter) do
   *         __TS__ArrayPush(jslist, construction_head(iter));
   *         iter = force_all(construction_tail(iter));
   *     end
   *     if not null_p(iter) then
   *         return error_v;
   *     end
   *     return apply(f, jslist);
   * end}, {evaluate_function_builtin_systemName, 2, function(env, x, error_v)
   *     local maybeenv = val2env(env);
   *     if maybeenv == false then
   *         return error_v;
   *     end
   *     return evaluate(maybeenv, x);
   * end}, make_builtin_p_func(symbol_p_function_builtin_systemName, symbol_p),
   * {list_chooseOne_function_builtin_systemName, 1, function(xs, error_v)
   *     xs = force1(xs);
   *     if any_delay_just_p(xs) then
   *         return
   * builtin_func_apply(list_chooseOne_function_builtin_systemName, {xs});
   *     end
   *     if not construction_p(xs) then
   *         return error_v;
   *     end
   *     return construction_head(xs);
   * end}, {if_function_builtin_systemName, 3, function(b, x, y, error_v)
   *     b = force1(b);
   *     if any_delay_just_p(b) then
   *         return builtin_func_apply(if_function_builtin_systemName, {b, x,
   * y});
   *     end
   *     if not data_p(b) then
   *         return error_v;
   *     end
   *     local nam = force_all(data_name(b));
   *     if not symbol_p(nam) then
   *         return error_v;
   *     end
   *     if symbol_equal_p(nam, true_symbol) then
   *         return x;
   *     end
   *     if symbol_equal_p(nam, false_symbol) then
   *         return y;
   *     end
   *     return error_v;
   * end}} */
  lua_createtable(L, 19, 0);
  lua_pushvalue(L, (45 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 41);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 76);
  lua_call(L, 2, 1);
  lua_rawseti(L, -2, 1);
  lua_createtable(L, 3, 0);
  lua_pushvalue(L, (36 + lc_nextra));
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 77);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 43);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 76);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 75);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 3);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 42);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 76);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 74);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 4);
  lua_pushvalue(L, (45 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 38);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 72);
  lua_call(L, 2, 1);
  lua_rawseti(L, -2, 5);
  lua_createtable(L, 3, 0);
  lua_pushvalue(L, (37 + lc_nextra));
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 73);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 6);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 40);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 72);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 71);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 7);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 39);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 72);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 70);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 8);
  lua_pushvalue(L, (45 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 33);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 78);
  lua_call(L, 2, 1);
  lua_rawseti(L, -2, 9);
  lua_createtable(L, 3, 0);
  lua_pushvalue(L, (38 + lc_nextra));
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 83);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 10);
  lua_pushvalue(L, (45 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 37);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 82);
  lua_call(L, 2, 1);
  lua_rawseti(L, -2, 11);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 36);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 82);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 81);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 12);
  lua_pushvalue(L, (46 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 35);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 82);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 80);
  lua_call(L, 3, 1);
  lua_rawseti(L, -2, 13);
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 32);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf591, 1);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 14);
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 31);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf598, 1);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 15);
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 30);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 2);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf603, 1);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 16);
  lua_pushvalue(L, (45 + lc_nextra));
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 34);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 85);
  lua_call(L, 2, 1);
  lua_rawseti(L, -2, 17);
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, (lc499 + lc_nextra), 5, 123);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 1);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf610, 1);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 18);
  lua_createtable(L, 3, 0);
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 29);
  lua_rawseti(L, -2, 1);
  lua_pushnumber(L, 3);
  lua_rawseti(L, -2, 2);
  lua_pushvalue(L, (lc499 + lc_nextra));
  lua_pushcclosure(L, lcf623, 1);
  lua_rawseti(L, -2, 3);
  lua_rawseti(L, -2, 19);
  lc_setupvalue(L, (lc499 + lc_nextra), 17, 8);
  assert(lua_gettop(L) - lc_nextra == 46);

  /* exports.equal_p = jsbool_equal_p */
  lc_getupvalue(L, (lc499 + lc_nextra), 17, 3);
  lua_pushliteral(L, "equal_p");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 46);

  /* local jsbool_no_force_equal_p */
  lc_newclosuretable(L, (lc499 + lc_nextra));
  enum { lc624 = 47 };
  assert((lua_gettop(L) == (lc624 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc624 + lc_nextra), 136);
  assert(lua_gettop(L) - lc_nextra == 47);

  /* jsbool_no_force_equal_p = function(x, y)
   *     if x == y then
   *         return true;
   *     end
   *     x = un_just_all(x);
   *     y = un_just_all(y);
   *     if x == y then
   *         return true;
   *     end
   *     local end_2;
   *     end_2 = function(x, y, f1, f2)
   *         if jsbool_no_force_equal_p(f1(x), f1(y)) and
   * jsbool_no_force_equal_p(f2(x), f2(y)) then
   *             lang_set_do(x, y);
   *             return true;
   *         else
   *             return false;
   *         end
   *     end;
   *     if null_p(x) then
   *         if not null_p(y) then
   *             return false;
   *         end
   *         lang_set_do(x, null_v);
   *         lang_set_do(y, null_v);
   *         return true;
   *     elseif symbol_p(x) then
   *         if not symbol_p(y) then
   *             return false;
   *         end
   *         return symbol_equal_p(x, y);
   *     elseif construction_p(x) then
   *         if not construction_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, construction_head, construction_tail);
   *     elseif error_p(x) then
   *         if not error_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, error_name, error_list);
   *     elseif data_p(x) then
   *         if not data_p(y) then
   *             return false;
   *         end
   *         return end_2(x, y, data_name, data_list);
   *     elseif delay_evaluate_p(x) then
   *         return false;
   *     elseif delay_builtin_func_p(x) then
   *         return false;
   *     elseif delay_builtin_form_p(x) then
   *         return false;
   *     elseif delay_apply_p(x) then
   *         return false;
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc624 + lc_nextra));
  lua_pushcclosure(L, lcf1_jsbool_no_force_equal_p, 1);
  lc_setupvalue(L, (lc624 + lc_nextra), 0, 136);
  assert(lua_gettop(L) - lc_nextra == 47);

  /* local simple_print_force_all_rec */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 48);

  /* simple_print_force_all_rec = function(x)
   *     return simple_print(force_all_rec(x));
   * end */
  lua_pushvalue(L, (lc624 + lc_nextra));
  lua_pushcclosure(L, lcf1_simple_print_force_all_rec, 1);
  lua_replace(L, (48 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 48);

  /* exports.simple_print = simple_print */
  lc_getupvalue(L, (lc624 + lc_nextra), 18, 2);
  lua_pushliteral(L, "simple_print");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 48);

  /* exports.simple_print_force_all_rec = simple_print_force_all_rec */
  lua_pushvalue(L, (48 + lc_nextra));
  lua_pushliteral(L, "simple_print_force_all_rec");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 48);

  /* local simple_parse */
  lc_newclosuretable(L, (lc624 + lc_nextra));
  enum { lc670 = 49 };
  assert((lua_gettop(L) == (lc670 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc670 + lc_nextra), 137);
  assert(lua_gettop(L) - lc_nextra == 49);

  /* simple_parse = function(x)
   *     local state_const, state, eof, get, put, parse_error, a_space_p, space,
   * symbol, list, data, readerror, readeval, readfuncapply, readformbuiltin,
   * readapply, a_symbol_p, val;
   *     eof = function()
   *         return (#state_const) == state;
   *     end;
   *     get = function()
   *         ASSERT(not eof());
   *         local ret = state_const:sub(state + 1, state + 1);
   *         state = state + 1;
   *         return ret;
   *     end;
   *     put = function(x)
   *         ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x);
   *         state = state - 1;
   *     end;
   *     parse_error = function()
   *         error("TheLanguage parse ERROR!");
   *     end;
   *     a_space_p = function(x)
   *         return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r");
   *     end;
   *     space = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if not a_space_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_space_p(x) and (not eof()) do
   *             x = get();
   *         end
   *         if not a_space_p(x) then
   *             put(x);
   *         end
   *         return true;
   *     end;
   *     symbol = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         local ret = "";
   *         if not a_symbol_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_symbol_p(x) and (not eof()) do
   *             ret = ret .. x;
   *             x = get();
   *         end
   *         if a_symbol_p(x) then
   *             ret = ret .. x;
   *         else
   *             put(x);
   *         end
   *         return new_symbol(ret);
   *     end;
   *     list = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "(" then
   *             put(x);
   *             return false;
   *         end
   *         local HOLE = new_symbol("!!@@READ||HOLE@@!!");
   *         local ret = HOLE;
   *         local set_last;
   *         set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end;
   *         local last_add;
   *         last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end;
   *         while true do
   *             space();
   *             if eof() then
   *                 return parse_error();
   *             end
   *             x = get();
   *             if x == ")" then
   *                 set_last(null_v);
   *                 return ret;
   *             end
   *             if x == "." then
   *                 space();
   *                 local e = val();
   *                 set_last(e);
   *                 space();
   *                 if eof() then
   *                     return parse_error();
   *                 end
   *                 x = get();
   *                 if x ~= ")" then
   *                     return parse_error();
   *                 end
   *                 return ret;
   *             end
   *             put(x);
   *             local e = val();
   *             last_add(e);
   *         end
   *     end;
   *     data = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "#" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_data(construction_head(xs), construction_tail(xs));
   *     end;
   *     readerror = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "!" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_error(construction_head(xs), construction_tail(xs));
   *     end;
   *     a_symbol_p = function(x)
   *         if a_space_p(x) then
   *             return false;
   *         end
   *         local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~",
   * "/", "-", ">", "_", ":", "?", "[", "]", "&"};
   *         do
   *             local i = 0;
   *             while i < (#not_xs) do
   *                 if x == not_xs[i + 1] then
   *                     return false;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return true;
   *     end;
   *     val = function()
   *         space();
   *         local fs = {list, symbol, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply};
   *         do
   *             local i = 0;
   *             while i < (#fs) do
   *                 local x = fs[i + 1]();
   *                 if x ~= false then
   *                     return x;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return parse_error();
   *     end;
   *     state_const = x;
   *     state = 0;
   *     local make_read_two;
   *     make_read_two = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end;
   *     end;
   *     local make_read_three;
   *     make_read_three = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end;
   *     end;
   *     readeval = make_read_two("$", function(e, x)
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return evaluate(env, x);
   *     end);
   *     readfuncapply = make_read_two("%", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return builtin_func_apply(f, jsxs);
   *     end);
   *     readformbuiltin = make_read_three("@", function(e, f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return builtin_form_apply(env, f, jsxs);
   *     end);
   *     readapply = make_read_two("^", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return apply(f, jsxs);
   *     end);
   *     return val();
   * end */
  lua_pushvalue(L, (lc670 + lc_nextra));
  lua_pushcclosure(L, lcf1_simple_parse, 1);
  lc_setupvalue(L, (lc670 + lc_nextra), 0, 137);
  assert(lua_gettop(L) - lc_nextra == 49);

  /* exports.simple_parse = simple_parse */
  lc_getupvalue(L, (lc670 + lc_nextra), 0, 137);
  lua_pushliteral(L, "simple_parse");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 49);

  /* local complex_parse */
  lua_settop(L, (lua_gettop(L) + 1));
  assert(lua_gettop(L) - lc_nextra == 50);

  /* complex_parse = function(x)
   *     local state_const, state, eof, get, put, parse_error, a_space_p, space,
   * symbol, list, data, readerror, readeval, readfuncapply, readformbuiltin,
   * readapply, a_symbol_p, val, un_maybe, not_eof, assert_get,
   * readsysname_no_pack, readsysname;
   *     eof = function()
   *         return (#state_const) == state;
   *     end;
   *     get = function()
   *         ASSERT(not eof());
   *         local ret = state_const:sub(state + 1, state + 1);
   *         state = state + 1;
   *         return ret;
   *     end;
   *     put = function(x)
   *         ASSERT(state_const:sub((state - 1) + 1, (state - 1) + 1) == x);
   *         state = state - 1;
   *     end;
   *     parse_error = function()
   *         error("TheLanguage parse ERROR!");
   *     end;
   *     a_space_p = function(x)
   *         return (((x == " ") or (x == "\n")) or (x == "\t")) or (x == "\r");
   *     end;
   *     space = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if not a_space_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_space_p(x) and (not eof()) do
   *             x = get();
   *         end
   *         if not a_space_p(x) then
   *             put(x);
   *         end
   *         return true;
   *     end;
   *     symbol = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         local ret = "";
   *         if not a_symbol_p(x) then
   *             put(x);
   *             return false;
   *         end
   *         while a_symbol_p(x) and (not eof()) do
   *             ret = ret .. x;
   *             x = get();
   *         end
   *         if a_symbol_p(x) then
   *             ret = ret .. x;
   *         else
   *             put(x);
   *         end
   *         return new_symbol(ret);
   *     end;
   *     list = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "(" then
   *             put(x);
   *             return false;
   *         end
   *         local HOLE = new_symbol("!!@@READ||HOLE@@!!");
   *         local ret = HOLE;
   *         local set_last;
   *         set_last = function(lst)
   *             if ret == HOLE then
   *                 ret = lst;
   *                 return;
   *             end
   *             local x = ret;
   *             while true do
   *                 if not construction_p(x) then
   *                     return ERROR();
   *                 end
   *                 local d = construction_tail(x);
   *                 if d == HOLE then
   *                     break;
   *                 end
   *                 x = construction_tail(x);
   *             end
   *             if not construction_p(x) then
   *                 return ERROR();
   *             end
   *             if construction_tail(x) ~= HOLE then
   *                 return ERROR();
   *             end
   *             x[2 + 1] = lst;
   *         end;
   *         local last_add;
   *         last_add = function(x)
   *             set_last(new_construction(x, HOLE));
   *         end;
   *         while true do
   *             space();
   *             if eof() then
   *                 return parse_error();
   *             end
   *             x = get();
   *             if x == ")" then
   *                 set_last(null_v);
   *                 return ret;
   *             end
   *             if x == "." then
   *                 space();
   *                 local e = val();
   *                 set_last(e);
   *                 space();
   *                 if eof() then
   *                     return parse_error();
   *                 end
   *                 x = get();
   *                 if x ~= ")" then
   *                     return parse_error();
   *                 end
   *                 return ret;
   *             end
   *             put(x);
   *             local e = val();
   *             last_add(e);
   *         end
   *     end;
   *     data = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "#" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_data(construction_head(xs), construction_tail(xs));
   *     end;
   *     readerror = function()
   *         if eof() then
   *             return false;
   *         end
   *         local x = get();
   *         if x ~= "!" then
   *             put(x);
   *             return false;
   *         end
   *         local xs = list();
   *         if xs == false then
   *             return parse_error();
   *         end
   *         if not construction_p(xs) then
   *             return parse_error();
   *         end
   *         return new_error(construction_head(xs), construction_tail(xs));
   *     end;
   *     a_symbol_p = function(x)
   *         if a_space_p(x) then
   *             return false;
   *         end
   *         local not_xs = {"(", ")", "!", "#", ".", "$", "%", "^", "@", "~",
   * "/", "-", ">", "_", ":", "?", "[", "]", "&"};
   *         do
   *             local i = 0;
   *             while i < (#not_xs) do
   *                 if x == not_xs[i + 1] then
   *                     return false;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return true;
   *     end;
   *     val = function()
   *         space();
   *         local fs = {list, readsysname, data, readerror, readeval,
   * readfuncapply, readformbuiltin, readapply};
   *         do
   *             local i = 0;
   *             while i < (#fs) do
   *                 local x = fs[i + 1]();
   *                 if x ~= false then
   *                     return x;
   *                 end
   *                 i = i + 1;
   *             end
   *         end
   *         return parse_error();
   *     end;
   *     un_maybe = function(x)
   *         if x == false then
   *             return parse_error();
   *         end
   *         return x;
   *     end;
   *     not_eof = function()
   *         return not eof();
   *     end;
   *     assert_get = function(c)
   *         un_maybe(not_eof());
   *         un_maybe(get() == c);
   *     end;
   *     readsysname_no_pack = function()
   *         local readsysname_no_pack_inner_must, may_xfx_xf;
   *         readsysname_no_pack_inner_must = function(strict)
   *             if strict == nil then
   *                 strict = false;
   *             end
   *             local readsysname_no_pack_bracket;
   *             readsysname_no_pack_bracket = function()
   *                 assert_get("[");
   *                 local x = readsysname_no_pack_inner_must();
   *                 assert_get("]");
   *                 return x;
   *             end;
   *             local fs = (strict and {list, symbol,
   * readsysname_no_pack_bracket, data, readerror, readeval, readfuncapply,
   * readformbuiltin, readapply}) or {list, readsysname_no_pack, data,
   * readerror, readeval, readfuncapply, readformbuiltin, readapply};
   *             do
   *                 local i = 0;
   *                 while i < (#fs) do
   *                     local x = fs[i + 1]();
   *                     if x ~= false then
   *                         return x;
   *                     end
   *                     i = i + 1;
   *                 end
   *             end
   *             return parse_error();
   *         end;
   *         may_xfx_xf = function(x)
   *             if eof() then
   *                 return x;
   *             end
   *             local head = get();
   *             if head == "." then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_list(x), something_symbol), y);
   *             elseif head == ":" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol, y, x);
   *             elseif head == "~" then
   *                 return new_list(isOrNot_symbol, x);
   *             elseif head == "@" then
   *                 local y = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, new_construction(x, something_symbol),
   * something_symbol), y);
   *             elseif head == "?" then
   *                 return new_list(typeAnnotation_symbol, function_symbol,
   * new_list(isOrNot_symbol, x));
   *             elseif head == "/" then
   *                 local ys = {x};
   *                 while true do
   *                     local y = readsysname_no_pack_inner_must(true);
   *                     __TS__ArrayPush(ys, y);
   *                     if eof() then
   *                         break;
   *                     end
   *                     local c0 = get();
   *                     if c0 ~= "/" then
   *                         put(c0);
   *                         break;
   *                     end
   *                 end
   *                 return new_list(sub_symbol, jsArray_to_list(ys));
   *             else
   *                 put(head);
   *                 return x;
   *             end
   *             return ERROR();
   *         end;
   *         if eof() then
   *             return false;
   *         end
   *         local head = get();
   *         if head == "&" then
   *             un_maybe(not_eof());
   *             local c0 = get();
   *             if c0 == "+" then
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(form_symbol, new_list(system_symbol, x));
   *             else
   *                 put(c0);
   *             end
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(form_symbol, x);
   *         elseif head == ":" then
   *             un_maybe(not_eof());
   *             local c0 = get();
   *             if c0 == "&" then
   *                 assert_get(">");
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(form_symbol, new_list(function_symbol, something_symbol, x)),
   * theThing_symbol);
   *             elseif c0 == ">" then
   *                 local x = readsysname_no_pack_inner_must();
   *                 return new_list(typeAnnotation_symbol,
   * new_list(function_symbol, something_symbol, x), theThing_symbol);
   *             else
   *                 put(c0);
   *             end
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(typeAnnotation_symbol, x, theThing_symbol);
   *         elseif head == "+" then
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(system_symbol, x);
   *         elseif head == "[" then
   *             local x = readsysname_no_pack_inner_must();
   *             assert_get("]");
   *             return may_xfx_xf(x);
   *         elseif head == "_" then
   *             assert_get(":");
   *             local x = readsysname_no_pack_inner_must();
   *             return new_list(typeAnnotation_symbol, x, something_symbol);
   *         else
   *             put(head);
   *             local x = symbol();
   *             if x == false then
   *                 return false;
   *             end
   *             return may_xfx_xf(x);
   *         end
   *         return ERROR();
   *     end;
   *     readsysname = function()
   *         local x = readsysname_no_pack();
   *         if x == false then
   *             return false;
   *         end
   *         if symbol_p(x) then
   *             return x;
   *         end
   *         return systemName_make(x);
   *     end;
   *     state_const = x;
   *     state = 0;
   *     local make_read_two;
   *     make_read_two = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not (construction_p(x) and null_p(construction_tail(x)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x));
   *         end;
   *     end;
   *     local make_read_three;
   *     make_read_three = function(prefix, k)
   *         return function()
   *             if eof() then
   *                 return false;
   *             end
   *             local c = get();
   *             if c ~= prefix then
   *                 put(c);
   *                 return false;
   *             end
   *             local xs = list();
   *             if xs == false then
   *                 return parse_error();
   *             end
   *             if not construction_p(xs) then
   *                 return parse_error();
   *             end
   *             local x = construction_tail(xs);
   *             if not construction_p(x) then
   *                 return parse_error();
   *             end
   *             local x_d = construction_tail(x);
   *             if not (construction_p(x_d) and null_p(construction_tail(x_d)))
   * then
   *                 return parse_error();
   *             end
   *             return k(construction_head(xs), construction_head(x),
   * construction_head(x_d));
   *         end;
   *     end;
   *     readeval = make_read_two("$", function(e, x)
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return evaluate(env, x);
   *     end);
   *     readfuncapply = make_read_two("%", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return builtin_func_apply(f, jsxs);
   *     end);
   *     readformbuiltin = make_read_three("@", function(e, f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         local env = val2env(e);
   *         if env == false then
   *             return parse_error();
   *         end
   *         return builtin_form_apply(env, f, jsxs);
   *     end);
   *     readapply = make_read_two("^", function(f, xs)
   *         local jsxs = list_to_jsArray(xs, function(xs)
   *             return xs;
   *         end, function(xs, y)
   *             return parse_error();
   *         end);
   *         return apply(f, jsxs);
   *     end);
   *     return val();
   * end */
  lua_pushvalue(L, (lc670 + lc_nextra));
  lua_pushcclosure(L, lcf1_complex_parse, 1);
  lua_replace(L, (50 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 50);

  /* exports.complex_parse = complex_parse */
  lua_pushvalue(L, (50 + lc_nextra));
  lua_pushliteral(L, "complex_parse");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 50);

  /* local complex_print */
  lc_newclosuretable(L, (lc670 + lc_nextra));
  enum { lc1128 = 51 };
  assert((lua_gettop(L) == (lc1128 + lc_nextra)));
  lua_settop(L, (lua_gettop(L) + 1));
  lua_rawseti(L, (lc1128 + lc_nextra), 194);
  assert(lua_gettop(L) - lc_nextra == 51);

  /* complex_print = function(val)
   *     local print_sys_name;
   *     print_sys_name = function(x, where)
   *         if symbol_p(x) then
   *             return un_symbol(x);
   *         end
   *         local inner_bracket;
   *         inner_bracket = function(x)
   *             if where == "inner" then
   *                 return ("[" .. x) .. "]";
   *             elseif where == "top" then
   *                 return x;
   *             end
   *             return ERROR();
   *         end;
   *         local maybe_xs = maybe_list_to_jsArray(x);
   *         if ((maybe_xs ~= false) and ((#maybe_xs) == 3)) and
   * jsbool_no_force_equal_p(maybe_xs[0 + 1], typeAnnotation_symbol) then
   *             local maybe_lst_2 = maybe_list_to_jsArray(maybe_xs[1 + 1]);
   *             if ((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 3)) and
   * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], function_symbol) then
   *                 local var_2_1 = maybe_lst_2[1 + 1];
   *                 local maybe_lst_3 = maybe_list_to_jsArray(var_2_1);
   *                 if ((maybe_lst_3 ~= false) and ((#maybe_lst_3) == 1)) and
   * jsbool_no_force_equal_p(maybe_lst_2[2 + 1], something_symbol) then
   *                     return inner_bracket((print_sys_name(maybe_lst_3[0 +
   * 1], "inner") .. ".") .. print_sys_name(maybe_xs[2 + 1], "inner"));
   *                 elseif (construction_p(var_2_1) and
   * jsbool_no_force_equal_p(construction_tail(var_2_1), something_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_2[2 + 1], something_symbol) then
   *                     return
   * inner_bracket((print_sys_name(construction_head(var_2_1), "inner") .. "@")
   * .. print_sys_name(maybe_xs[2 + 1], "inner"));
   *                 elseif jsbool_no_force_equal_p(var_2_1, something_symbol)
   * and jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol) then
   *                     return inner_bracket(":>" ..
   * print_sys_name(maybe_lst_2[2 + 1], "inner"));
   *                 end
   *             end
   *             local maybe_lst_44 = maybe_list_to_jsArray(maybe_xs[2 + 1]);
   *             if ((jsbool_no_force_equal_p(maybe_xs[1 + 1], function_symbol)
   * and (maybe_lst_44 ~= false)) and ((#maybe_lst_44) == 2)) and
   * jsbool_no_force_equal_p(maybe_lst_44[0 + 1], isOrNot_symbol) then
   *                 return inner_bracket(print_sys_name(maybe_lst_44[1 + 1],
   * "inner") .. "?");
   *             end
   *             if (((maybe_lst_2 ~= false) and ((#maybe_lst_2) == 2)) and
   * jsbool_no_force_equal_p(maybe_xs[2 + 1], theThing_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_2[0 + 1], form_symbol) then
   *                 local maybe_lst_88 = maybe_list_to_jsArray(maybe_lst_2[1 +
   * 1]);
   *                 if (((maybe_lst_88 ~= false) and ((#maybe_lst_88) == 3))
   * and jsbool_no_force_equal_p(maybe_lst_88[0 + 1], function_symbol)) and
   * jsbool_no_force_equal_p(maybe_lst_88[1 + 1], something_symbol) then
   *                     return inner_bracket(":&>" ..
   * print_sys_name(maybe_lst_88[2 + 1], "inner"));
   *                 end
   *             end
   *             local hd = (jsbool_no_force_equal_p(maybe_xs[2 + 1],
   * something_symbol) and "_") or ((jsbool_no_force_equal_p(maybe_xs[2 + 1],
   * theThing_symbol) and "") or print_sys_name(maybe_xs[2 + 1], "inner"));
   *             return inner_bracket((hd .. ":") .. print_sys_name(maybe_xs[1 +
   * 1], "inner"));
   *         elseif (maybe_xs ~= false) and ((#maybe_xs) == 2) then
   *             if jsbool_no_force_equal_p(maybe_xs[0 + 1], form_symbol) then
   *                 local maybe_lst_288 = maybe_list_to_jsArray(maybe_xs[1 +
   * 1]);
   *                 if ((maybe_lst_288 ~= false) and ((#maybe_lst_288) == 2))
   * and jsbool_no_force_equal_p(maybe_lst_288[0 + 1], system_symbol) then
   *                     return inner_bracket("&+" ..
   * print_sys_name(maybe_lst_288[1 + 1], "inner"));
   *                 end
   *                 return inner_bracket("&" .. print_sys_name(maybe_xs[1 + 1],
   * "inner"));
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], isOrNot_symbol)
   * then
   *                 return inner_bracket(print_sys_name(maybe_xs[1 + 1],
   * "inner") .. "~");
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], system_symbol)
   * then
   *                 return inner_bracket("+" .. print_sys_name(maybe_xs[1 + 1],
   * "inner"));
   *             elseif jsbool_no_force_equal_p(maybe_xs[0 + 1], sub_symbol)
   * then
   *                 local maybe_lst_8934 = maybe_list_to_jsArray(maybe_xs[1 +
   * 1]);
   *                 if (maybe_lst_8934 ~= false) and ((#maybe_lst_8934) > 1)
   * then
   *                     local tmp = print_sys_name(maybe_lst_8934[0 + 1],
   * "inner");
   *                     do
   *                         local i = 1;
   *                         while i < (#maybe_lst_8934) do
   *                             tmp = tmp .. ("/" ..
   * print_sys_name(maybe_lst_8934[i + 1], "inner"));
   *                             i = i + 1;
   *                         end
   *                     end
   *                     return inner_bracket(tmp);
   *                 end
   *             end
   *         end
   *         if where == "inner" then
   *             return simple_print(x);
   *         elseif where == "top" then
   *             return simple_print(systemName_make(x));
   *         end
   *         return ERROR();
   *     end;
   *     local x = simple_parse(simple_print(val));
   *     local temp = "";
   *     local prefix = "";
   *     if null_p(x) then
   *         return "()";
   *     elseif construction_p(x) then
   *         temp = "(";
   *         prefix = "";
   *         while construction_p(x) do
   *             temp = temp .. (prefix .. complex_print(construction_head(x)));
   *             prefix = " ";
   *             x = construction_tail(x);
   *         end
   *         if null_p(x) then
   *             temp = temp .. ")";
   *         else
   *             temp = temp .. ((" . " .. complex_print(x)) .. ")");
   *         end
   *         return temp;
   *     elseif data_p(x) then
   *         local name = data_name(x);
   *         local list = data_list(x);
   *         local maybe_xs = maybe_list_to_jsArray(list);
   *         if (((maybe_xs ~= false) and ((#maybe_xs) == 2)) and
   * jsbool_no_force_equal_p(name, name_symbol)) and
   * jsbool_no_force_equal_p(maybe_xs[0 + 1], system_symbol) then
   *             return print_sys_name(maybe_xs[1 + 1], "top");
   *         end
   *         return "#" .. complex_print(new_construction(name, list));
   *     elseif error_p(x) then
   *         return "!" .. complex_print(new_construction(error_name(x),
   * error_list(x)));
   *     elseif symbol_p(x) then
   *         return un_symbol(x);
   *     elseif delay_evaluate_p(x) then
   *         return ((("$(" .. complex_print(env2val(delay_evaluate_env(x)))) ..
   * " ") .. complex_print(delay_evaluate_x(x))) .. ")";
   *     elseif delay_builtin_func_p(x) then
   *         return ((("%(" .. complex_print(delay_builtin_func_f(x))) .. " ")
   * .. complex_print(jsArray_to_list(delay_builtin_func_xs(x)))) .. ")";
   *     elseif delay_builtin_form_p(x) then
   *         return ((((("@(" ..
   * complex_print(env2val(delay_builtin_form_env(x)))) .. " ") ..
   * complex_print(delay_builtin_form_f(x))) .. " ") ..
   * complex_print(jsArray_to_list(delay_builtin_form_xs(x)))) .. ")";
   *     elseif delay_apply_p(x) then
   *         return ((("^(" .. complex_print(delay_apply_f(x))) .. " ") ..
   * complex_print(jsArray_to_list(delay_apply_xs(x)))) .. ")";
   *     end
   *     return ERROR();
   * end */
  lua_pushvalue(L, (lc1128 + lc_nextra));
  lua_pushcclosure(L, lcf1_complex_print, 1);
  lc_setupvalue(L, (lc1128 + lc_nextra), 0, 194);
  assert(lua_gettop(L) - lc_nextra == 51);

  /* exports.complex_print = complex_print */
  lc_getupvalue(L, (lc1128 + lc_nextra), 0, 194);
  lua_pushliteral(L, "complex_print");
  lua_insert(L, -2);
  lua_settable(L, (2 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 51);

  /* return exports */
  lua_pushvalue(L, (2 + lc_nextra));
  return 1;
  assert(lua_gettop(L) - lc_nextra == 51);
}

/* from lua.c */
static int traceback(lua_State *L) {
  if (!lua_isstring(L, 1)) /* 'message' not a string? */
    return 1;              /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);   /* pass error message */
  lua_pushinteger(L, 2); /* skip this function and traceback */
  lua_call(L, 2, 1);     /* call debug.traceback */
  return 1;
}

static void lc_l_message(const char *pname, const char *msg) {
  if (pname)
    fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report(lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL)
      msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall(lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg; /* function index */
  lua_pushcfunction(L, traceback); /* push traceback function */
  lua_insert(L, base);             /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base); /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0)
    lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile(lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring(lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit(lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL)
    return 0; /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init + 1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}

typedef struct {
  int c;
  const char **v;
} lc_args_t;

/* create global arg table */
static void lc_createarg(lua_State *L, const lc_args_t *const args) {
  int i;
  lua_newtable(L);
  for (i = 0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}

#include "lang.h"

extern lang_state *state_new(void) {
  lang_state *L = malloc(sizeof(lang_state));
  if (NULL != L) {
    L->L = luaL_newstate();
    luaL_openlibs(L->L);
    lua_newtable(L->L);
    lua_pushcclosure(L->L, lcf_main, 1);
    lua_call(L->L, 0, 1);
    assert(lua_istable(L->L, -1));
    lua_setglobal(L->L, "L");
    assert(lua_gettop(L->L) == 0);
  }
  return L;
}
extern void state_delete(lang_state *L) {
  lua_close(L->L);
  L->L = NULL;
}